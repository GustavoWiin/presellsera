<!DOCTYPE html>
<html lang="pt-BR" class="">
<head>
    
    <title>Pagamento</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="csrf-token" content="n2CL9wANyZUJ7z200UsHYpGO22c9dseFPHX1JfsN">
    <meta name="color-scheme" content="light">
    <meta name="checkout-white" content="1">
    <meta name="theme-color" content="#ba3b85">
            <link rel="icon" type="image/png" href="https://checkout.ligafacil.online/images/favicon.png" sizes="16x16">
    
    <!-- Scripts -->
    <link rel="preload" as="style" href="https://checkout.ligafacil.online/build/assets/app-O4KGuEvF.css" /><link rel="modulepreload" href="https://checkout.ligafacil.online/build/assets/app-CZdF9RDB.js" /><link rel="stylesheet" href="https://checkout.ligafacil.online/build/assets/app-O4KGuEvF.css" data-navigate-track="reload" /><script type="module" src="https://checkout.ligafacil.online/build/assets/app-CZdF9RDB.js" data-navigate-track="reload"></script>    <link rel="stylesheet" href="https://flowbite.com/docs/flowbite.css?v=2.3.0a">

    <link rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css" />
<style>
    @layer base {
        :root {
            --theme-color: #ba3b85;
            --secondary-color: #2A292E;
            --background-color: #EAEBF1;
            --contrast-color: #FFFFFF;
            --border-radius: 2.5rem;
            --border-radius-optimized-external: 4rem;
            --border-radius-optimized-internal: 4rem;
            --plyr-color-main: #ba3b85;
            --header-space: 8.8rem;
        }
    }
</style>
    <!-- Livewire Styles --><style >[wire\:loading][wire\:loading], [wire\:loading\.delay][wire\:loading\.delay], [wire\:loading\.inline-block][wire\:loading\.inline-block], [wire\:loading\.inline][wire\:loading\.inline], [wire\:loading\.block][wire\:loading\.block], [wire\:loading\.flex][wire\:loading\.flex], [wire\:loading\.table][wire\:loading\.table], [wire\:loading\.grid][wire\:loading\.grid], [wire\:loading\.inline-flex][wire\:loading\.inline-flex] {display: none;}[wire\:loading\.delay\.none][wire\:loading\.delay\.none], [wire\:loading\.delay\.shortest][wire\:loading\.delay\.shortest], [wire\:loading\.delay\.shorter][wire\:loading\.delay\.shorter], [wire\:loading\.delay\.short][wire\:loading\.delay\.short], [wire\:loading\.delay\.default][wire\:loading\.delay\.default], [wire\:loading\.delay\.long][wire\:loading\.delay\.long], [wire\:loading\.delay\.longer][wire\:loading\.delay\.longer], [wire\:loading\.delay\.longest][wire\:loading\.delay\.longest] {display: none;}[wire\:offline][wire\:offline] {display: none;}[wire\:dirty]:not(textarea):not(input):not(select) {display: none;}:root {--livewire-progress-bar-color: #2299dd;}[x-cloak] {display: none !important;}[wire\:cloak] {display: none !important;}</style>
</head>
<body class="font-satoshi">
<main
    class="antialiased h-auto" x-data="checkoutAllData" x-cloak="x-cloak"
    x-bind:class="isGlobalColumnScrolling ? 'h-auto xl:!h-full xl:!overflow-auto' : 'xl:!h-screen overflow-hidden'"
>
    <div x-show="showFullScreenLoading">
        <div
    class="fixed inset-0 flex flex-col items-center justify-center bg-gray-200/95 backdrop-blur z-50"
>
    <div class="animate-spin mb-4">
        <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g clip-path="url(#clip0_1822_31169)">
        <path d="M6.90763 36.1774C5.98813 37.0069 5.91463 38.4319 6.74413 39.3559C11.1406 44.2324 17.4301 47.0284 24.0001 47.0284C30.5191 47.0284 36.7681 44.2729 41.1451 39.4669C41.9791 38.5504 41.9131 37.1239 40.9951 36.2884C40.0831 35.4574 38.6536 35.5204 37.8181 36.4384C34.2901 40.3099 29.2546 42.5299 24.0001 42.5299C18.7021 42.5299 13.6306 40.2754 10.0861 36.3409C9.25363 35.4244 7.83013 35.3479 6.90913 36.1789L6.90763 36.1774Z" fill="var(--theme-color)"/>
        <path d="M3.93 32.1881C4.1565 32.1881 4.38 32.1551 4.5915 32.0891C5.7765 31.7231 6.444 30.4616 6.0795 29.2766C5.529 27.4901 5.2485 25.6376 5.2485 23.7746C5.2485 14.9756 11.49 7.25809 20.088 5.4251C20.676 5.30059 21.1785 4.9556 21.5055 4.45309C21.8325 3.94759 21.9435 3.3461 21.819 2.7551C21.6915 2.1626 21.342 1.6571 20.829 1.3286C20.322 1.0016 19.7265 0.898095 19.149 1.02559C8.4885 3.2966 0.75 12.8651 0.75 23.7746C0.75 26.0846 1.095 28.3811 1.7805 30.6011C2.073 31.5506 2.937 32.1896 3.9315 32.1896L3.93 32.1881Z" fill="var(--theme-color)"/>
        <path d="M29.1135 1.08991C27.8985 0.818406 26.6985 1.58341 26.424 2.79241C26.1525 4.00141 26.9145 5.20591 28.125 5.48041C36.5985 7.39141 42.75 15.0864 42.75 23.7759C42.75 25.7334 42.453 27.6519 41.8665 29.4789C41.4885 30.6594 42.141 31.9284 43.3245 32.3094C43.548 32.3799 43.779 32.4159 44.01 32.4159C44.991 32.4159 45.8535 31.7874 46.1535 30.8529C46.881 28.5819 47.25 26.1999 47.25 23.7759C47.25 12.8289 39.792 3.50041 29.1135 1.08991Z" fill="var(--theme-color)"/>
    </g>
    <defs>
        <clipPath id="clip0_1822_31169">
            <rect width="48" height="48" fill="white"/>
        </clipPath>
    </defs>
</svg>
    </div>
    <div class="font-normal	text-xl	w-72 h-14">
        <p class="text-center text-gray-800">Por favor aguarde, estamos processando seu pedido.</p>
    </div>
</div>
    </div>
    <!-- Main Container -->
    <div
        class="flex flex-col w-full items-center bg-[var(--background-color)] dark:bg-zinc-900"
        x-bind:class="{
        'xl:h-dvh xl:overflow-y-auto': !isGlobalColumnScrolling,
        'xl:h-auto xl:overflow-y-hidden': isGlobalColumnScrolling
    }"
        x-show="!showFullScreenLoading"
        x-cloak
        x-ref="mainContent"
        id="mainContent"
    >
        <!-- Barra superior -->
        <div class="sticky top-0 z-50 w-full" id="navBarMobile">
            <!-- Localization -->
            <template x-if="business.default_currency_enum !== 1">
    <div
        class="flex flex-row-reverse w-full bg-gray-100 dark:bg-zinc-900"
        x-bind:class="getBackgroundColor()"
    >
        <div class="relative min-w-[8%]  mr-[8vw] bg-gray-100 dark:bg-zinc-900 rounded-t-lg border-b-4 border-gray-100/[0.16] dark:zinc-900/[0.16] hover:border-[var(--theme-color)] dark:hover:border-[var(--theme-color)] transition-colors">
            <button
                type="button"
                class="w-full flex items-center justify-center py-2 cursor-pointer"
                @click="localization.open = !localization.open"
                title="Trocar idioma e moeda"
            >
                <figure>
                    <img
                        x-bind:src="localization.flag"
                        x-bind:alt="localization.locale"
                        class="h-[1rem] object-contain cursor-pointer"
                    >
                </figure>
                <label class="text-lg leading-8 font-medium text-zinc-900 dark:text-neutral-50 px-2 cursor-pointer">|</label>
                <label class="text-lg leading-8 font-medium text-zinc-900 dark:text-neutral-50 cursor-pointer" x-text="localization.currency.toUpperCase()"></label>
            </button>
        </div>
        <!-- Modal -->
        <div
    x-show="localization.open"
    class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50"
    x-cloak
>
    <div class="flex items-center justify-center bg-white dark:bg-neutral-800 p-6 rounded-lg shadow-lg relative min-w-[30%] min-h-[30%]" x-show="localization.loading">
        <svg x-show="localization.loading" class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="fill-[var(--theme-color)]" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>
    </div>
    <div class="bg-white dark:bg-neutral-800 p-6 rounded-lg shadow-lg relative min-w-[30%] min-h-[30%]" @click.away="localization.open = false" x-show="!localization.loading">
        <button
            type="button"
            class="absolute top-2 right-2 text-gray-500 hover:text-gray-700 dark:text-gray-300 dark:hover:text-gray-500"
            @click="localization.open = false"
        >
            &#x2715;
        </button>
        <h2 class="text-xl font-bold mb-4">Trocar Idioma e Moeda</h2>
        <div class="mb-4">
            <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Idioma</p>
            <select x-model="localization.locale" id="language-dropdown" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                <template x-for="language in localization.languages">
                    <option 
                        x-bind:value="language.locale.toLowerCase()" 
                        x-bind:selected="language.locale.toLowerCase() === localization.locale.toLowerCase()"
                        x-text="language.description"
                    ></option>
                </template>
            </select>
        </div>
        <div class="mb-4">
            <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Moeda</p>
            <select x-model="localization.currency" id="currency-dropdown" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md">
                <template x-for="currency in localization.currencies">
                    <option 
                        x-bind:value="currency.value.toLowerCase()" 
                        x-bind:selected="currency.value.toLowerCase() === localization.currency.toLowerCase()"
                        x-text="`${currency.value.toUpperCase()} (${currency.description})`"
                    ></option>
                </template>
            </select>
        </div>
        <button
            type="button"
            class="mt-4 w-full inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
            @click="localizeCheckout()"
        >
            Confirmar
        </button>
    </div>
</div>    </div>
</template>
            <!-- Placard -->
            <template x-if="checkoutConfig.placard_flag">
    <div
        x-ref="placard_container"
        class="relative flex items-center bg-[var(--theme-color)] text-[var(--contrast-color)] z-40 h-12 shadow-[0_4px_16px_rgba(0,0,0,0.16)] overflow-hidden"
        x-bind:class="placard.animateTextFlag ? 'justify-start' : 'justify-center'"
    >
        <p
            x-ref="placard_text"
            class="inline-flex m-0 font-bold text-sm md:text-base w-max uppercase whitespace-nowrap"
            x-bind:class="{ 'animate-[placards_var(--placard-duration)_linear_infinite]': placard.animateTextFlag }"
            x-bind:style="'--placard-duration:' + placard.animateSeconds + 's'"
        >
            <span class="mx-3 leading-[3rem]" x-html="placard.message"></span>
            <span class="mx-3 leading-[3rem]" x-show="placard.animateTextFlag" x-cloak x-html="placard.message"></span>
        </p>
    </div>
</template>
            <!-- Header mobile -->
            <!-- Timer mobile -->
<template x-if="checkoutConfig.timer_flag && checkoutConfig.timer_position_enum === 1">
    <div class="relative w-full z-30 xl:hidden">
        <div
    class="relative flex items-center"
    x-bind:class="{
        '!bg-[var(--background-color)]': checkoutConfig.theme_type_enum === 1,
        'bg-gray-100 dark:bg-zinc-900': checkoutConfig.theme_type_enum === 2,
        'justify-center': timer.show_message
    }"
>
    <div
        class="flex items-center justify-center xl:!justify-between text-[var(--contrast-color)] h-12 md:h-14 relative z-30 w-full"
        x-bind:class="{
            'bg-[var(--background-color)]': checkoutConfig.theme_type_enum === 1,
            'bg-gray-100 dark:bg-zinc-900': checkoutConfig.theme_type_enum === 2
        }"
        x-show="!timer.show_message"
        x-cloak
    >
        <p class="text-[2.8vw] leading-none sm:text-base sm:leading-5 font-bold text-zinc-900 dark:text-neutral-50 uppercase" x-text="checkoutConfig.timer_text"></p>
        <div class="flex items-center justify-center gap-1 ml-3">
            <p class="rounded-[2rem] font-black text-2xl w-12 text-center text-[var(--contrast-color)] bg-[var(--theme-color)] px-1" x-text="timer.hours.toString().padStart(2, '0')"></p>
            <span class="text-4xl leading-10 font-bold text-zinc-900 dark:text-neutral-50 animate-pulse text-center">:</span>
            <p class="rounded-[2rem] font-black text-2xl w-12 text-center text-[var(--contrast-color)] bg-[var(--theme-color)] px-1" x-text="timer.minutes.toString().padStart(2, '0')"></p>
            <span class="text-4xl leading-10 font-bold text-zinc-900 dark:text-neutral-50 animate-pulse">:</span>
            <p class="rounded-[2rem] font-black text-2xl w-12 text-center text-[var(--contrast-color)] bg-[var(--theme-color)] px-1" x-text="timer.seconds.toString().padStart(2, '0')"></p>
        </div>
    </div>
    <div
        class="flex items-center text-[var(--contrast-color)] h-12 md:h-14 relative z-30 w-full"
        x-bind:class="{
            'fixed bottom-0 w-full': checkoutConfig.timer_position_enum === 2 && checkoutConfig.timer_width_enum === 1,
            '!justify-center': checkoutConfig.timer_position_enum === 1 || checkoutConfig.timer_position_enum === 2,
            'justify-between': checkoutConfig.timer_width_enum === 2,
            '!bg-[var(--background-color)]': checkoutConfig.theme_type_enum === 1,
            'bg-gray-100 dark:bg-zinc-900': checkoutConfig.theme_type_enum === 2
        }"
        x-show="timer.show_message"
    >
        <p class="text-base font-bold leading-5 uppercase w-full text-center text-zinc-900 dark:text-neutral-50" x-text="timer.message"></p>
    </div>
</div>
    </div>
</template>
<!-- Header mobile -->
<div
    class="relative pt-2 before:content:[''] before:absolute before:w-screen before:h-14 before:left-0 before:top-0 before:bg-[var(--background-color)] dark:before:bg-zinc-900 before:z-[-1] xl:before:hidden transition-transform duration-500 ease-in-out"
    id="header_mobile"
>
    <!-- Button to expand full desktop banner -->
    <button
        class="absolute flex items-center gap-1 w-auto -bottom-6 right-[15%] pr-1 h-8 bg-gray-100 dark:bg-zinc-900 z-50 overflow-hidden border border-black/[0.16] dark:border-white/[0.16] rounded-b-lg hover:border-zinc-900 hover:dark:border-neutral-50 transition-colors shadow-[0_4px_4px_rgba(0,0,0,0.16)]"
        x-bind:class="getBackgroundColor()"
        @click="showTopBanner = !showTopBanner"
        x-show="!showTopBanner"
        title="Expandir banner"
        x-cloak
    >
        <figure>
            <img
                class="rounded-bl-lg h-8 w-auto"
                x-bind:src="checkoutConfig.banner_top_desktop_imagem_url"
                x-bind:alt="`Banner Loja ${business.name}`"
            />
        </figure>
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M8 17H6V15" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M16 7L18 7L18 9" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.2" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M6.996 4H16.995C20.199 4 21 4.82872 21 8.13418V15.8657C21 19.1712 20.199 19.9999 17.004 19.9999H6.996C3.801 20.0093 3 19.1806 3 15.8752V8.13418C3 4.82872 3.801 4 6.996 4Z" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
    </button>
    <header
        class="bg-white dark:bg-neutral-800 xl:hidden flex items-center px-6 sm:px-10 lg:px-20 h-16 w-[calc(100vw-16px)] mx-auto overflow-hidden rounded-lg shadow-[0px_2px_0px_rgba(0,0,0,0.0)] shadow-[var(--theme-color)]"
    >
        <template x-if="checkoutConfig.display_logo_flag">
            <div class="flex items-center gap-5 flex-[0_0_50%] h-full">
                <figure class="flex items-center h-full w-full">
                    <img
                        x-bind:src="checkoutConfig.logo_url"
                        alt="Banner Loja"
                        class="max-h-[80%] max-w-full object-contain"
                    >
                </figure>
                <template x-if="checkoutConfig.hide_business_name_flag !== 1">
                    <h1 class="font-black text-xl leading-4 text-zinc-900 dark:text-neutral-50 w-[calc(50vw-24px)] sm:!w-[calc(50vw-64px)] truncate" x-text="business.name" x-bind:class="{
                            'hidden xl:flex': checkoutConfig.logo_url
                        }"></h1>
                </template>
            </div>
        </template>
        <template x-if="!checkoutConfig.display_logo_flag">
            <div class="flex items-center flex-[0_0_50%] h-full">
                <h1 class="font-black text-xl leading-4 text-zinc-900 dark:text-neutral-50 w-[calc(50vw-24px)] sm:!w-[calc(50vw-64px)] truncate" x-text="business.name+''"></h1>
            </div>
        </template>
        <div
            class="flex items-center cursor-pointer justify-end flex-[0_0_50%] h-full"
            @click="toggleCartMobile()"
        >
            <div class="relative text-right after:content[''] after:absolute after:top-[50%] after:right-0 after:w-[1px] after:h-5 after:bg-gray-300 dark:after:bg-white/[0.08] after:-translate-y-[50%] pr-2">
                <div class="flex items-center text-base leading-7 font-black">
                    <p class="text-[var(--theme-color)]">R$</p>
                    <p class="text-zinc-900 dark:text-neutral-50" x-text="cart.totals.totalValueFormatted"></p>
                </div>
                <p class="text-xs leading-3 font-black text-zinc-900 dark:text-neutral-50">
                    ver carrinho
                </p>
            </div>
            <div class="pl-2">
                <div class="flex items-center gap-1 h-7">
                    <i class="h-4 w-4 bg-zinc-900 dark:bg-neutral-50 cart-bag-icon"></i>
                    <span class="font-black text-sm leading-4 text-zinc-900 dark:text-neutral-50" x-text="products.length"></span>
                </div>
                <div
                    class="flex justify-center items-center mx-auto px-2.5 bg-[var(--theme-color)] rounded-lg gap-2 xl:hidden w-7"
                >
                    <template x-if="see_bag">
                        <div >
        <svg width="13" height="12" viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6.79147 3.12082L10.8518 7.18061C11.013 7.34175 11.013 7.603 10.8518 7.76414L9.84736 8.76862C9.68626 8.92973 9.42502 8.92975 9.26391 8.76865L6.49972 6.00503L4.87967 7.62508L3.73615 8.7686C3.57502 8.92973 3.31379 8.92973 3.15265 8.7686L2.14819 7.76414C1.98706 7.603 1.98706 7.34177 2.14819 7.18064L4.87967 4.44916L6.20799 3.12084C6.3691 2.95971 6.63033 2.95971 6.79147 3.12082Z" class="fill-[var(--contrast-color)]"/>
        </svg>
    </div>
                    </template>
                    <template x-if="!see_bag">
                        <div >
        <svg width="13" height="12" viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M6.20853 8.87912L2.14817 4.81932C1.98702 4.65819 1.98702 4.39693 2.14815 4.2358L3.15264 3.23132C3.31374 3.07021 3.57498 3.07018 3.73609 3.23129L6.50028 5.9949L8.12033 4.37486L9.26385 3.23134C9.42498 3.07021 9.68621 3.07021 9.84735 3.23134L10.8518 4.2358C11.0129 4.39693 11.0129 4.65817 10.8518 4.8193L8.12033 7.55078L6.79201 8.8791C6.6309 9.04023 6.36967 9.04023 6.20853 8.87912Z"
                class="fill-[var(--contrast-color)]"/>
        </svg>
    </div>
                    </template>
                </div>
            </div>
        </div>
    </header>
</div>
        </div>
        <!-- Banner top -->
        <template x-if="checkoutConfig.banner_type_enum === 1 && checkoutConfig.banner_flag">
    <div class="relative max-w-screen-2xl w-full 2xl:!w-[96rem] h-auto px-2 sm:!px-12 lg:!px-[12vw] xl:!px-[4vw] 2xl:!px-20 mx-auto">
        <figure
            class="flex items-center justify-center w-full bg-slate-500 bg-opacity-20 transition-[max-height] ease-in-out duration-500 overflow-hidden xl:!rounded-[var(--border-radius)]"
            x-bind:class="showTopBanner ? 'max-h-[18.75rem] ' : 'max-h-0'"
        >
            <template x-if="checkoutConfig.banner_top_desktop_imagem_url !== '0'">
                <img
                    class="xl:!rounded-[var(--border-radius)] hidden xl:block mx-auto xl:max-h-[18.75rem] object-contain"
                    x-bind:src="checkoutConfig.banner_top_desktop_imagem_url"
                    x-bind:alt="`Banner Loja ${business.name}`"
                />
            </template>
        </figure>
        <button
            class="absolute items-center justify-center -bottom-8 right-[10%] h-8 w-8 z-50 bg-[var(--background-color)]  dark:bg-zinc-900 border border-black/[0.16] dark:border-white/[0.16] rounded-b-lg hover:border-zinc-900 hover:dark:border-neutral-50 transition-colors"
            x-bind:class="{
                'hidden xl:!flex': showTopBanner,
                'hidden': !showTopBanner,
            }"
            @click="showTopBanner = !showTopBanner"
            title="Encolher banner"
            x-show="showTopBanner"
        >
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M2.5 6.5H13.5C13.8978 6.5 14.2794 6.65804 14.5607 6.93934C14.842 7.22064 15 7.60218 15 8C15 8.39782 14.842 8.77936 14.5607 9.06066C14.2794 9.34196 13.8978 9.5 13.5 9.5H2.5C2.10218 9.5 1.72064 9.34196 1.43934 9.06066C1.15804 8.77936 1 8.39782 1 8C1 7.60218 1.15804 7.22064 1.43934 6.93934C1.72064 6.65804 2.10218 6.5 2.5 6.5Z" class="fill-zinc-900 dark:fill-neutral-50"/>
</svg>
        </button>
    </div>
</template>
        <div
            x-cloak
            class="w-full 2xl:!w-[96rem] flex flex-col xl:!flex-row relative xl:after:content-[''] xl:after:min-w-[0.0625rem] xl:after:h-[calc(100%-8rem)] xl:after:bg-black/10 xl:after:dark:bg-white/10 xl:after:absolute xl:after:top-[4rem]"
            x-bind:class="{
                'xl:overflow-y-auto': !isGlobalColumnScrolling,
                'xl:overflow-hidden': !isGlobalColumnScrolling,
                'xl:!flex-row-reverse xl:after:right-[61.5%]': isInvertColumns,
                'xl:flex-row xl:after:left-[61.5%]': !isInvertColumns
            }"
        >
            <!-- Cart -->
            <section class="xl:!w-[61.5%] w-full px-2 sm:!px-12 lg:!px-[12vw] xl:!px-[4vw] 2xl:!px-20 xl:overflow-y-auto custom-scroll-section">
    <div class="relative flex flex-col bg-white dark:bg-neutral-800 rounded-b-[var(--border-radius)] mt-0 xl:rounded-t-[var(--border-radius)] xl:!rounded-b-none xl:!mt-16 shadow-[0_12px_32px_rgba(0,0,0,0.04)]">
        <div class="mx-6 sm:mx-10 lg:mx-20 xl:mx-14 2xl:mx-20">
            <header class="hidden xl:!flex py-7 items-center justify-between">
                <template x-if="checkoutConfig.display_logo_flag">
                    <div class="flex items-center gap-5 flex-[0_0_70%]">
                        <figure class="flex items-center w-full">
                            <img
                                x-bind:src="checkoutConfig.logo_url"
                                alt="Banner Loja demo"
                                class="max-h-[4.875rem] max-w-full object-contain"
                            >
                        </figure>
                        <template x-if="checkoutConfig.hide_business_name_flag !== 1">
                            <h1 class="font-black text-xl leading-4 text-zinc-900 dark:text-neutral-50" x-text="business.name"></h1>
                        </template>
                    </div>
                </template>
                <template x-if="!checkoutConfig.display_logo_flag">
                    <div class="flex items-center flex-[0_0_70%]">
                        <h1 class="font-black text-xl leading-4 text-zinc-900 dark:text-neutral-50" x-text="business.name"></h1>
                    </div>
                </template>
                <div class="flex flex-col items-center">
                    <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g clip-path="url(#clip0_1710_29655)">
        <path d="M33.75 7.5H6.25C5.55964 7.5 5 8.05964 5 8.75V31.25C5 31.9404 5.55964 32.5 6.25 32.5H33.75C34.4404 32.5 35 31.9404 35 31.25V8.75C35 8.05964 34.4404 7.5 33.75 7.5Z" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
        <path d="M26.25 13.75C26.25 15.4076 25.5915 16.9973 24.4194 18.1694C23.2473 19.3415 21.6576 20 20 20C18.3424 20 16.7527 19.3415 15.5806 18.1694C14.4085 16.9973 13.75 15.4076 13.75 13.75" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
    </g>
    <defs>
        <clipPath id="clip0_1710_29655">
            <rect width="40" height="40" fill="white" />
        </clipPath>
    </defs>
</svg>
                    <p class="font-black text-sm leading-4 text-zinc-900 dark:text-neutral-50 mt-2"><span x-text="products.length"></span>
                        <span x-text="products.length === 1 ? 'item' : 'items'"></span></p>
                    <button
                        @click="see_bag = ! see_bag"
                        class="flex justify-center items-center mx-auto px-2.5 bg-[var(--theme-color)] rounded-lg gap-2 xl:hidden"
                    >
                        <template x-if="see_bag">
                            <div >
        <svg width="13" height="12" viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6.79147 3.12082L10.8518 7.18061C11.013 7.34175 11.013 7.603 10.8518 7.76414L9.84736 8.76862C9.68626 8.92973 9.42502 8.92975 9.26391 8.76865L6.49972 6.00503L4.87967 7.62508L3.73615 8.7686C3.57502 8.92973 3.31379 8.92973 3.15265 8.7686L2.14819 7.76414C1.98706 7.603 1.98706 7.34177 2.14819 7.18064L4.87967 4.44916L6.20799 3.12084C6.3691 2.95971 6.63033 2.95971 6.79147 3.12082Z" class="fill-[var(--contrast-color)]"/>
        </svg>
    </div>
                        </template>
                        <template x-if="!see_bag">
                            <div >
        <svg width="13" height="12" viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M6.20853 8.87912L2.14817 4.81932C1.98702 4.65819 1.98702 4.39693 2.14815 4.2358L3.15264 3.23132C3.31374 3.07021 3.57498 3.07018 3.73609 3.23129L6.50028 5.9949L8.12033 4.37486L9.26385 3.23134C9.42498 3.07021 9.68621 3.07021 9.84735 3.23134L10.8518 4.2358C11.0129 4.39693 11.0129 4.65817 10.8518 4.8193L8.12033 7.55078L6.79201 8.8791C6.6309 9.04023 6.36967 9.04023 6.20853 8.87912Z"
                class="fill-[var(--contrast-color)]"/>
        </svg>
    </div>
                        </template>
                    </button>
                </div>
            </header>
        </div>
        <template x-if="checkoutConfig.banner_type_enum === 2 && checkoutConfig.banner_cart_type_enum === 1">
    <figure
        class="hidden xl:block h-auto xl:pb-6 data-[adjusted=true]:mx-6 sm:data-[adjusted=true]:mx-10 lg:data-[adjusted=true]:mx-20 xl:data-[adjusted=true]:mx-14 2xl:data-[adjusted=true]:mx-20"
        x-bind:data-adjusted="checkoutConfig.banner_cart_width === 2 ? 'true' : 'false'"
    >
        <img
            x-bind:src="checkoutConfig.banner_cart_desktop_imagem_url"
            x-bind:alt="`Banner Cart ${business.name}`"
            class="h-full object-cover w-full aspect-auto data-[adjusted=true]:rounded-[var(--border-radius)]"
            x-bind:data-adjusted="checkoutConfig.banner_cart_width === 2 ? 'true' : 'false'"
            x-bind:class="checkoutConfig.banner_cart_mobile_imagem_url !== '0'  ? 'hidden xl:block' : 'block'"
        >
        <template x-if="checkoutConfig.banner_cart_mobile_imagem_url">
            <img
                x-bind:src="checkoutConfig.banner_cart_mobile_imagem_url"
                x-bind:alt="`Banner Cart ${business.name}`"
                class="w-full block xl:hidden"
            />
        </template>
    </figure>
</template>
<div x-show="checkoutConfig.banner_type_enum == 2 && checkoutConfig.banner_cart_type_enum == 2" x-cloak>
    <div id="player" data-plyr-provider="youtube" x-bind:data-plyr-embed-id="checkoutConfig.banner_video_youtube_id"></div>
</div>
        <div class="mx-6 sm:mx-10 lg:mx-20 xl:mx-14 2xl:mx-20" x-ref="bagContent">
            <template x-if="!checkoutConfig.credit_card_flag || getInstallments(0)?.length === 1">
    <div class="pb-6 pt-6 hidden xl:block">
        <p class="text-base leading-4 font-black text-zinc-900 dark:text-neutral-50">Total</p>
        <div class="flex items-center">
            <p class="text-[2rem] leading-10 font-black text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
            <p class="text-[2rem] leading-10 font-black text-zinc-900 dark:text-neutral-50" x-text="cart.totals.totalValueFormatted"></p>
        </div>
    </div>
</template>
<template x-if="checkoutConfig.credit_card_flag && getInstallments(0)?.length > 1">
    <div class="hidden xl:flex xl:flex-row xl:items-end xl:justify-between pb-6 pt-6">
        <div>
            <p class="text-base leading-4 font-black text-zinc-900 dark:text-neutral-50" x-text="formPayment.payment_method == 2 ? 'Em até' : 'Subtotal'"></p>
            <div class="flex items-center">
                <p x-show="formPayment.payment_method == 2" class="text-base leading-4 font-black text-zinc-900 dark:text-neutral-50 mr-2" x-text="`${getInstallmentLabelMaxValue()?.amount || 1} x`"></p>
                <p class="text-[2rem] leading-10 font-black text-[var(--theme-color)]">R$</p>
                <p class="text-[2rem] leading-10 font-black text-zinc-900 dark:text-neutral-50" x-text="formPayment.payment_method == 2 ? `${getInstallmentLabelMaxValue().value}` : cart.totals.subTotalValueFormatted"></p>
            </div>
        </div>
        <div class="flex items-center gap-2">
            <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50" x-text="formPayment.payment_method == 2 ? 'À vista' : 'Total'"></p>
            <div class="flex items-center">
                <p class="text-xl font-black text-[var(--theme-color)]">R$</p>
                <p class="text-xl font-black text-zinc-900 dark:text-neutral-50" x-text="cart.totals.totalValueFormatted"></p>
            </div>
        </div>
    </div>
</template>
            <div x-show="see_bag" x-collapse>
                <div class="space-y-10">
    <template x-for="(item, index) in products" :key="item.unique_key">
        <div x-data="{ cartItemVariants: cart.items.find((ci) => ci.code === item.code)?.variants || [] }">
            <!-- Se o produto não tiver variantes -->
            <div x-show="!cartItemVariants.length && !item.order_bump_code" x-data="{ cartItem: cart.items.find((ci) => ci.code === item.code) }">
                <div class="flex flex-col gap-4">
                    <template x-if="item.image_url">
                        <div class="grid-flow-col">
                            <figure class="w-18 h-18 rounded-lg overflow-hidden border-2 border-gray-200 dark:border-zinc-700">
                                <img
                                    x-bind:src="item.image_url"
                                    x-bind:alt="item.title"
                                    class="w-full h-full object-cover"
                                />
                            </figure>
                        </div>
                    </template>
                    <div class="space-y-4 w-full">
                        <div class="flex items-center gap-4">
                            <div>
                                <p x-text="item.title" class="text-xl leading-6 font-black text-zinc-900 dark:text-neutral-50"></p>
                                <div class="flex items-center text-sm leading-5 mt-0.5" x-show="item.brand || item.model || item.version_or_author">
                                    <p x-text="item.brand" class="font-black text-zinc-900 dark:text-neutral-50"></p>
                                    <span class="w-2.5 h-[3px] rounded bg-gray-300 dark:bg-zinc-600 mx-2" x-show="item.model || item.version_or_author"></span>
                                    <p x-show="item.model" x-text="item.model" class="font-medium text-neutral-600 dark:text-neutral-300"></p>
                                    <p x-show="item.version_or_author" x-text="item.version_or_author" class="font-medium text-neutral-600 dark:text-neutral-300"></p>
                                </div>
                            </div>
                        </div>
                        <div x-data="{ descriptionExpanded: false }">
                            <p x-bind:id="`element-description-${index}`" x-html="item.description" x-ref="description" class="text-lg leading-7 font-normal text-neutral-600 dark:text-neutral-300" x-bind:class="{ 'line-clamp-3': item?.description && !descriptionExpanded }"></p>
                            <p x-show="showViewMore(document.getElementById(`element-description-${index}`), 'line-clamp-3')" @click="descriptionExpanded = !descriptionExpanded" x-text="descriptionExpanded ? 'Ver menos' : 'Ver mais'" class="text-sky-600 dark:text-sky-400 hover:text-sky-700 hover:dark:text-sky-500 transition-colors cursor-pointer text-sm font-bold !mt-3 !mb-7"></p>
                        </div>
                        <div>
                            <div class="flex items-center justify-between">
                                <div x-data="{
        opened: false,
        counter: item.buyer_adjusts_quantity_flag ? item.buyer_adjusts_quantity_init : item.quantity,
        countSelected: item.quantity
    }"
     class="relative flex flex-col items-center">
    <input type="text" class="hidden" x-ref="selectedQts">
    <div class="flex items-center">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M7.33301 9.07575C7.33301 8.85047 7.14864 8.66666 6.92392 8.66666H4.87846V10.303C4.87846 10.6041 4.6341 10.8485 4.33301 10.8485C4.03192 10.8485 3.78755 10.6041 3.78755 10.303V8.66666H1.7421C1.51683 8.66666 1.33301 8.85047 1.33301 9.07575V14.2576C1.33301 14.4828 1.51683 14.6667 1.7421 14.6667H6.92392C7.14864 14.6667 7.33301 14.4828 7.33301 14.2576V9.07575Z" class="fill-[var(--theme-color)]" />
    <path d="M14.667 9.07575C14.667 8.85047 14.4826 8.66666 14.2579 8.66666H12.2124V10.303C12.2124 10.6041 11.9681 10.8485 11.667 10.8485C11.3659 10.8485 11.1215 10.6041 11.1215 10.303V8.66666H9.07608C8.85081 8.66666 8.66699 8.85047 8.66699 9.07575V14.2576C8.66699 14.4828 8.85081 14.6667 9.07608 14.6667H14.2579C14.4826 14.6667 14.667 14.4828 14.667 14.2576V9.07575Z" class="fill-[var(--theme-color)]" />
    <path d="M10.6663 1.74243C10.6663 1.51771 10.5025 1.33334 10.3027 1.33334H8.48452V2.96971C8.48452 3.2708 8.26731 3.51516 7.99967 3.51516C7.73204 3.51516 7.51483 3.2708 7.51483 2.96971V1.33334H5.69664C5.4964 1.33334 5.33301 1.51771 5.33301 1.74243V6.92425C5.33301 7.14953 5.4964 7.33334 5.69664 7.33334H10.3027C10.5025 7.33334 10.6663 7.14953 10.6663 6.92425V1.74243Z" class="fill-[var(--theme-color)]" />
</svg>
        <button
            class="flex items-center pl-3 py-[6px] text-zinc-900 dark:text-neutral-50"
            x-bind:class="{ 'cursor-default': !item.buyer_adjusts_quantity_flag }"
            @click="item.buyer_adjusts_quantity_flag ? opened = !opened : null"
        >
            <span class="flex items-center gap-2">
                <p class="font-medium">Qtd.</p>
                <p class="font-black" x-text="counter"></p>
            </span>
            <div x-show="item.buyer_adjusts_quantity_flag">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14.5 11L12 13.5L9.5 11" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5"
                  stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </div>

        </button>
    </div>
    <div
        x-data
        class="absolute z-10 bg-white dark:bg-zinc-900 flex flex-col items-center space-y-[10px] rounded-lg pb-3 mt-1 ml-8 shadow-lg border border-gray-100 dark:border-neutral-800 top-8"
        x-show="opened"
        x-cloak
        @click.outside="opened = false"
        x-on:keydown.escape.window="opened = false"
    >
        <p class="text-secondary dark:text-orange-50 font-medium text-sm py-1.5">Quantidade</p>
        <div class="flex items-center justify-center px-3 gap-2.5">
            <button
                class="p-2 text-secondary dark:text-orange-50 disabled:cursor-not-allowed"
                :disabled="counter === item.buyer_adjusts_quantity_init"
                @click="counter >= 2 && counter--"
            >-
            </button>
            <p class="text-sm font-medium text-secondary dark:text-orange-50 py-2 px-[27px] bg-white dark:bg-zinc-900 border border-gray-300 dark:border-zinc-900 rounded-lg" x-text="counter"></p>
            <button
                class="p-2 text-secondary dark:text-orange-50 disabled:cursor-not-allowed"
                :disabled="counter === item.buyer_adjusts_quantity_end"
                @click="counter++"
            >+
            </button>
        </div>
        <p class="text-gray-600 dark:text-zinc-400 font-medium text-xs" x-text="item.stock_control_quantity === 1 ? '1 disponível' : item.buyer_adjusts_quantity_end + ' disponíveis'"></p>
        <button
            class="py-3 h-10 pl-4 pr-3 flex items-center gap-2 border border-secondary dark:border-orange-50 rounded-full text-secondary dark:text-orange-50 text-sm leading-4 font-bold"
            @click="countSelected = counter; opened = false; selectedCount = counter; setQuantityProduct(item.code, selectedCount); cart.totals.discounts.coupon.code ? validateCouponDiscount() : null;"
        >
            Confirmar
        </button>
        <button
                x-show="shouldShowRemoveItem"
                class="py-3 h-10 pl-4 pr-3 flex items-center gap-2 border border-secondary dark:border-orange-50 rounded-full text-secondary dark:text-orange-50 text-sm leading-4 font-bold"
                @click="countSelected = counter; opened = false; selectedCount = counter; removeItem(item.code);"
        >
            Remover
        </button>
    </div>
</div>
                                <template x-if="!cartItem.amount_with_discount">
                                    <div class="flex items-center text-xl leading-6 font-black">
                                        <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                                        <p x-ref="formatCurrencyPrice(totalItemPrice / 100)" x-text="formatCurrencyPrice((cartItem.amount * (cartItem.quantity || 1)) / 100)" class="text-zinc-900 dark:text-neutral-50"></p>
                                    </div>
                                </template>
                                <template x-if="cartItem.amount_with_discount">
                                    <div class="flex flex-col gap-2 md:flex-row md:items-center justify-between">
                                    <span class="flex items-center gap-2">
                                        <p class="text-[var(--contrast-color)] text-xs leading-5 px-1.5 py-0.5  m-0 font-black bg-[var(--theme-color)] uppercase rounded">De</p>
                                        <div class="flex items-center text-base font-bold">
                                            <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                                            <p class="line-through text-zinc-900 dark:text-neutral-50" x-text="formatCurrencyPrice((cartItem.amount * (cartItem.quantity || 1)) / 100)"></p>
                                        </div>
                                    </span>
                                        <span class="flex items-center gap-2">
                                        <p class="text-[var(--contrast-color)] text-xs leading-5 px-1.5 py-0.5  m-0 font-black bg-[var(--theme-color)] uppercase rounded">Por</p>
                                        <div class="flex items-center text-xl font-black">
                                            <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                                            <p class="text-zinc-900 dark:text-neutral-50" x-text="formatCurrencyPrice((cartItem.amount_with_discount * ((cart.totals.discounts.progressive.totalValue > 0 ? '' : cartItem.quantity) || 1)) / 100)"></p>
                                        </div>
                                    </span>
                                    </div>
                                </template>
                            </div>
                            <div class="flex justify-end">
                                <p class="text-neutral-600 dark:text-neutral-300 text-sm" x-show="cartItem.quantity > 1" x-html="getCurrencySymbol()+formatCurrencyPrice(((cartItem.amount * (cartItem.quantity || 1)) / cartItem.quantity) / 100)+' cada'"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Se o produto tiver variantes -->
            <div class="flex flex-col gap-4" x-show="cartItemVariants.length && !item.order_bump_code">
                <div class="flex flex-col gap-4">
                    <!-- Se for a mesma imagem para todos os produtos e a imagem estiver disponível -->
                    <template x-if="item.same_image_for_all_flag">
                        <div class="grid-flow-col md:block">
                            <figure class="w-18 h-18 rounded-lg overflow-hidden border-2 border-gray-200 dark:border-zinc-700">
                                <img
                                    x-bind:src="item.image_url ?? item.primaryVariants[0].image_url"
                                    x-bind:alt="item.title"
                                    class="w-full h-full object-cover"
                                />
                            </figure>
                        </div>
                    </template>
                    <!--  Título, marca, modelo e versão ou autor  -->
                    <div class="space-y-4 w-full">
                        <div>
                            <p x-text="item.title" class="text-xl leading-6 font-black text-zinc-900 dark:text-neutral-50"></p>
                            <div class="flex items-center text-sm leading-5 mt-0.5" x-show="item.brand || item.model || item.version_or_author">
                                <p x-text="item.brand" class="font-black text-zinc-900 dark:text-neutral-50"></p>
                                <span class="w-2.5 h-[3px] rounded bg-gray-300 dark:bg-zinc-600 mx-2" x-show="item.model || item.version_or_author"></span>
                                <p x-show="item.model" x-text="item.model" class="font-medium text-neutral-600 dark:text-neutral-300"></p>
                                <p x-show="item.version_or_author" x-text="item.version_or_author" class="font-medium text-neutral-600 dark:text-neutral-300"></p>
                            </div>
                        </div>
                        <div x-data="{ descriptionExpanded: false }">
                            <p x-bind:id="`element-description-${index}`" x-html="item.description" x-ref="description" class="text-base font-normal text-neutral-600 dark:text-neutral-300" x-bind:class="{ 'line-clamp-3': item?.description && !descriptionExpanded }"></p>
                            <p x-show="showViewMore(document.getElementById(`element-description-${index}`), 'line-clamp-3')" @click="descriptionExpanded = !descriptionExpanded" x-text="descriptionExpanded ? `Ver menos` : `Ver mais`" class="text-sky-600 dark:text-sky-400 hover:text-sky-700 hover:dark:text-sky-500 transition-colors cursor-pointer text-sm font-bold !mt-3 !mb-7"></p>
                        </div>
                    </div>
                </div>
                <!-- Seleção Variants -->
                <template x-for="(selectedVariant, indexSelectedVariant) in cartItemVariants" :key="selectedVariant?.secondary_code || selectedVariant.primary_code">
                    <div class="flex flex-col rounded-2xl w-full border-4 border-gray-100 dark:border-white/[0.08]">
                        <header class="flex items-center justify-between h-12 pl-3">
                            <ul class="flex items-center gap-0.5">
                                <li
                                    class="text-[var(--contrast-color)] rounded text-xs leading-6 px-2 font-bold bg-[var(--theme-color)] line-clamp-1"
                                    x-text="selectedVariant?.primary_tag || ''"
                                    x-bind:title="selectedVariant?.primary_tag || ''"
                                ></li>
                                <template x-if="selectedVariant?.secondary_code">
                                    <li
                                        class="text-[var(--contrast-color)] rounded text-xs leading-6 px-2 font-bold bg-[var(--theme-color)] line-clamp-1"
                                        x-text="selectedVariant.secondary_tag"
                                        x-bind:title="selectedVariant.secondary_tag"
                                    ></li>
                                </template>
                            </ul>
                            <div class="flex items-center">
                                <button
                                    type="button"
                                    @click="selectedVariant.expanded = !selectedVariant.expanded"
                                    x-bind:title="selectedVariant.expanded ? 'Encolher' : 'Expandir'"
                                    class="flex items-center justify-center h-12 w-12 hover:bg-black/[0.04] hover:dark:bg-white[0.16] transition-colors"
                                >
                                    <div class="transition-transform duration-700" x-bind:class="selectedVariant.expanded && 'rotate-180'">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14.5 11L12 13.5L9.5 11" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5"
                  stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </div>

                                </button>
                                <button
                                    type="button"
                                    title="Remover modelo"
                                    class="relative flex items-center justify-center h-12 w-12 hover:bg-black/[0.04] hover:dark:bg-white[0.16] transition-colors before:content-[''] before:w-[1px] before:h-8 before:bg-gray-200 before:dark:bg-zinc-700 before:absolute before:top-1/2 before:-translate-y-1/2 before:left-0"
                                    x-show="cartItemVariants.length > 1"
                                    @click="removeSelectedVariant(item, indexSelectedVariant); cart.totals.discounts.coupon.code ? validateCouponDiscount() : null;"
                                >
                                    <svg width="16" height="16" class="fill-black dark:fill-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path id="Vector" d="M19 6H5C4.73478 6 4.48043 6.10536 4.29289 6.29289C4.10536 6.48043 4 6.73478 4 7C4 7.26522 4.10536 7.51957 4.29289 7.70711C4.48043 7.89464 4.73478 8 5 8V17.591C5.00106 18.4948 5.36056 19.3613 5.99964 20.0004C6.63872 20.6394 7.5052 20.9989 8.409 21H15.591C16.4948 20.9989 17.3613 20.6394 18.0004 20.0004C18.6394 19.3613 18.9989 18.4948 19 17.591V8C19.2652 8 19.5196 7.89464 19.7071 7.70711C19.8946 7.51957 20 7.26522 20 7C20 6.73478 19.8946 6.48043 19.7071 6.29289C19.5196 6.10536 19.2652 6 19 6ZM17 17.591C16.9997 17.9646 16.8512 18.3228 16.587 18.587C16.3228 18.8512 15.9646 18.9997 15.591 19H8.409C8.03539 18.9997 7.67716 18.8512 7.41298 18.587C7.1488 18.3228 7.00026 17.9646 7 17.591V8H17V17.591Z" class="fill-black dark:fill-white" width="16" height="16" />
    <path id="Vector_2" d="M10 5H14C14.2652 5 14.5196 4.89464 14.7071 4.70711C14.8946 4.51957 15 4.26522 15 4C15 3.73478 14.8946 3.48043 14.7071 3.29289C14.5196 3.10536 14.2652 3 14 3H10C9.73478 3 9.48043 3.10536 9.29289 3.29289C9.10536 3.48043 9 3.73478 9 4C9 4.26522 9.10536 4.51957 9.29289 4.70711C9.48043 4.89464 9.73478 5 10 5Z" class="fill-black dark:fill-white" width="16" height="16" fill-opacity="0.64" />
    <path id="Vector_3" d="M10 16C10.2652 16 10.5196 15.8946 10.7071 15.7071C10.8946 15.5196 11 15.2652 11 15V12C11 11.7348 10.8946 11.4804 10.7071 11.2929C10.5196 11.1054 10.2652 11 10 11C9.73478 11 9.48043 11.1054 9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12V15C9 15.2652 9.10536 15.5196 9.29289 15.7071C9.48043 15.8946 9.73478 16 10 16Z" class="fill-black dark:fill-white" width="16" height="16" fill-opacity="0.64" />
    <path id="Vector_4" d="M14 16C14.2652 16 14.5196 15.8946 14.7071 15.7071C14.8946 15.5196 15 15.2652 15 15V12C15 11.7348 14.8946 11.4804 14.7071 11.2929C14.5196 11.1054 14.2652 11 14 11C13.7348 11 13.4804 11.1054 13.2929 11.2929C13.1054 11.4804 13 11.7348 13 12V15C13 15.2652 13.1054 15.5196 13.2929 15.7071C13.4804 15.8946 13.7348 16 14 16Z" class="fill-black dark:fill-white" width="16" height="16" fill-opacity="0.64" />
</svg>
                                </button>
                            </div>
                        </header>
                        <div x-show="selectedVariant.expanded" x-collapse>
                            <dl class="flex flex-wrap justify-start gap-2 px-6 pb-4">
                                <dt class="basis-full text-neutral-600 dark:text-neutral-300 text-sm leading-4 uppercase font-bold mb-2 mt-4" x-text="item.primaryVariants[0].title"></dt>
                                <template x-for="(itemPrimary, indexPrimaryVariant) in item.primaryVariants">
                                    <dd>
                                        <template x-if="!item.same_image_for_all_flag">
                                            <figrue
                                                class="relative h-18 w-18 mr-1 block rounded-lg overflow-hidden transition-all"
                                                x-bind:class="{
                                                    'border-4 border-[var(--theme-color)] scale-[1.15]': itemPrimary.code === selectedVariant.primary_code,
                                                    'border cursor-pointer border-gray-200 dark:border-zinc-700 hover:scale-[1.15]': itemPrimary.code !== selectedVariant.primary_code,
                                                    'selected-variant !cursor-auto hover:!scale-100': getSelectedVariantByProduct(item, indexSelectedVariant, indexPrimaryVariant).includes(itemPrimary.code)
                                                }"
                                                @click="!getSelectedVariantByProduct(item, indexSelectedVariant, indexPrimaryVariant).includes(itemPrimary.code) ? setSingleSelectionPrimaryVariant(item, itemPrimary, indexSelectedVariant) : null"
                                            >
                                                <img
                                                    x-cloak
                                                    x-show="!item.same_image_for_all_flag"
                                                    x-bind:src="itemPrimary.image_url ? itemPrimary.image_url : 'https://checkout.ligafacil.online/images/product-image-empty.png'"
                                                    x-bind:alt="itemPrimary.tag"
                                                    x-bind:title="itemPrimary.tag"
                                                    class="w-full h-full object-cover"
                                                >
                                            </figrue>
                                        </template>
                                        <template x-if="item.same_image_for_all_flag">
                                            <button
                                                type="button"
                                                class="h-8 max-w-[11.25rem] px-3 rounded-lg overflow-hidden truncate leading-8 font-bold text-[0.875rem] box-border"
                                                x-bind:class="itemPrimary.selected_flag ? 'border-2 border-[var(--theme-color)] text-zinc-900 dark:text-neutral-50' : 'border cursor-pointer border-gray-200 dark:border-zinc-700 text-neutral-600 dark:text-neutral-300'"
                                                x-bind:title="itemPrimary.tag"
                                                @click="!getSelectedVariantByProduct(item, indexSelectedVariant, indexPrimaryVariant).includes(itemPrimary.code) ? setSingleSelectionPrimaryVariant(item, itemPrimary, indexSelectedVariant) : null"
                                                x-text="itemPrimary.tag"
                                            >
                                            </button>
                                        </template>
                                    </dd>
                                </template>
                            </dl>
                            <template x-if="item.primaryVariants.find(() => true)?.secondaryVariants?.length">
                                <dl class="flex flex-wrap justify-start gap-2 px-6 pb-4">
                                    <dt class="basis-full text-neutral-600 dark:text-neutral-300 text-sm leading-4 uppercase font-bold mb-2 mt-4" x-text="item.primaryVariants[0]?.secondaryVariants[0].title"></dt>
                                    <template
                                        x-if="item.primaryVariants && item.primaryVariants.length > 0
                                               && cartItemVariants[indexSelectedVariant]
                                               && item.primaryVariants.find(p => p.code === cartItemVariants[indexSelectedVariant]?.primary_code)?.secondaryVariants?.length > 0">
                                        <template
                                            x-for="(itemSecondary, indexSecondaryVariant) in item.primaryVariants.find(p => p.code === cartItemVariants[indexSelectedVariant]?.primary_code)?.secondaryVariants">
                                            <dd>
                                                <button
                                                    type="button"
                                                    class="px-3 py-2 rounded-lg text-center text-sm leading-4 font-bold transition-all"
                                                    x-bind:class="{
                                                                        'border-2 border-[var(--theme-color)] text-zinc-900 dark:text-neutral-50': itemSecondary.code === selectedVariant.secondary_code,
                                                                        'border cursor-pointer border-gray-200 dark:border-zinc-700 text-neutral-600 dark:text-neutral-300 hover:scale-[1.15]': itemSecondary.code !== selectedVariant.secondary_code,
                                                                        '!cursor-auto hover:!scale-100': getSelectedSecondaryVariantByProduct(item).includes(itemSecondary.code)
                                                                    }"
                                                    x-bind:title="itemSecondary.tag"
                                                    x-text="itemSecondary.tag"
                                                    @click="!getSelectedSecondaryVariantByProduct(item).includes(itemSecondary.code)
                                                            ? setSingleSelectionSecondaryVariant(item, itemSecondary, indexSelectedVariant)
                                                            : null"
                                                >
                                                </button>
                                            </dd>
                                        </template>
                                    </template>

                                </dl>
                            </template>
                        </div>
                        <footer class="px-3 h-12">
                            <div class="flex items-center gap-1 justify-between">
                                <div
    x-data="{
        opened: false,
        counter: item.buyer_adjusts_quantity_flag ? item.buyer_adjusts_quantity_init : item.quantity,
        countSelected: item.quantity,
        init() {
            this.counter = (selectedVariant && selectedVariant?.quantity) ?? (item && item.quantity) ?? 1;
        }
    }"
    class="relative flex flex-col"
>
    <input type="text" class="hidden" x-ref="selectedQts">
    <div class="flex items-center">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M7.33301 9.07575C7.33301 8.85047 7.14864 8.66666 6.92392 8.66666H4.87846V10.303C4.87846 10.6041 4.6341 10.8485 4.33301 10.8485C4.03192 10.8485 3.78755 10.6041 3.78755 10.303V8.66666H1.7421C1.51683 8.66666 1.33301 8.85047 1.33301 9.07575V14.2576C1.33301 14.4828 1.51683 14.6667 1.7421 14.6667H6.92392C7.14864 14.6667 7.33301 14.4828 7.33301 14.2576V9.07575Z" class="fill-[var(--theme-color)]" />
    <path d="M14.667 9.07575C14.667 8.85047 14.4826 8.66666 14.2579 8.66666H12.2124V10.303C12.2124 10.6041 11.9681 10.8485 11.667 10.8485C11.3659 10.8485 11.1215 10.6041 11.1215 10.303V8.66666H9.07608C8.85081 8.66666 8.66699 8.85047 8.66699 9.07575V14.2576C8.66699 14.4828 8.85081 14.6667 9.07608 14.6667H14.2579C14.4826 14.6667 14.667 14.4828 14.667 14.2576V9.07575Z" class="fill-[var(--theme-color)]" />
    <path d="M10.6663 1.74243C10.6663 1.51771 10.5025 1.33334 10.3027 1.33334H8.48452V2.96971C8.48452 3.2708 8.26731 3.51516 7.99967 3.51516C7.73204 3.51516 7.51483 3.2708 7.51483 2.96971V1.33334H5.69664C5.4964 1.33334 5.33301 1.51771 5.33301 1.74243V6.92425C5.33301 7.14953 5.4964 7.33334 5.69664 7.33334H10.3027C10.5025 7.33334 10.6663 7.14953 10.6663 6.92425V1.74243Z" class="fill-[var(--theme-color)]" />
</svg>
        <button
            class="flex items-center pl-3 py-[6px] text-zinc-900 dark:text-neutral-50"
            x-bind:class="{ 'cursor-default': !item.buyer_adjusts_quantity_flag }"
            @click="item.buyer_adjusts_quantity_flag ? opened = !opened : null"
        >
            <span class="text-sm flex items-center gap-2">
                <p class="font-medium">Qtd.</p>
                <p class="font-black" x-text="counter"></p>
            </span>
            <div x-show="item.buyer_adjusts_quantity_flag">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14.5 11L12 13.5L9.5 11" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5"
                  stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </div>

        </button>
    </div>
    <div
        class="absolute z-10 bg-white dark:bg-zinc-900 flex flex-col items-center space-y-[10px] rounded-lg pb-3 mt-1 ml-8 shadow-lg border border-gray-100 dark:border-neutral-800 top-8"
        x-show="opened"
        x-cloak
        @click.outside="opened = false"
        x-on:keydown.escape.window="opened = false"
    >
        <p class="text-secondary dark:text-orange-50 font-medium text-sm py-1.5">Quantidade</p>
        <div class="flex items-center justify-center px-3 gap-2.5">
            <button
                class="p-2 text-secondary dark:text-orange-50 disabled:cursor-not-allowed"
                :disabled="counter === item.buyer_adjusts_quantity_init"
                @click="counter >= 2 && counter--"
            >-
            </button>
            <p class="text-sm font-medium text-secondary dark:text-orange-50 py-2 px-[27px] bg-white dark:bg-zinc-900 border border-gray-300 dark:border-zinc-900 rounded-lg" x-text="counter"></p>
            <button
                class="p-2 text-secondary dark:text-orange-50 disabled:cursor-not-allowed"
                :disabled="counter === item.buyer_adjusts_quantity_end"
                @click="counter++"
            >+
            </button>
        </div>
        <p class="text-gray-600 dark:text-zinc-400 font-medium text-xs" x-text="item.stock_control_quantity === 1 ? '1 disponível' : item.buyer_adjusts_quantity_end + ' disponíveis'"></p>
        <button
            class="py-3 h-10 pl-4 pr-3 flex items-center gap-2 border border-secondary dark:border-orange-50 rounded-full text-secondary dark:text-orange-50 text-sm leading-4 font-bold"
            @click="countSelected = counter; opened = false; selectedCount = counter; setQuantityPrimaryVariant(item.code, selectedCount, indexSelectedVariant); cart.totals.discounts.coupon.code ? validateCouponDiscount() : null;"
        >
            Confirmar
        </button>
        <button
                x-show="shouldShowRemoveItem"
                class="py-3 h-10 pl-4 pr-3 flex items-center gap-2 border border-secondary dark:border-orange-50 rounded-full text-secondary dark:text-orange-50 text-sm leading-4 font-bold"
                @click="countSelected = counter; opened = false; selectedCount = counter; removeItem(item.code, selectedVariant.primary_code ?? null, selectedVariant.secondary_code ?? null);"
        >
            Remove
        </button>
    </div>
</div>
                                <template x-if="selectedVariant?.amount_with_discount">
                                    <div class="flex items-center gap-2">
                                        <div
                                            class="flex items-center text-sm leading-4 font-bold"
                                        >
                                            <p class="text-[var(--theme-color)] line-through">R$</p>
                                            <p x-text="formatCurrencyPrice(selectedVariant.amount / 100)" class="text-zinc-900 dark:text-neutral-50 line-through"></p>
                                        </div>
                                        <div class="flex items-center text-xl leading-6 font-black">
                                            <p class="text-[var(--theme-color)]">R$</p>
                                            <p x-text="formatCurrencyPrice(selectedVariant.amount_with_discount / 100)" class="text-zinc-900 dark:text-neutral-50"></p>
                                        </div>
                                    </div>
                                </template>
                                <template x-if="!selectedVariant?.amount_with_discount">
                                    <div class="flex items-center text-xl leading-6 font-black">
                                        <p class="text-[var(--theme-color)]">R$</p>
                                        <p x-text="formatCurrencyPrice(selectedVariant.amount / 100)" class="text-zinc-900 dark:text-neutral-50"></p>
                                    </div>
                                </template>
                            </div>
                        </footer>
                    </div>
                </template>
                <template x-if="item.variant_flag">
                    <button
                        type="button"
                        title="Adicionar modelo"
                        class="flex items-center justify-center h-8 w-full border border-dashed border-slate-400 dark:border-neutral-500 rounded-lg hover:bg-black/[0.04] hover:dark:bg-white/[0.16] transition-colors"
                        @click="addProductNewVariant(item); cart.totals.discounts.coupon.code ? validateCouponDiscount() : null;"
                        x-show="canAddProductNewVariant(item)"
                    >
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
        <path d="M8 12H16" class="stroke-slate-400 dark:stroke-neutral-500" stroke-width="1.5" stroke-linecap="round"/>
        <path d="M12 8L12 16" class="stroke-slate-400 dark:stroke-neutral-500" stroke-width="1.5" stroke-linecap="round"/>
    </svg>


                    </button>
                </template>
            </div>
            <template x-if="item.order_bump_code">
                <div class="rounded-2xl border-4 border-[var(--theme-color)] px-2 py-2 bg-gray-100 dark:bg-zinc-900">
    <div class="bg-white dark:bg-neutral-800 rounded-xl p-4 shadow-md">
        <div
            class="flex flex-col md:flex-row"
            x-bind:class="item.image_url !== null && 'md:gap-4'"
        >
            <div
                class="flex"
                x-bind:class="item.image_url !== null && 'gap-4'"
            >
                <template x-if="!item.variant_flag && item.image_url !== null">
                    <div class="w-10 h-10">
                        <img x-bind:src="item.image_url" x-bind:alt="item.title" class="rounded overflow-hidden">
                    </div>
                </template>
                <template x-if="item.variant_flag && item.primaryVariants.filter(variant => variant.selected_flag).length > 0">
                    <div class="w-10 h-10">
                        <img x-bind:src="item.primaryVariants.filter(variant => variant.selected_flag)[0].image_url" x-bind:alt="item.primaryVariants.filter(variant => variant.selected_flag)[0].title" class="rounded overflow-hidden">
                    </div>
                </template>
                <p class="text-zinc-900 dark:text-neutral-50 text-lg block md:hidden leading-6 font-bold" x-text="item.title"></p>
            </div>
            <div class="w-full space-y-1.5">
                <p class="text-zinc-900 dark:text-neutral-50 text-lg hidden md:block leading-6 font-bold" x-text="item.title" x-bind:id="`item-title-${item.code}`"></p>
                <div class="flex flex-col gap-2 md:flex-row md:items-center justify-between">
                    <template x-for="variant in item.primaryVariants" :key="variant.code">
                        <div
                            :class="{
                                'w-20 h-20 p-2 -ml-2.5': variant.image_url,
                                'w-auto h-auto px-4 py-2': !variant.image_url,
                                '-ml-4 flex items-center justify-center rounded-lg dark:bg-zinc-800 cursor-pointer': true
                            }"
                            @click="removePickUpOffer(item.product_code, variant.code)"
                        >
                            <!-- Se tiver imagem, exibe a imagem -->
                            <template x-if="variant.image_url">
                                <div class="w-full h-full flex items-center justify-center">
                                    <img x-bind:src="variant.image_url" x-bind:alt="variant.title"
                                        class="w-full h-full object-contain rounded-lg border-2"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(item.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(item.product_code, variant.code)
                                        }">
                                </div>
                            </template>
                            <!-- Se não tiver imagem, exibe a tag -->
                            <template x-if="!variant.image_url">
                                <div class="w-full h-full flex items-center justify-center">
                                    <span
                                        class="text-sm font-semibold text-center whitespace-nowrap overflow-hidden text-ellipsis border-2 flex items-center justify-center w-auto h-auto rounded-lg py-2 px-2.5"
                                        x-text="variant.tag"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(item.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(item.product_code, variant.code)
                                        }">
                                    </span>
                                </div>
                            </template>
                        </div>
                    </template>
                </div>
                <div class="flex flex-col gap-2 md:flex-row md:items-center justify-between">
                    <span class="flex items-center gap-2" x-show="item.discount_value > 0">
                        <div class="text-[var(--contrast-color)] text-xs leading-5 px-1.5 py-0.5 m-0 font-black bg-[var(--theme-color)] uppercase rounded">De</div>
                        <div class="flex items-center text-base font-bold">
                            <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="line-through text-zinc-900 dark:text-neutral-50" x-text="formatCurrencyPrice(item.amount_with_discount / 100)"></p>
                        </div>
                    </span>
                    <span class="flex items-center gap-2">
                        <div class="text-[var(--contrast-color)] text-xs leading-5 px-1.5 py-0.5 m-0 font-black bg-[var(--theme-color)] uppercase rounded">Por</div>
                        <div class="flex items-center text-xl font-black">
                            <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50" x-text="item.amount_formatted"></p>
                        </div>
                    </span>
                </div>
            </div>
        </div>
        <div class="flex items-center justify-end pt-2 mt-3">
            <button
                x-bind:data-code="item.unique_key"
                class="px-14 flex items-center gap-2 bg-[var(--theme-color)] !text-[var(--contrast-color)] border-[var(--theme-color)] rounded-[var(--border-radius)] text-zinc-900 uppercase dark:text-neutral-50 text-sm leading-4 font-bold pl-3 pr-4 !py-2 !h-fit !border-2"
                @click="removePickUpOffer(item.product_code, item.variant_code)"
            >
                <div
                    class="flex items-center justify-center w-4.5 h-4.5 border-2 border-[var(--theme-color)] bg-white rounded-[3px]">
                    <svg class="stroke-[var(--theme-color)] stroke-[3]" width="13" height="10" viewBox="0 0 13 10" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1.70728 4.73333L5.34364 9L11.7073 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </svg>


                </div>
                Oferta adicionada
            </button>
        </div>
    </div>
</div>
            </template>
        </div>
    </template>
</div>
                <hr class="h-[0.0625rem] my-12 bg-black/[0.16] dark:bg-white/[0.16] border-none border-0">
                <template x-if="checkoutConfig.enable_coupon_flag">
                    <div class="flex items-center pl-3 pr-1 py-2 gap-3 bg-[var(--theme-color)] rounded-lg overflow-hidden">
    <svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g clip-path="url(#clip0_3717_8013)">
        <path
            d="M25.4688 23.5065C24.8226 23.5065 24.2969 24.0322 24.2969 24.6784C24.3558 26.2309 26.582 26.2304 26.6406 24.6784C26.6406 24.0322 26.1149 23.5065 25.4688 23.5065Z"
            class="fill-[var(--contrast-color)]"/>
        <path
            d="M14.5312 14.1315C13.8851 14.1315 13.3594 14.6572 13.3594 15.3034C13.4183 16.8559 15.6445 16.8555 15.7031 15.3034C15.7031 14.6572 15.1774 14.1315 14.5312 14.1315Z"
            class="fill-[var(--contrast-color)]"/>
        <path
            d="M39.4129 13.3374C39.7372 13.3374 40 13.0745 40 12.7503V7.91725C40 7.59303 39.7372 7.33014 39.4129 7.33014H0.587109C0.262812 7.33022 0 7.59303 0 7.91725V12.7503C0 13.0745 0.262812 13.3374 0.587109 13.3374C3.01094 13.4295 3.00992 16.9047 0.587109 16.9963C0.262891 16.9963 7.8125e-05 17.2591 7.8125e-05 17.5834V22.4165C7.8125e-05 22.7408 0.262891 23.0037 0.587187 23.0037C3.01109 23.0958 3.01 26.5711 0.587187 26.6626C0.262969 26.6626 0.00015625 26.9254 0.00015625 27.2497V32.0828C0.00015625 32.407 0.262969 32.6699 0.587266 32.6699H39.4131C39.7374 32.6699 40.0002 32.407 40.0002 32.0828V27.2497C40.0002 26.9255 39.7374 26.6626 39.4131 26.6626C36.9892 26.5705 36.9903 23.0952 39.4131 23.0037C39.7373 23.0037 40.0002 22.7408 40.0002 22.4165V17.5834C40.0002 17.2592 39.7373 16.9963 39.413 16.9963C36.9891 16.9044 36.9902 13.4289 39.4129 13.3374ZM11.0156 15.3034C11.0156 13.3649 12.5927 11.7878 14.5312 11.7878C19.1888 11.9645 19.1875 18.643 14.5312 18.819C12.5927 18.819 11.0156 17.2419 11.0156 15.3034ZM15.724 28.2123C15.5168 28.2123 15.307 28.1574 15.1169 28.0419C14.5637 27.706 14.3875 26.9853 14.7234 26.4321L23.2733 12.3515C23.6091 11.7983 24.3299 11.6221 24.8831 11.9581C25.4363 12.294 25.6125 13.0147 25.2766 13.568L16.7268 27.6485C16.5063 28.0116 16.1199 28.2123 15.724 28.2123ZM25.4688 28.194C23.5302 28.194 21.9531 26.6169 21.9531 24.6784C22.1298 20.0208 28.8084 20.0222 28.9844 24.6785C28.9844 26.6169 27.4073 28.194 25.4688 28.194Z"
            class="fill-[var(--contrast-color)]"/>
    </g>
    <defs>
        <clipPath id="clip0_3717_8013">
            <rect width="40" height="40" fill="white"/>
        </clipPath>
    </defs>
</svg>
    <template x-if="cart.totals.discounts.coupon.totalValue > 0">
        <div class="flex items-center justify-between w-full pr-2">
            <div class="flex items-center gap-2 py-1 px-2 border rounded border-[var(--contrast-color)]">
                <p
                    class="text-base leading-6 font-black text-[var(--contrast-color)] uppercase"
                    x-text="cart.totals.discounts.coupon.label"
                ></p>
                <div>
        <svg  width="24" height="24" class="stroke-[var(--contrast-color)]" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 7L9.42857 17L6 13" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
    </div>

            </div>
            <div class="flex items-center gap-3">
                <template x-if="cart.totals.discounts.coupon.attachProductTypeEnum === 1">
                    <div class="flex text-base text-[var(--contrast-color)] gap-1.5">
                        <p class="font-medium">Desconto de</p>
                        <p
                            class="font-black"
                            x-html="cart.totals.discounts.coupon.discountValueTypeEnum === 1 ? `${getCurrencySymbol()}${cart.totals.discounts.coupon.totalValueFormatted}` : `${(cart.totals.discounts.coupon.value)/100}%`"
                        ></p>
                    </div>
                </template>
                <button @click="removeDiscountCoupon">
                    <svg width="24" height="24" class="fill-black dark:fill-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path id="Vector" d="M19 6H5C4.73478 6 4.48043 6.10536 4.29289 6.29289C4.10536 6.48043 4 6.73478 4 7C4 7.26522 4.10536 7.51957 4.29289 7.70711C4.48043 7.89464 4.73478 8 5 8V17.591C5.00106 18.4948 5.36056 19.3613 5.99964 20.0004C6.63872 20.6394 7.5052 20.9989 8.409 21H15.591C16.4948 20.9989 17.3613 20.6394 18.0004 20.0004C18.6394 19.3613 18.9989 18.4948 19 17.591V8C19.2652 8 19.5196 7.89464 19.7071 7.70711C19.8946 7.51957 20 7.26522 20 7C20 6.73478 19.8946 6.48043 19.7071 6.29289C19.5196 6.10536 19.2652 6 19 6ZM17 17.591C16.9997 17.9646 16.8512 18.3228 16.587 18.587C16.3228 18.8512 15.9646 18.9997 15.591 19H8.409C8.03539 18.9997 7.67716 18.8512 7.41298 18.587C7.1488 18.3228 7.00026 17.9646 7 17.591V8H17V17.591Z" class="fill-black dark:fill-white" />
    <path id="Vector_2" d="M10 5H14C14.2652 5 14.5196 4.89464 14.7071 4.70711C14.8946 4.51957 15 4.26522 15 4C15 3.73478 14.8946 3.48043 14.7071 3.29289C14.5196 3.10536 14.2652 3 14 3H10C9.73478 3 9.48043 3.10536 9.29289 3.29289C9.10536 3.48043 9 3.73478 9 4C9 4.26522 9.10536 4.51957 9.29289 4.70711C9.48043 4.89464 9.73478 5 10 5Z" class="fill-black dark:fill-white" fill-opacity="0.64" />
    <path id="Vector_3" d="M10 16C10.2652 16 10.5196 15.8946 10.7071 15.7071C10.8946 15.5196 11 15.2652 11 15V12C11 11.7348 10.8946 11.4804 10.7071 11.2929C10.5196 11.1054 10.2652 11 10 11C9.73478 11 9.48043 11.1054 9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12V15C9 15.2652 9.10536 15.5196 9.29289 15.7071C9.48043 15.8946 9.73478 16 10 16Z" class="fill-black dark:fill-white" fill-opacity="0.64" />
    <path id="Vector_4" d="M14 16C14.2652 16 14.5196 15.8946 14.7071 15.7071C14.8946 15.5196 15 15.2652 15 15V12C15 11.7348 14.8946 11.4804 14.7071 11.2929C14.5196 11.1054 14.2652 11 14 11C13.7348 11 13.4804 11.1054 13.2929 11.2929C13.1054 11.4804 13 11.7348 13 12V15C13 15.2652 13.1054 15.5196 13.2929 15.7071C13.4804 15.8946 13.7348 16 14 16Z" class="fill-black dark:fill-white" fill-opacity="0.64" />
</svg>
                </button>
            </div>
        </div>
    </template>
    <template x-if="cart.totals.discounts.coupon.totalValue === 0">
        <div class="flex items-center justify-between w-full">
            <label class="flex-1">
                <input
                    type="text"
                    placeholder="Insira um cupom de desconto"
                    name="coupon_code"
                    x-ref="coupon_code"
                    x-model="cart.totals.discounts.coupon.code"
                    @keyup.enter="validateCouponDiscount"
                    class="border-none w-full px-0 focus:ring-0 text-base font-medium bg-transparent text-[var(--contrast-color)] placeholder:text-[var(--contrast-color)]"
                >
            </label>
            <button class="px-4 text-[var(--contrast-color)] font-black text-sm" @click="validateCouponDiscount">
                Aplicar
            </button>
        </div>
    </template>
</div>
                </template>
                <div class="mt-6 space-y-2">
    
    <span class="flex items-center justify-between p-1">
        <p class="text-base font-medium text-zinc-900 dark:text-neutral-50">Subtotal</p>
        <div class="flex text-base font-medium text-zinc-900 dark:text-neutral-50">
            <span x-html="getCurrencySymbol()"></span>
            <span x-text="cart.totals.subTotalValueFormatted"></span>
        </div>
    </span>
    
    <template x-if="checkoutConfig.hasFreight">
        <span class="flex items-center justify-between p-1" x-show="!!Object.keys(freight).length">
            <p class="text-base font-medium text-zinc-900 dark:text-neutral-50">Frete</p>
            <p class="text-base font-medium text-zinc-900 dark:text-neutral-50" x-show="cart.totals.freight > 0" x-text="normalizeFreightNumber(cart.totals.freight)"></p>
            <div x-text="normalizeFreightNumber(cart.totals.freight || 0)" x-bind:class="cart.totals.freight > 0 ? 'bg-transparent' : 'uppercase bg-emerald-400 text-white dark:text-neutral-800 py-1 px-2 rounded text-sm font-black'" x-show="cart.totals.freight === 0">
    <p ></p>
</div>
        </span>
    </template>
    
    <template x-for="discount in cart.totals.discounts">
        <div>
            <span
                class="flex items-center justify-between p-1"
                x-show="discount.totalValue > 0"
            >
                <p class="text-base font-medium text-zinc-900 dark:text-neutral-50" x-text="discount.label"></p>
                <div class="flex text-base font-medium text-zinc-900 dark:text-neutral-50">
                    <p class="text-base font-medium text-zinc-900 dark:text-neutral-50" x-text="'-' + getCurrencySymbol()"></p>
                    <p x-text="discount.totalValueFormatted"></p>
                </div>
            </span>
        </div>
    </template>
    
    <span class="flex items-center justify-between p-1">
        <p class="text-base font-black text-zinc-900 dark:text-neutral-50">Total</p>
        <div class="flex items-center">
            <p class="text-base font-medium text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
            <p class="text-base font-black text-zinc-900 dark:text-neutral-50" x-text="cart.totals.totalValueFormatted"></p>
        </div>
    </span>
</div>
                <div class="hidden xl:block">
                                    </div>
                <hr class="h-[0.0625rem] my-12 bg-black/[0.16] dark:bg-white/[0.16] border-none border-0">
                <div class="hidden xl:block">
                                    </div>
            </div>
        </div>
        <div
            class="sticky xl:hidden align-self-end bg-white dark:bg-neutral-800 z-30 w-full rounded-b-[var(--border-radius)]"
            x-bind:class="{
                'bottom-12' : false,
                'bottom-0' : false,
                'hidden' : !see_bag
            }"
        >
            <div class="flex justify-center items-center py-1.5 ">
                <button
                    @click="see_bag = ! see_bag"
                    class="flex justify-center items-center mx-auto px-7 py-1.5 bg-[var(--theme-color)] rounded-lg gap-2"
                >
                    <p class="text-sm text-[var(--contrast-color)] font-bold" x-text="see_bag ? 'Ocultar carrinho': 'Ver carrinho'"></p>
                    <template x-if="see_bag">
                        <div >
        <svg width="13" height="12" viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M6.79147 3.12082L10.8518 7.18061C11.013 7.34175 11.013 7.603 10.8518 7.76414L9.84736 8.76862C9.68626 8.92973 9.42502 8.92975 9.26391 8.76865L6.49972 6.00503L4.87967 7.62508L3.73615 8.7686C3.57502 8.92973 3.31379 8.92973 3.15265 8.7686L2.14819 7.76414C1.98706 7.603 1.98706 7.34177 2.14819 7.18064L4.87967 4.44916L6.20799 3.12084C6.3691 2.95971 6.63033 2.95971 6.79147 3.12082Z" class="fill-[var(--contrast-color)]"/>
        </svg>
    </div>
                    </template>
                    <template x-if="!see_bag">
                        <div >
        <svg width="13" height="12" viewBox="0 0 13 12" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
                d="M6.20853 8.87912L2.14817 4.81932C1.98702 4.65819 1.98702 4.39693 2.14815 4.2358L3.15264 3.23132C3.31374 3.07021 3.57498 3.07018 3.73609 3.23129L6.50028 5.9949L8.12033 4.37486L9.26385 3.23134C9.42498 3.07021 9.68621 3.07021 9.84735 3.23134L10.8518 4.2358C11.0129 4.39693 11.0129 4.65817 10.8518 4.8193L8.12033 7.55078L6.79201 8.8791C6.6309 9.04023 6.36967 9.04023 6.20853 8.87912Z"
                class="fill-[var(--contrast-color)]"/>
        </svg>
    </div>
                    </template>
                </button>
            </div>
        </div>
    </div>
</section>
            <!-- Forms (Identification, Freight and Payment) -->
            <aside
    id="steps_forms"
    class="relative flex flex-col xl:!w-[38.5%] w-full pt-16 xl:!pt-0 px-4 sm:!px-12 lg:!px-[12vw] xl:!px-[4vw] 2xl:!px-20  xl:overflow-y-auto custom-scroll-aside"
    x-bind:class="{
        'pt-16': checkoutConfig.banner_cart_mobile_imagem_url === '0',
        'pt-3': checkoutConfig.banner_cart_mobile_imagem_url !== '0'
    }"
>
    <template x-if="checkoutConfig.timer_flag">
        <div
            class="hidden xl:block w-full z-40 border-black/[0.04] dark:border-white/[0.04]"
            x-bind:class="{
                'sticky top-0 border-b-4 pt-[4rem] pb-6 ': checkoutConfig.timer_position_enum === 1,
                'sticky -bottom-10 order-last border-t-4 pb-10 pt-6 mt-14': checkoutConfig.timer_position_enum === 2,
                'bg-[var(--background-color)]': checkoutConfig.theme_type_enum === 1,
                'bg-gray-100 dark:bg-zinc-900': checkoutConfig.theme_type_enum === 2
            }"
        >
            <div
    class="relative flex items-center"
    x-bind:class="{
        '!bg-[var(--background-color)]': checkoutConfig.theme_type_enum === 1,
        'bg-gray-100 dark:bg-zinc-900': checkoutConfig.theme_type_enum === 2,
        'justify-center': timer.show_message
    }"
>
    <div
        class="flex items-center justify-center xl:!justify-between text-[var(--contrast-color)] h-12 md:h-14 relative z-30 w-full"
        x-bind:class="{
            'bg-[var(--background-color)]': checkoutConfig.theme_type_enum === 1,
            'bg-gray-100 dark:bg-zinc-900': checkoutConfig.theme_type_enum === 2
        }"
        x-show="!timer.show_message"
        x-cloak
    >
        <p class="text-[2.8vw] leading-none sm:text-base sm:leading-5 font-bold text-zinc-900 dark:text-neutral-50 uppercase" x-text="checkoutConfig.timer_text"></p>
        <div class="flex items-center justify-center gap-1 ml-3">
            <p class="rounded-[2rem] font-black text-2xl w-12 text-center text-[var(--contrast-color)] bg-[var(--theme-color)] px-1" x-text="timer.hours.toString().padStart(2, '0')"></p>
            <span class="text-4xl leading-10 font-bold text-zinc-900 dark:text-neutral-50 animate-pulse text-center">:</span>
            <p class="rounded-[2rem] font-black text-2xl w-12 text-center text-[var(--contrast-color)] bg-[var(--theme-color)] px-1" x-text="timer.minutes.toString().padStart(2, '0')"></p>
            <span class="text-4xl leading-10 font-bold text-zinc-900 dark:text-neutral-50 animate-pulse">:</span>
            <p class="rounded-[2rem] font-black text-2xl w-12 text-center text-[var(--contrast-color)] bg-[var(--theme-color)] px-1" x-text="timer.seconds.toString().padStart(2, '0')"></p>
        </div>
    </div>
    <div
        class="flex items-center text-[var(--contrast-color)] h-12 md:h-14 relative z-30 w-full"
        x-bind:class="{
            'fixed bottom-0 w-full': checkoutConfig.timer_position_enum === 2 && checkoutConfig.timer_width_enum === 1,
            '!justify-center': checkoutConfig.timer_position_enum === 1 || checkoutConfig.timer_position_enum === 2,
            'justify-between': checkoutConfig.timer_width_enum === 2,
            '!bg-[var(--background-color)]': checkoutConfig.theme_type_enum === 1,
            'bg-gray-100 dark:bg-zinc-900': checkoutConfig.theme_type_enum === 2
        }"
        x-show="timer.show_message"
    >
        <p class="text-base font-bold leading-5 uppercase w-full text-center text-zinc-900 dark:text-neutral-50" x-text="timer.message"></p>
    </div>
</div>
        </div>
    </template>
    <template x-if="checkoutConfig.banner_cart_mobile_imagem_url !== '0'">
        <figure class="flex items-start justify-center w-full mb-5">
            <img
                x-bind:src="checkoutConfig.banner_cart_mobile_imagem_url"
                x-bind:alt="`Banner Loja ${business.name}`"
                class="w-screen max-w-[initial] block xl:hidden"
            />
        </figure>
    </template>
    <!-- One Step -->
<template x-if="checkoutConfig.form_step_enum === 1">
    <div x-bind:class="checkoutConfig.timer_flag && checkoutConfig.timer_position_enum === 1 ? 'xl:pt-8' : 'xl:pt-16'">
        <!-- Identification Form -->
        <div class="mx-3 xl:mx-0">
    <template x-if="checkoutConfig.form_step_enum === 1">
        <div class="mb-8">
            <div class="flex items-center justify-between">
                <p class="text-xl font-bold text-zinc-900 dark:text-neutral-50">Finalizar</p>
                <div class="flex items-center gap-1.5">
                    <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50">Ambiente seguro</p>
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.4627 4.7991C21.4265 4.54124 21.2395 4.32912 20.9866 4.2594L12.8838 2.02392C12.7683 1.99203 12.6463 1.99203 12.5307 2.02392L4.42791 4.2594C4.1751 4.32912 3.98808 4.54115 3.95188 4.7991C3.90489 5.13436 2.83274 13.0556 5.58272 16.9962C8.32945 20.9321 12.3815 21.9407 12.5526 21.9818C12.6034 21.994 12.6553 22 12.7073 22C12.7593 22 12.8111 21.9939 12.862 21.9818C13.0332 21.9407 17.0852 20.9321 19.8318 16.9962C22.5818 13.0557 21.5097 5.13444 21.4627 4.7991ZM17.9325 9.42362L12.4056 14.9066C12.277 15.0342 12.1084 15.0981 11.9398 15.0981C11.7712 15.0981 11.6025 15.0343 11.4739 14.9066L8.05669 11.5165C7.93309 11.394 7.8637 11.2277 7.8637 11.0544C7.8637 10.8811 7.93318 10.7148 8.05669 10.5923L8.7352 9.91914C8.9925 9.66397 9.40967 9.66388 9.66688 9.91914L11.9398 12.174L16.3223 7.82614C16.4459 7.70352 16.6135 7.63468 16.7882 7.63468C16.9629 7.63468 17.1305 7.70352 17.254 7.82614L17.9325 8.49926C18.1898 8.75451 18.1898 9.16837 17.9325 9.42362Z" class="fill-[var(--theme-color)]"/>
</svg>
                </div>
            </div>
            <div class="py-2 mt-3 mb-8">
                <hr class="border-4 border-black/[0.04] dark:border-white/[0.04]">
            </div>
            <div class="flex items-center justify-between xl:mx-8">
                <div class="flex items-center justify-center text-base leading-4 font-black rounded-lg w-8 h-8 bg-[var(--theme-color)] text-[var(--contrast-color)]">1</div>
                <div class="flex items-center gap-1.5">
                    <p class="text-lg leading-8 font-medium text-zinc-900 dark:text-neutral-50">Dados pessoais</p>
                </div>
            </div>
        </div>
    </template>
    <template x-if="checkoutConfig.form_step_enum === 3">
        <div class="my-8">
            <div class="flex items-center justify-between xl:mx-8">
                <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Dados pessoais</p>
                <div class="flex items-center gap-1.5">
                    <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50">Ambiente seguro</p>
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.4627 4.7991C21.4265 4.54124 21.2395 4.32912 20.9866 4.2594L12.8838 2.02392C12.7683 1.99203 12.6463 1.99203 12.5307 2.02392L4.42791 4.2594C4.1751 4.32912 3.98808 4.54115 3.95188 4.7991C3.90489 5.13436 2.83274 13.0556 5.58272 16.9962C8.32945 20.9321 12.3815 21.9407 12.5526 21.9818C12.6034 21.994 12.6553 22 12.7073 22C12.7593 22 12.8111 21.9939 12.862 21.9818C13.0332 21.9407 17.0852 20.9321 19.8318 16.9962C22.5818 13.0557 21.5097 5.13444 21.4627 4.7991ZM17.9325 9.42362L12.4056 14.9066C12.277 15.0342 12.1084 15.0981 11.9398 15.0981C11.7712 15.0981 11.6025 15.0343 11.4739 14.9066L8.05669 11.5165C7.93309 11.394 7.8637 11.2277 7.8637 11.0544C7.8637 10.8811 7.93318 10.7148 8.05669 10.5923L8.7352 9.91914C8.9925 9.66397 9.40967 9.66388 9.66688 9.91914L11.9398 12.174L16.3223 7.82614C16.4459 7.70352 16.6135 7.63468 16.7882 7.63468C16.9629 7.63468 17.1305 7.70352 17.254 7.82614L17.9325 8.49926C18.1898 8.75451 18.1898 9.16837 17.9325 9.42362Z" class="fill-[var(--theme-color)]"/>
</svg>
                </div>
            </div>
        </div>
    </template>
    <template x-if="checkoutConfig.form_step_enum === 2">
        <div class="my-8">
            <div class="flex items-center justify-between xl:mx-8">
                <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Dados pessoais</p>
                <div class="flex items-center gap-1.5">
                    <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50">Ambiente seguro</p>
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.4627 4.7991C21.4265 4.54124 21.2395 4.32912 20.9866 4.2594L12.8838 2.02392C12.7683 1.99203 12.6463 1.99203 12.5307 2.02392L4.42791 4.2594C4.1751 4.32912 3.98808 4.54115 3.95188 4.7991C3.90489 5.13436 2.83274 13.0556 5.58272 16.9962C8.32945 20.9321 12.3815 21.9407 12.5526 21.9818C12.6034 21.994 12.6553 22 12.7073 22C12.7593 22 12.8111 21.9939 12.862 21.9818C13.0332 21.9407 17.0852 20.9321 19.8318 16.9962C22.5818 13.0557 21.5097 5.13444 21.4627 4.7991ZM17.9325 9.42362L12.4056 14.9066C12.277 15.0342 12.1084 15.0981 11.9398 15.0981C11.7712 15.0981 11.6025 15.0343 11.4739 14.9066L8.05669 11.5165C7.93309 11.394 7.8637 11.2277 7.8637 11.0544C7.8637 10.8811 7.93318 10.7148 8.05669 10.5923L8.7352 9.91914C8.9925 9.66397 9.40967 9.66388 9.66688 9.91914L11.9398 12.174L16.3223 7.82614C16.4459 7.70352 16.6135 7.63468 16.7882 7.63468C16.9629 7.63468 17.1305 7.70352 17.254 7.82614L17.9325 8.49926C18.1898 8.75451 18.1898 9.16837 17.9325 9.42362Z" class="fill-[var(--theme-color)]"/>
</svg>
                </div>
            </div>
        </div>
    </template>
    <div class="space-y-2 xl:mx-8">
        <div
    class="group w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formIdentification.full_name !== ''" x-bind:class="{ '!border-red-300' : !validation.formIdentification.full_name.isValid }"
>
    <input
    autocomplete="not"
    class="w-full py-[0.875rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50" id="full_name" placeholder="Nome completo" name="full_name" x-ref="full_name" x-model="formIdentification.full_name" @keyup="validation.formIdentification.full_name.validate(context)" @blur="validation.formIdentification.full_name.validate(context)" maxlength="255"
>
</div>

        <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formIdentification.full_name.isValid" x-text="validation.formIdentification.full_name.errorMessage">
    
</p>
        <div
    class="group w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)] relative" x-bind:data-filled="formIdentification.email !== ''" x-bind:class="{ '!border-red-300' : !validation.formIdentification.email.isValid }" @click.outside="emailSuggestions = []"
>
    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M19.7073 20.5H5.70728C4.64676 20.4989 3.63 20.0771 2.8801 19.3272C2.1302 18.5773 1.70841 17.5605 1.70728 16.5V7.5C1.70841 6.43948 2.1302 5.42272 2.8801 4.67282C3.63 3.92292 4.64676 3.50113 5.70728 3.5H19.7073C20.7678 3.50113 21.7846 3.92292 22.5345 4.67282C23.2844 5.42272 23.7061 6.43948 23.7073 7.5V16.5C23.7061 17.5605 23.2844 18.5773 22.5345 19.3272C21.7846 20.0771 20.7678 20.4989 19.7073 20.5ZM5.70728 5.5C5.17703 5.50061 4.66867 5.71151 4.29373 6.08646C3.91879 6.4614 3.70788 6.96975 3.70728 7.5V16.5C3.70788 17.0302 3.91879 17.5386 4.29373 17.9135C4.66867 18.2885 5.17703 18.4994 5.70728 18.5H19.7073C20.2375 18.4994 20.7459 18.2885 21.1208 17.9135C21.4958 17.5386 21.7067 17.0302 21.7073 16.5V7.5C21.7067 6.96975 21.4958 6.4614 21.1208 6.08646C20.7459 5.71151 20.2375 5.50061 19.7073 5.5H5.70728Z" class="fill-[var(--theme-color)]"/>
    <path d="M12.7072 13.4339C11.5949 13.4344 10.5143 13.0633 9.63688 12.3797L3.09288 7.28991C2.88348 7.12699 2.74737 6.88757 2.7145 6.6243C2.68163 6.36104 2.75468 6.0955 2.91759 5.8861C3.08051 5.67669 3.31993 5.54059 3.58319 5.50771C3.84646 5.47484 4.112 5.54789 4.3214 5.71081L10.8653 10.8006C11.3916 11.211 12.0398 11.4338 12.7071 11.4338C13.3745 11.4338 14.0227 11.211 14.5489 10.8006L21.0929 5.71081C21.3023 5.54789 21.5678 5.47484 21.8311 5.50771C22.0944 5.54059 22.3338 5.67669 22.4967 5.8861C22.6596 6.0955 22.7327 6.36104 22.6998 6.6243C22.6669 6.88757 22.5308 7.12699 22.3214 7.28991L15.7774 12.3797C14.8999 13.0631 13.8194 13.4341 12.7072 13.4339Z" class="fill-[var(--theme-color)]"/>
</svg>
            <input
    autocomplete="not"
    class="w-full py-[0.875rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50" id="formEmail" x-bind:placeholder="checkoutConfig.require_email_customer_flag ? 'E-mail' : 'E-mail (opcional)'" name="email" x-ref="email" x-model="formIdentification.email" @keyup="validation.formIdentification.email.validate(context)" @input="validation.formIdentification.email.validate(context, false, true); suggestEmail()" @keydown.arrow-down.prevent="nextSuggestionEmail()" @keydown.arrow-up.prevent="previousSuggestionEmail()" @keydown.enter.prevent="selectSuggestionEmail()" maxlength="255"
>
            <div x-show="emailSuggestions.length > 0" class="absolute top-16 left-0 py-1 w-full rounded bg-white dark:bg-neutral-800 text-zinc-900 dark:text-neutral-50" x-cloak>
                <template x-for="(suggestion, index) in emailSuggestions" :key="index">
                    <div
                        class="w-full py-2 pr-4 pl-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-neutral-700"
                        @click="selectSuggestionEmail(index)"
                    >
                        <p class="font-medium truncate" x-text="suggestion"></p>
                    </div>
                </template>
            </div>
</div>

        <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formIdentification.email.isValid" x-text="validation.formIdentification.email.errorMessage">
    
</p>
        <div
    class="group w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formIdentification.phone_number !== ''" x-bind:class="{ '!border-red-300' : !validation.formIdentification.phone_number.isValid }"
>
    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M17.207 2.25H8.20703C7.3786 2.25 6.70703 2.92157 6.70703 3.75V20.25C6.70703 21.0784 7.3786 21.75 8.20703 21.75H17.207C18.0355 21.75 18.707 21.0784 18.707 20.25V3.75C18.707 2.92157 18.0355 2.25 17.207 2.25Z" class="stroke-[var(--theme-color)]" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M6.70703 5.25H18.707" class="stroke-[var(--theme-color)]" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M11.707 19H13.707" class="stroke-[var(--theme-color)]" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
            <input
    autocomplete="not"
    class="w-full py-[0.875rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50" id="phone_number" placeholder="DDD + número" name="phone_number" x-mask:dynamic="getMaskInputPhone" x-mask="99 99999-9999" x-ref="phone_number" x-model="formIdentification.phone_number" @keyup="validation.formIdentification.phone_number.validate(context)" @blur="validation.formIdentification.phone_number.validate(context, false, true)" maxlength="25"
>
</div>

        <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formIdentification.phone_number.isValid" x-text="validation.formIdentification.phone_number.errorMessage">
    
</p>
        <div
    class="group w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formIdentification.identification_number !== ''" x-bind:class="{ '!border-red-300' : !validation.formIdentification.identification_number.isValid }"
>
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
            d="M6.15 11C6.15 11.6951 6.40863 12.334 6.82888 12.8298C6.16708 13.2805 5.64979 13.9338 5.37548 14.7273L5.37513 14.7284C5.22854 15.1681 5.45342 15.6568 5.90873 15.805C6.34977 15.9518 6.83661 15.7152 6.98465 15.2723C7.28075 14.423 8.08254 13.85 9 13.85C9.91841 13.85 10.7294 14.4239 11.0152 15.2719L11.0152 15.2719L11.0158 15.2734C11.1398 15.623 11.4673 15.85 11.82 15.85C11.9079 15.85 11.9998 15.8391 12.0933 15.8043C12.5357 15.6558 12.7718 15.1692 12.6249 14.7284L12.6245 14.7273C12.3502 13.9338 11.8329 13.2805 11.1711 12.8298C11.5914 12.334 11.85 11.6951 11.85 11C11.85 9.42477 10.5752 8.15 9 8.15C7.42477 8.15 6.15 9.42477 6.15 11ZM19 3.15H5C2.87477 3.15 1.15 4.87477 1.15 7V17C1.15 19.1252 2.87477 20.85 5 20.85H19C21.1252 20.85 22.85 19.1252 22.85 17V7C22.85 4.87477 21.1252 3.15 19 3.15ZM21.15 17C21.15 18.1848 20.1848 19.15 19 19.15H5C3.81523 19.15 2.85 18.1848 2.85 17V7C2.85 5.81523 3.81523 4.85 5 4.85H19C20.1848 4.85 21.15 5.81523 21.15 7V17ZM7.85 11C7.85 10.3652 8.36523 9.85 9 9.85C9.63477 9.85 10.15 10.3652 10.15 11C10.15 11.6348 9.63477 12.15 9 12.15C8.36523 12.15 7.85 11.6348 7.85 11ZM18 10.85C18.4652 10.85 18.85 10.4652 18.85 10C18.85 9.53477 18.4652 9.15 18 9.15H15C14.5348 9.15 14.15 9.53477 14.15 10C14.15 10.4652 14.5348 10.85 15 10.85H18ZM18 14.85C18.4652 14.85 18.85 14.4652 18.85 14C18.85 13.5348 18.4652 13.15 18 13.15H15C14.5348 13.15 14.15 13.5348 14.15 14C14.15 14.4652 14.5348 14.85 15 14.85H18Z"
            class="stroke-[var(--theme-color)] fill-[var(--theme-color)]" stroke-width="0.2"
        />
    </svg>
            <input
    autocomplete="not"
    class="w-full py-[0.875rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50" id="identification_number" x-bind:placeholder="getTextIdentificationNumber()" name="identification_number" x-ref="identification_number" x-model="formIdentification.identification_number" @keyup="validation.formIdentification.identification_number.validate(context)" @blur="validation.formIdentification.identification_number.validate(context, false, true)" x-mask:dynamic="getMaskInputIdentificationNumber" maxlength="25"
>
</div>

        <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formIdentification.identification_number.isValid" x-text="validation.formIdentification.identification_number.errorMessage">
    
</p>
    </div>
    <div>
        <div class="border rounded-lg border-black/[0.16] dark:border-white/[0.16] mt-8 mb-10 xl:mx-8">
            <div class="flex items-center gap-3 p-3">
                <div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
    <path d="M7.60132 7.43059C7.60132 7.84481 7.9371 8.18059 8.35132 8.18059C8.76553 8.18059 9.10132 7.84481 9.10132 7.43059H7.60132ZM8.35132 7.12771H7.60132H8.35132ZM17.0633 7.12772H16.3133H17.0633ZM16.3133 7.4306C16.3133 7.84481 16.6491 8.1806 17.0633 8.1806C17.4775 8.1806 17.8133 7.84481 17.8133 7.4306H16.3133ZM11.5591 3.14126L11.377 2.41368L11.377 2.41368L11.5591 3.14126ZM13.8556 3.14126L14.0376 2.41368H14.0376L13.8556 3.14126ZM9.10132 7.43059V7.12771H7.60132V7.43059H9.10132ZM16.3133 7.12772V7.4306H17.8133V7.12772H16.3133ZM11.7411 3.86884C12.3745 3.71039 13.0401 3.71039 13.6736 3.86884L14.0376 2.41368C13.1651 2.19544 12.2495 2.19544 11.377 2.41368L11.7411 3.86884ZM17.8133 7.12772C17.8133 4.88982 16.2423 2.96519 14.0376 2.41368L13.6736 3.86884C15.2473 4.2625 16.3133 5.61508 16.3133 7.12772H17.8133ZM9.10132 7.12771C9.10132 5.61508 10.1674 4.2625 11.7411 3.86884L11.377 2.41368C9.17232 2.96519 7.60132 4.88982 7.60132 7.12771H9.10132Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    <path d="M5.36037 17.0261L4.66566 17.3087L4.66566 17.3087L5.36037 17.0261ZM5.01337 11.3969L5.73734 11.5928L5.01337 11.3969ZM20.4012 11.3969L19.6772 11.5928L20.4012 11.3969ZM20.0542 17.0261L20.7489 17.3087V17.3087L20.0542 17.0261ZM14.7437 20.8416L14.6278 20.1006L14.7437 20.8416ZM10.6708 20.8416L10.7867 20.1006L10.6708 20.8416ZM9.36347 7.60192L9.214 6.86697L9.36347 7.60192ZM16.0511 7.60192L16.2006 6.86697L16.2006 6.86697L16.0511 7.60192ZM9.92206 20.7245L9.80617 21.4655L9.92206 20.7245ZM5.45326 17.2544L6.14797 16.9718L6.14797 16.9718L5.45326 17.2544ZM15.4925 20.7245L15.6084 21.4655L15.4925 20.7245ZM19.9613 17.2544L19.2666 16.9718V16.9718L19.9613 17.2544ZM16.3272 7.65808L16.1777 8.39303L16.1777 8.39303L16.3272 7.65808ZM9.08736 7.65807L9.23684 8.39303L9.08736 7.65807ZM9.23684 8.39303L9.51294 8.33688L9.214 6.86697L8.93789 6.92312L9.23684 8.39303ZM15.9016 8.33688L16.1777 8.39303L16.4767 6.92312L16.2006 6.86697L15.9016 8.33688ZM15.3766 19.9835L14.6278 20.1006L14.8596 21.5826L15.6084 21.4655L15.3766 19.9835ZM10.7867 20.1006L10.038 19.9835L9.80617 21.4655L10.5549 21.5826L10.7867 20.1006ZM19.3595 16.7435L19.2666 16.9718L20.656 17.5371L20.7489 17.3087L19.3595 16.7435ZM6.14797 16.9718L6.05508 16.7435L4.66566 17.3087L4.75855 17.537L6.14797 16.9718ZM6.05508 16.7435C5.38669 15.1005 5.27585 13.2985 5.73734 11.5928L4.2894 11.201C3.74193 13.2246 3.87398 15.3627 4.66566 17.3087L6.05508 16.7435ZM19.6772 11.5928C20.1387 13.2985 20.0279 15.1005 19.3595 16.7435L20.7489 17.3087C21.5406 15.3628 21.6726 13.2246 21.1252 11.201L19.6772 11.5928ZM14.6278 20.1006C13.3559 20.2995 12.0587 20.2995 10.7867 20.1006L10.5549 21.5826C11.9805 21.8055 13.4341 21.8055 14.8596 21.5826L14.6278 20.1006ZM9.51294 8.33688C11.6191 7.90854 13.7955 7.90854 15.9016 8.33688L16.2006 6.86697C13.8972 6.39851 11.5174 6.39851 9.214 6.86697L9.51294 8.33688ZM10.038 19.9835C8.26356 19.706 6.79094 18.5522 6.14797 16.9718L4.75855 17.537C5.60803 19.6251 7.5336 21.11 9.80617 21.4655L10.038 19.9835ZM15.6084 21.4655C17.8809 21.11 19.8065 19.6251 20.656 17.5371L19.2666 16.9718C18.6236 18.5522 17.151 19.706 15.3766 19.9835L15.6084 21.4655ZM16.1777 8.39303C17.8985 8.74298 19.2441 9.9919 19.6772 11.5928L21.1252 11.201C20.5371 9.02744 18.7278 7.38094 16.4767 6.92312L16.1777 8.39303ZM8.93789 6.92312C6.68679 7.38094 4.87745 9.02745 4.2894 11.201L5.73734 11.5928C6.17045 9.99191 7.5161 8.74298 9.23684 8.39303L8.93789 6.92312Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    <path d="M12.7073 13.5L12.7073 15.5" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round"/>
</svg>
                </div>
                <p class="text-sm text-zinc-900 dark:text-neutral-50">Usamos seus dados de forma segura para garantir a sua satisfação:</p>
            </div>
            <hr class="border-black/[0.16] dark:border-white/[0.16]">
            <div class="flex items-center gap-3 p-3">
                <ul>
                    <li class="flex items-center gap-3">
                        <div>
                            <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M20.8797 10.1867C20.6603 10.0092 20.2952 9.71311 20.2495 9.57278C20.203 9.42703 20.3231 8.95806 20.3952 8.67898C20.5681 8.00534 20.7836 7.16734 20.3006 6.50766C19.82 5.85263 18.9557 5.79525 18.2611 5.74872C17.9735 5.72857 17.4913 5.69677 17.3696 5.6084C17.2464 5.51925 17.0611 5.06266 16.9502 4.78901C16.6766 4.11071 16.365 3.3417 15.6045 3.09674C14.8479 2.84946 14.1564 3.28744 13.5479 3.6727C13.2797 3.84168 12.8758 4.09752 12.7068 4.09752C12.5448 4.09752 12.1456 3.83783 11.8805 3.66574C11.2952 3.2851 10.5634 2.81378 9.7921 3.07582C9.03317 3.33397 8.72467 4.09829 8.45102 4.77116C8.34095 5.04247 8.15798 5.49518 8.03242 5.58744C7.90993 5.67812 7.41923 5.71069 7.12619 5.73007C6.39364 5.77968 5.56341 5.83552 5.09674 6.49597C4.63861 7.14481 4.844 7.94481 5.0254 8.65102C5.09674 8.93164 5.21765 9.40142 5.17423 9.54171C5.12773 9.67581 4.76648 9.97273 4.55097 10.1502C4.00593 10.5999 3.32764 11.1588 3.32764 11.9961C3.32764 12.8278 3.99278 13.3806 4.52686 13.824C4.75864 14.0162 5.10824 14.3069 5.15554 14.4511C5.20204 14.5938 5.08113 15.0573 5.00826 15.3341C4.83151 16.0139 4.61058 16.8604 5.11213 17.5256C5.60129 18.1721 6.46175 18.2294 7.154 18.2759C7.44162 18.2961 7.92301 18.3271 8.0455 18.4163C8.16798 18.5055 8.35249 18.9612 8.46333 19.2349C8.73775 19.9132 9.04859 20.6822 9.80984 20.9279C9.96255 20.9783 10.1137 21 10.261 21C10.844 21 11.3819 20.659 11.8672 20.3535C12.1346 20.1845 12.5378 19.9287 12.7068 19.9287C12.8719 19.9287 13.2688 20.1814 13.5308 20.3489C14.1122 20.7186 14.8378 21.1822 15.6075 20.9186C16.3657 20.6605 16.6742 19.8969 16.9479 19.2225C17.0579 18.952 17.2409 18.4985 17.3665 18.4062C17.4897 18.3156 17.9773 18.283 18.2688 18.2636C18.9959 18.214 19.8207 18.159 20.2944 17.5086C20.7712 16.8551 20.5665 16.0465 20.3859 15.3341C20.3154 15.0558 20.1975 14.5915 20.2402 14.4519C20.2866 14.3178 20.6479 14.0209 20.8626 13.8434C21.4084 13.3938 22.0867 12.8341 22.0867 11.9968C22.0867 11.1666 21.4169 10.6232 20.8797 10.1867ZM19.8774 12.648C19.4239 13.0209 18.9549 13.4077 18.7704 13.962C18.582 14.5263 18.7355 15.131 18.8835 15.7155C18.9556 16.0008 19.0765 16.4775 19.0603 16.5759C18.9424 16.6643 18.4564 16.6977 18.1657 16.7163C17.5897 16.755 16.937 16.7985 16.451 17.155C15.9696 17.5077 15.7362 18.0837 15.5106 18.6403C15.4006 18.9147 15.2145 19.3744 15.1378 19.4442C14.9967 19.4442 14.6021 19.1907 14.3657 19.0403C13.8781 18.7303 13.3254 18.3775 12.7075 18.3775C12.0889 18.3775 11.5315 18.731 11.0385 19.0427C10.7997 19.1931 10.3998 19.4473 10.3145 19.4659C10.1944 19.3799 10.0114 18.9256 9.90132 18.6543C9.67343 18.0907 9.43777 17.5086 8.95172 17.1589C8.46878 16.8109 7.85325 16.7698 7.25714 16.7303C6.97729 16.7117 6.4556 16.6768 6.36099 16.6124C6.31292 16.4752 6.43464 16.0063 6.50828 15.7272C6.65169 15.1744 6.81528 14.5481 6.63077 13.976C6.44548 13.4047 5.95324 12.9946 5.51834 12.6333C5.30595 12.4566 4.90981 12.1271 4.87647 12.0078C4.91135 11.862 5.31833 11.5264 5.53692 11.3473C5.99039 10.9737 6.45941 10.5868 6.64392 10.0326C6.83385 9.46433 6.67726 8.85503 6.52686 8.26588C6.45398 7.98138 6.3315 7.5054 6.34081 7.41472C6.45941 7.32946 6.94157 7.29689 7.22996 7.27751C7.83537 7.23721 8.46252 7.19456 8.94857 6.83876C9.42997 6.48604 9.66332 5.91085 9.8889 5.35427C9.99897 5.07908 10.1858 4.62014 10.2571 4.55115C10.4005 4.55346 10.799 4.81238 11.037 4.96667C11.5284 5.28605 12.0866 5.64808 12.7075 5.64808C13.3254 5.64808 13.8843 5.29459 14.3758 4.98374C14.6145 4.83257 15.0145 4.5791 15.0998 4.56049C15.2192 4.64656 15.4029 5.1008 15.513 5.37211C15.7409 5.93492 15.9765 6.51707 16.4626 6.86668C16.9455 7.21552 17.5618 7.25659 18.1587 7.29612C18.4533 7.31628 18.9471 7.34962 19.0394 7.40542C19.0867 7.54186 18.9665 8.01318 18.8936 8.2938C18.7517 8.84884 18.5905 9.47752 18.7758 10.0512C18.9626 10.6287 19.4626 11.0341 19.9037 11.3915C20.1052 11.5558 20.4766 11.8559 20.5339 12C20.4789 12.1511 20.089 12.4728 19.8774 12.648Z" class="fill-[var(--theme-color)]"/>
    <path d="M17.1421 8.25906C16.7197 7.906 16.0958 7.96352 15.7457 8.38305L11.3234 13.6702L9.44199 11.7898C9.05419 11.402 8.42738 11.402 8.03963 11.7898C7.65183 12.1776 7.65183 12.8044 8.03963 13.1922L10.6877 15.8402C10.8731 16.0277 11.1261 16.1308 11.3889 16.1308C11.4028 16.1308 11.4177 16.1308 11.4315 16.1289C11.7112 16.117 11.9701 15.988 12.1486 15.7748L17.2661 9.65547C17.6172 9.235 17.5627 8.61016 17.1421 8.25906Z" class="fill-[var(--theme-color)]"/>
</svg>
                        </div>
                        <p class="text-sm text-zinc-900 dark:text-neutral-50">Enviar o seu comprovante de compra e pagamento;</p>
                    </li>
                    <li class="flex items-center gap-3">
                        <div>
                            <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M20.8797 10.1867C20.6603 10.0092 20.2952 9.71311 20.2495 9.57278C20.203 9.42703 20.3231 8.95806 20.3952 8.67898C20.5681 8.00534 20.7836 7.16734 20.3006 6.50766C19.82 5.85263 18.9557 5.79525 18.2611 5.74872C17.9735 5.72857 17.4913 5.69677 17.3696 5.6084C17.2464 5.51925 17.0611 5.06266 16.9502 4.78901C16.6766 4.11071 16.365 3.3417 15.6045 3.09674C14.8479 2.84946 14.1564 3.28744 13.5479 3.6727C13.2797 3.84168 12.8758 4.09752 12.7068 4.09752C12.5448 4.09752 12.1456 3.83783 11.8805 3.66574C11.2952 3.2851 10.5634 2.81378 9.7921 3.07582C9.03317 3.33397 8.72467 4.09829 8.45102 4.77116C8.34095 5.04247 8.15798 5.49518 8.03242 5.58744C7.90993 5.67812 7.41923 5.71069 7.12619 5.73007C6.39364 5.77968 5.56341 5.83552 5.09674 6.49597C4.63861 7.14481 4.844 7.94481 5.0254 8.65102C5.09674 8.93164 5.21765 9.40142 5.17423 9.54171C5.12773 9.67581 4.76648 9.97273 4.55097 10.1502C4.00593 10.5999 3.32764 11.1588 3.32764 11.9961C3.32764 12.8278 3.99278 13.3806 4.52686 13.824C4.75864 14.0162 5.10824 14.3069 5.15554 14.4511C5.20204 14.5938 5.08113 15.0573 5.00826 15.3341C4.83151 16.0139 4.61058 16.8604 5.11213 17.5256C5.60129 18.1721 6.46175 18.2294 7.154 18.2759C7.44162 18.2961 7.92301 18.3271 8.0455 18.4163C8.16798 18.5055 8.35249 18.9612 8.46333 19.2349C8.73775 19.9132 9.04859 20.6822 9.80984 20.9279C9.96255 20.9783 10.1137 21 10.261 21C10.844 21 11.3819 20.659 11.8672 20.3535C12.1346 20.1845 12.5378 19.9287 12.7068 19.9287C12.8719 19.9287 13.2688 20.1814 13.5308 20.3489C14.1122 20.7186 14.8378 21.1822 15.6075 20.9186C16.3657 20.6605 16.6742 19.8969 16.9479 19.2225C17.0579 18.952 17.2409 18.4985 17.3665 18.4062C17.4897 18.3156 17.9773 18.283 18.2688 18.2636C18.9959 18.214 19.8207 18.159 20.2944 17.5086C20.7712 16.8551 20.5665 16.0465 20.3859 15.3341C20.3154 15.0558 20.1975 14.5915 20.2402 14.4519C20.2866 14.3178 20.6479 14.0209 20.8626 13.8434C21.4084 13.3938 22.0867 12.8341 22.0867 11.9968C22.0867 11.1666 21.4169 10.6232 20.8797 10.1867ZM19.8774 12.648C19.4239 13.0209 18.9549 13.4077 18.7704 13.962C18.582 14.5263 18.7355 15.131 18.8835 15.7155C18.9556 16.0008 19.0765 16.4775 19.0603 16.5759C18.9424 16.6643 18.4564 16.6977 18.1657 16.7163C17.5897 16.755 16.937 16.7985 16.451 17.155C15.9696 17.5077 15.7362 18.0837 15.5106 18.6403C15.4006 18.9147 15.2145 19.3744 15.1378 19.4442C14.9967 19.4442 14.6021 19.1907 14.3657 19.0403C13.8781 18.7303 13.3254 18.3775 12.7075 18.3775C12.0889 18.3775 11.5315 18.731 11.0385 19.0427C10.7997 19.1931 10.3998 19.4473 10.3145 19.4659C10.1944 19.3799 10.0114 18.9256 9.90132 18.6543C9.67343 18.0907 9.43777 17.5086 8.95172 17.1589C8.46878 16.8109 7.85325 16.7698 7.25714 16.7303C6.97729 16.7117 6.4556 16.6768 6.36099 16.6124C6.31292 16.4752 6.43464 16.0063 6.50828 15.7272C6.65169 15.1744 6.81528 14.5481 6.63077 13.976C6.44548 13.4047 5.95324 12.9946 5.51834 12.6333C5.30595 12.4566 4.90981 12.1271 4.87647 12.0078C4.91135 11.862 5.31833 11.5264 5.53692 11.3473C5.99039 10.9737 6.45941 10.5868 6.64392 10.0326C6.83385 9.46433 6.67726 8.85503 6.52686 8.26588C6.45398 7.98138 6.3315 7.5054 6.34081 7.41472C6.45941 7.32946 6.94157 7.29689 7.22996 7.27751C7.83537 7.23721 8.46252 7.19456 8.94857 6.83876C9.42997 6.48604 9.66332 5.91085 9.8889 5.35427C9.99897 5.07908 10.1858 4.62014 10.2571 4.55115C10.4005 4.55346 10.799 4.81238 11.037 4.96667C11.5284 5.28605 12.0866 5.64808 12.7075 5.64808C13.3254 5.64808 13.8843 5.29459 14.3758 4.98374C14.6145 4.83257 15.0145 4.5791 15.0998 4.56049C15.2192 4.64656 15.4029 5.1008 15.513 5.37211C15.7409 5.93492 15.9765 6.51707 16.4626 6.86668C16.9455 7.21552 17.5618 7.25659 18.1587 7.29612C18.4533 7.31628 18.9471 7.34962 19.0394 7.40542C19.0867 7.54186 18.9665 8.01318 18.8936 8.2938C18.7517 8.84884 18.5905 9.47752 18.7758 10.0512C18.9626 10.6287 19.4626 11.0341 19.9037 11.3915C20.1052 11.5558 20.4766 11.8559 20.5339 12C20.4789 12.1511 20.089 12.4728 19.8774 12.648Z" class="fill-[var(--theme-color)]"/>
    <path d="M17.1421 8.25906C16.7197 7.906 16.0958 7.96352 15.7457 8.38305L11.3234 13.6702L9.44199 11.7898C9.05419 11.402 8.42738 11.402 8.03963 11.7898C7.65183 12.1776 7.65183 12.8044 8.03963 13.1922L10.6877 15.8402C10.8731 16.0277 11.1261 16.1308 11.3889 16.1308C11.4028 16.1308 11.4177 16.1308 11.4315 16.1289C11.7112 16.117 11.9701 15.988 12.1486 15.7748L17.2661 9.65547C17.6172 9.235 17.5627 8.61016 17.1421 8.25906Z" class="fill-[var(--theme-color)]"/>
</svg>
                        </div>
                        <p class="text-sm text-zinc-900 dark:text-neutral-50">Ativar sua devolução caso não fique satisfeito;</p>
                    </li>
                    <li class="flex items-center gap-3">
                        <div>
                            <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M20.8797 10.1867C20.6603 10.0092 20.2952 9.71311 20.2495 9.57278C20.203 9.42703 20.3231 8.95806 20.3952 8.67898C20.5681 8.00534 20.7836 7.16734 20.3006 6.50766C19.82 5.85263 18.9557 5.79525 18.2611 5.74872C17.9735 5.72857 17.4913 5.69677 17.3696 5.6084C17.2464 5.51925 17.0611 5.06266 16.9502 4.78901C16.6766 4.11071 16.365 3.3417 15.6045 3.09674C14.8479 2.84946 14.1564 3.28744 13.5479 3.6727C13.2797 3.84168 12.8758 4.09752 12.7068 4.09752C12.5448 4.09752 12.1456 3.83783 11.8805 3.66574C11.2952 3.2851 10.5634 2.81378 9.7921 3.07582C9.03317 3.33397 8.72467 4.09829 8.45102 4.77116C8.34095 5.04247 8.15798 5.49518 8.03242 5.58744C7.90993 5.67812 7.41923 5.71069 7.12619 5.73007C6.39364 5.77968 5.56341 5.83552 5.09674 6.49597C4.63861 7.14481 4.844 7.94481 5.0254 8.65102C5.09674 8.93164 5.21765 9.40142 5.17423 9.54171C5.12773 9.67581 4.76648 9.97273 4.55097 10.1502C4.00593 10.5999 3.32764 11.1588 3.32764 11.9961C3.32764 12.8278 3.99278 13.3806 4.52686 13.824C4.75864 14.0162 5.10824 14.3069 5.15554 14.4511C5.20204 14.5938 5.08113 15.0573 5.00826 15.3341C4.83151 16.0139 4.61058 16.8604 5.11213 17.5256C5.60129 18.1721 6.46175 18.2294 7.154 18.2759C7.44162 18.2961 7.92301 18.3271 8.0455 18.4163C8.16798 18.5055 8.35249 18.9612 8.46333 19.2349C8.73775 19.9132 9.04859 20.6822 9.80984 20.9279C9.96255 20.9783 10.1137 21 10.261 21C10.844 21 11.3819 20.659 11.8672 20.3535C12.1346 20.1845 12.5378 19.9287 12.7068 19.9287C12.8719 19.9287 13.2688 20.1814 13.5308 20.3489C14.1122 20.7186 14.8378 21.1822 15.6075 20.9186C16.3657 20.6605 16.6742 19.8969 16.9479 19.2225C17.0579 18.952 17.2409 18.4985 17.3665 18.4062C17.4897 18.3156 17.9773 18.283 18.2688 18.2636C18.9959 18.214 19.8207 18.159 20.2944 17.5086C20.7712 16.8551 20.5665 16.0465 20.3859 15.3341C20.3154 15.0558 20.1975 14.5915 20.2402 14.4519C20.2866 14.3178 20.6479 14.0209 20.8626 13.8434C21.4084 13.3938 22.0867 12.8341 22.0867 11.9968C22.0867 11.1666 21.4169 10.6232 20.8797 10.1867ZM19.8774 12.648C19.4239 13.0209 18.9549 13.4077 18.7704 13.962C18.582 14.5263 18.7355 15.131 18.8835 15.7155C18.9556 16.0008 19.0765 16.4775 19.0603 16.5759C18.9424 16.6643 18.4564 16.6977 18.1657 16.7163C17.5897 16.755 16.937 16.7985 16.451 17.155C15.9696 17.5077 15.7362 18.0837 15.5106 18.6403C15.4006 18.9147 15.2145 19.3744 15.1378 19.4442C14.9967 19.4442 14.6021 19.1907 14.3657 19.0403C13.8781 18.7303 13.3254 18.3775 12.7075 18.3775C12.0889 18.3775 11.5315 18.731 11.0385 19.0427C10.7997 19.1931 10.3998 19.4473 10.3145 19.4659C10.1944 19.3799 10.0114 18.9256 9.90132 18.6543C9.67343 18.0907 9.43777 17.5086 8.95172 17.1589C8.46878 16.8109 7.85325 16.7698 7.25714 16.7303C6.97729 16.7117 6.4556 16.6768 6.36099 16.6124C6.31292 16.4752 6.43464 16.0063 6.50828 15.7272C6.65169 15.1744 6.81528 14.5481 6.63077 13.976C6.44548 13.4047 5.95324 12.9946 5.51834 12.6333C5.30595 12.4566 4.90981 12.1271 4.87647 12.0078C4.91135 11.862 5.31833 11.5264 5.53692 11.3473C5.99039 10.9737 6.45941 10.5868 6.64392 10.0326C6.83385 9.46433 6.67726 8.85503 6.52686 8.26588C6.45398 7.98138 6.3315 7.5054 6.34081 7.41472C6.45941 7.32946 6.94157 7.29689 7.22996 7.27751C7.83537 7.23721 8.46252 7.19456 8.94857 6.83876C9.42997 6.48604 9.66332 5.91085 9.8889 5.35427C9.99897 5.07908 10.1858 4.62014 10.2571 4.55115C10.4005 4.55346 10.799 4.81238 11.037 4.96667C11.5284 5.28605 12.0866 5.64808 12.7075 5.64808C13.3254 5.64808 13.8843 5.29459 14.3758 4.98374C14.6145 4.83257 15.0145 4.5791 15.0998 4.56049C15.2192 4.64656 15.4029 5.1008 15.513 5.37211C15.7409 5.93492 15.9765 6.51707 16.4626 6.86668C16.9455 7.21552 17.5618 7.25659 18.1587 7.29612C18.4533 7.31628 18.9471 7.34962 19.0394 7.40542C19.0867 7.54186 18.9665 8.01318 18.8936 8.2938C18.7517 8.84884 18.5905 9.47752 18.7758 10.0512C18.9626 10.6287 19.4626 11.0341 19.9037 11.3915C20.1052 11.5558 20.4766 11.8559 20.5339 12C20.4789 12.1511 20.089 12.4728 19.8774 12.648Z" class="fill-[var(--theme-color)]"/>
    <path d="M17.1421 8.25906C16.7197 7.906 16.0958 7.96352 15.7457 8.38305L11.3234 13.6702L9.44199 11.7898C9.05419 11.402 8.42738 11.402 8.03963 11.7898C7.65183 12.1776 7.65183 12.8044 8.03963 13.1922L10.6877 15.8402C10.8731 16.0277 11.1261 16.1308 11.3889 16.1308C11.4028 16.1308 11.4177 16.1308 11.4315 16.1289C11.7112 16.117 11.9701 15.988 12.1486 15.7748L17.2661 9.65547C17.6172 9.235 17.5627 8.61016 17.1421 8.25906Z" class="fill-[var(--theme-color)]"/>
</svg>
                        </div>
                        <p class="text-sm text-zinc-900 dark:text-neutral-50">Acompanhar o andamento do seu pedido.</p>
                    </li>
                </ul>
            </div>
        </div>
        <hr class="border-4 border-black/[0.04] dark:border-white/[0.04] my-4">
    </div>
</div>
        <!-- Shipping Form -->
        <template x-if="checkoutConfig.hasFreight">
            <div id="shipping_form" class="mt-8 mx-3">
    <template x-if="checkoutConfig.form_step_enum === 1">
        <div class="mb-8 xl:mx-8">
            <div class="flex items-center justify-between ">
                <div class="flex items-center justify-center text-base leading-4 font-black rounded-lg w-8 h-8 bg-[var(--theme-color)] text-[var(--contrast-color)]">2</div>
                <div class="flex items-center gap-1.5">
                    <p class="text-lg leading-8 font-medium text-zinc-900 dark:text-neutral-50">Frete e destino</p>
                </div>
            </div>
        </div>
    </template>
    <template x-if="checkoutConfig.form_step_enum === 3">
        <div class="my-8 xl:mx-8">
            <div class="flex items-center justify-between ">
                <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Frete e destino</p>
            </div>
        </div>
    </template>
    <template x-if="checkoutConfig.form_step_enum === 2">
        <div class="my-8 xl:mx-8">
            <div class="flex items-center justify-between ">
                <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Frete e destino</p>
                <div class="flex items-center gap-1.5">
                    <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50">Ambiente seguro</p>
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.4627 4.7991C21.4265 4.54124 21.2395 4.32912 20.9866 4.2594L12.8838 2.02392C12.7683 1.99203 12.6463 1.99203 12.5307 2.02392L4.42791 4.2594C4.1751 4.32912 3.98808 4.54115 3.95188 4.7991C3.90489 5.13436 2.83274 13.0556 5.58272 16.9962C8.32945 20.9321 12.3815 21.9407 12.5526 21.9818C12.6034 21.994 12.6553 22 12.7073 22C12.7593 22 12.8111 21.9939 12.862 21.9818C13.0332 21.9407 17.0852 20.9321 19.8318 16.9962C22.5818 13.0557 21.5097 5.13444 21.4627 4.7991ZM17.9325 9.42362L12.4056 14.9066C12.277 15.0342 12.1084 15.0981 11.9398 15.0981C11.7712 15.0981 11.6025 15.0343 11.4739 14.9066L8.05669 11.5165C7.93309 11.394 7.8637 11.2277 7.8637 11.0544C7.8637 10.8811 7.93318 10.7148 8.05669 10.5923L8.7352 9.91914C8.9925 9.66397 9.40967 9.66388 9.66688 9.91914L11.9398 12.174L16.3223 7.82614C16.4459 7.70352 16.6135 7.63468 16.7882 7.63468C16.9629 7.63468 17.1305 7.70352 17.254 7.82614L17.9325 8.49926C18.1898 8.75451 18.1898 9.16837 17.9325 9.42362Z" class="fill-[var(--theme-color)]"/>
</svg>
                </div>
            </div>
        </div>
    </template>
    <div class="space-y-2 xl:mx-8">
        <div>
            <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.zip_code !== ''" x-bind:class="{ '!border-red-600 dark:!border-red-500' : formShipping.error_message }"
>
    <input
    autocomplete="not"
    class="w-full py-[0.875rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" placeholder="CEP" x-model="formShipping.zip_code" x-mask="99999-999" id="zip_code" name="zip_code" x-ref="zip_code" @keyup="validation.formShipping.zip_code.validate(context)" @blur="validation.formShipping.zip_code.validate(context, false, true)" @input="validateAndFetchFreight" @keyup.enter="getFreight(); getAddress($refs.zip_code.value)"
>
                <button type="button" class="text-sm  leading-4 font-black text-zinc-900 dark:text-neutral-50 hover:text-zinc-500 hover:dark:text-neutral-300 transition-colors ring-0" x-bind:class="'disabled:!text-zinc-600 disabled:cursor-not-allowed'" x-bind:disabled="formShipping.zip_code.length < 9" @click="getFreight(); getAddress($refs.zip_code.value)">
    <svg x-show="formShipping.is_loading" class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="fill-[var(--theme-color)]" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>
                    <p x-show="!formShipping.is_loading">Buscar</p>
</button>
</div>
            <p class="text-sm text-red-600 ml-5 font-medium" x-text="formShipping.error_message" x-show="formShipping.error_message">
    
</p>
            <a
                class="text-[0.8125rem] font-medium text-zinc-900 dark:text-neutral-50 hover:text-zinc-500 hover:dark:text-neutral-300 transition-colors ml-5 mt-1 underline"
                rel="noopener noreferrer"
                target="_blank"
                href="https://buscacepinter.correios.com.br/app/endereco/index.php?t"
            >
                Não sei meu CEP
            </a>
        </div>
        <div class="flex flex-col mt-8 gap-2" x-show="formShipping.show_form">
            <div class="flex flex-col gap-1 p-1 rounded-lg border-2 border-black/[0.16] dark:border-white/[0.16] my-8" x-data="{ selected: null }">
                <template x-if="freight_list.length === 0">
                    <button
                        type="button"
                        class="group flex items-center p-4 rounded border-2 w-full border-red-500 dark:border-rose-300"
                    >
                        <div class="flex flex-col flex-1 items-start">
                            <p class="text-[0.8125rem] font-black text-red-500 dark:text-rose-300" x-text="'Sem frete cadastrado para este CEP'"></p>
                        </div>
                    </button>
                </template>
                <template x-for="item in freight_list">
                    <button
                        type="button"
                        class="group flex items-center p-2 rounded border-2 w-full hover:!border-[var(--theme-color)] pr-4"
                        :class="freight.code === item.code ? 'border-[var(--theme-color)]' : 'border-black/[0.16] dark:border-white/[0.16] bg-transparent'"
                        @click="selected = item.code; freight = item; cart.totals.freight = item.price;"
                    >
                        <div class="w-12 h-12 flex justify-center items-center">
                        <span
                            class='w-6 h-6 border-2 rounded-full flex items-center justify-center group-hover:border-[var(--theme-color)]'
                            :class="freight.code === item.code ? 'border-[var(--theme-color)]' : 'border-black/[0.16] dark:border-white/[0.16]'"
                        >
                            <span x-cloak x-show="freight.code === item.code" class='w-4 h-4 bg-[var(--theme-color)] rounded-full'></span>
                        </span>
                        </div>
                        <div class="flex flex-col flex-1 items-start">
                            <p class="text-[0.8125rem] font-black text-zinc-900 dark:text-neutral-50" x-html="item.price === 0 ? 'Grátis' : getCurrencySymbol() + formatCurrencyPrice(item.price / 100)"></p>
                            <p class="text-[0.8125rem] font-medium text-zinc-900 dark:text-neutral-50" x-text="item.description"></p>
                        </div>
                        <p class="text-[0.8125rem] font-normal text-zinc-900 dark:text-neutral-50" x-text="item.delivery_time ? item.delivery_time+' úteis' : ''"></p>
                    </button>
                </template>
            </div>
            <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.street !== ''"
>
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g id="icon-location">
        <path id="Vector" d="M20 11.1755C20 15.6907 16.4183 21 12 21C7.58172 21 4 15.6907 4 11.1755C4 6.66029 7.58172 3 12 3C16.4183 3 20 6.66029 20 11.1755Z" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" />
        <path id="Vector_2" d="M9.5 10.5C9.5 9.11929 10.6193 8 12 8C13.3807 8 14.5 9.11929 14.5 10.5C14.5 11.8807 13.3807 13 12 13C10.6193 13 9.5 11.8807 9.5 10.5Z" class="stroke-zinc-900 dark:stroke-neutral-50" />
    </g>
</svg>
                <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" id="street" placeholder="Endereço" name="street" x-ref="street" x-model="formShipping.street" x-bind:disabled="shippingLockedStreet" @keyup="validation.formShipping.street.validate(context)" @blur="validation.formShipping.street.validate(context, false, true)" maxLength="255"
>
</div>
            <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-text="formShipping.error_message" x-show="formShipping.error_message">
    
</p>
            <div class="flex items-start gap-2 justify-between">
                <div class="w-full">
                    <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:class="formShipping.no_number ? '!border-black/[0.16] dark:border-white/[0.16]' : ''"
>
    <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 !py-[0.875rem]" id="number" placeholder="Número" type="text" x-bind:disabled="formShipping.no_number ? true : false" name="street_number" x-ref="street_number" x-model="formShipping.street_number" @keyup="validation.formShipping.street_number.validate(context)" @blur="validation.formShipping.street_number.validate(context, false, true)" maxlength="9"
>
                        <label class="flex items-center text-xs font-bold text-zinc-900 dark:text-neutral-50">
                            S/N
                            <div class="w-12 h-12 flex items-center justify-center -mr-4">
                                <input
                                    type="checkbox"
                                    class="w-4.5 h-4.5 border-2 rounded-[3px] bg-white dark:bg-neutral-800 border-[var(--theme-color)] text-[var(--theme-color)] focus:ring-0"
                                    x-bind:class="formShipping.no_number && '!bg-[var(--theme-color)]'"
                                    x-model="formShipping.no_number"
                                >
                            </div>
                        </label>
</div>
                    <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formShipping.street_number.isValid && formShipping.no_number !== true" x-text="validation.formShipping.street_number.errorMessage">
    
</p>
                </div>
                <div class="w-full">
                    <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.neighborhood !== ''"
>
    <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" id="neighborhood" placeholder="Bairro" name="neighborhood" x-ref="neighborhood" x-model="formShipping.neighborhood" x-bind:disabled="shippingLockedNeighborhood" @keyup="validation.formShipping.neighborhood.validate(context)" @blur="validation.formShipping.neighborhood.validate(context, false, true)" maxLength="255"
>
</div>
                    <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formShipping.neighborhood.isValid" x-text="validation.formShipping.neighborhood.errorMessage">
    
</p>
                </div>
            </div>
            <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.complement !== ''"
>
    <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" placeholder="Complemento" name="complement" x-ref="complement" x-model="formShipping.complement" @keyup="validation.formShipping.complement.validate(context)" @blur="validation.formShipping.complement.validate(context, false, true)" maxLength="255"
>
</div>
            <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formShipping.complement.isValid" x-text="validation.formShipping.complement.errorMessage">
    
</p>
            <div class="flex items-center gap-2 justify-between">
                <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.city !== ''"
>
    <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" id="city" placeholder="Cidade" name="city" x-ref="city" x-model="formShipping.city" x-bind:disabled="shippingLockedCity" maxLength="255"
>
</div>
                <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.state !== ''"
>
    <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" id="state" placeholder="Estado" name="state" x-ref="state" x-model="formShipping.state" x-bind:disabled="shippingLockedState" x-on:input="formShipping.state = formShipping.state.toUpperCase().replace(/[^A-Z]/g, '').substring(0, 2)" maxlength="2" pattern="[A-Z]{2}" title="Insira exatamente 2 letras maiúsculas."
>
</div>
            </div>
            <div>
                <span class="flex items-center gap-2 mb-5 mt-4 text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50 ml-4">
                    Outra pessoa vai receber?
                    <button @click="formShipping.receiver_flag = true" class="font-bold underline">
                        Clique aqui
                    </button>
                </span>
                <div class="flex items-center gap-4 justify-between" x-cloak x-show="formShipping.receiver_flag" x-collapse>
                    <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.receiver !== ''"
>
    <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" placeholder="Nome do recebedor" name="receiver" x-ref="receiver" x-model="formShipping.receiver" @keyup="validation.formShipping.receiver.validate(context)" @blur="validation.formShipping.receiver.validate(context, false, true)"
>
</div>
                    <button
                        class="w-10 h-10 flex items-center justify-center"
                        @click="clearReceiver"
                    >
                        <svg width="24" height="24" class="fill-black dark:fill-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path id="Vector" d="M19 6H5C4.73478 6 4.48043 6.10536 4.29289 6.29289C4.10536 6.48043 4 6.73478 4 7C4 7.26522 4.10536 7.51957 4.29289 7.70711C4.48043 7.89464 4.73478 8 5 8V17.591C5.00106 18.4948 5.36056 19.3613 5.99964 20.0004C6.63872 20.6394 7.5052 20.9989 8.409 21H15.591C16.4948 20.9989 17.3613 20.6394 18.0004 20.0004C18.6394 19.3613 18.9989 18.4948 19 17.591V8C19.2652 8 19.5196 7.89464 19.7071 7.70711C19.8946 7.51957 20 7.26522 20 7C20 6.73478 19.8946 6.48043 19.7071 6.29289C19.5196 6.10536 19.2652 6 19 6ZM17 17.591C16.9997 17.9646 16.8512 18.3228 16.587 18.587C16.3228 18.8512 15.9646 18.9997 15.591 19H8.409C8.03539 18.9997 7.67716 18.8512 7.41298 18.587C7.1488 18.3228 7.00026 17.9646 7 17.591V8H17V17.591Z" class="fill-black dark:fill-white" />
    <path id="Vector_2" d="M10 5H14C14.2652 5 14.5196 4.89464 14.7071 4.70711C14.8946 4.51957 15 4.26522 15 4C15 3.73478 14.8946 3.48043 14.7071 3.29289C14.5196 3.10536 14.2652 3 14 3H10C9.73478 3 9.48043 3.10536 9.29289 3.29289C9.10536 3.48043 9 3.73478 9 4C9 4.26522 9.10536 4.51957 9.29289 4.70711C9.48043 4.89464 9.73478 5 10 5Z" class="fill-black dark:fill-white" fill-opacity="0.64" />
    <path id="Vector_3" d="M10 16C10.2652 16 10.5196 15.8946 10.7071 15.7071C10.8946 15.5196 11 15.2652 11 15V12C11 11.7348 10.8946 11.4804 10.7071 11.2929C10.5196 11.1054 10.2652 11 10 11C9.73478 11 9.48043 11.1054 9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12V15C9 15.2652 9.10536 15.5196 9.29289 15.7071C9.48043 15.8946 9.73478 16 10 16Z" class="fill-black dark:fill-white" fill-opacity="0.64" />
    <path id="Vector_4" d="M14 16C14.2652 16 14.5196 15.8946 14.7071 15.7071C14.8946 15.5196 15 15.2652 15 15V12C15 11.7348 14.8946 11.4804 14.7071 11.2929C14.5196 11.1054 14.2652 11 14 11C13.7348 11 13.4804 11.1054 13.2929 11.2929C13.1054 11.4804 13 11.7348 13 12V15C13 15.2652 13.1054 15.5196 13.2929 15.7071C13.4804 15.8946 13.7348 16 14 16Z" class="fill-black dark:fill-white" fill-opacity="0.64" />
</svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
            <div class="my-8">
                <hr class="border-4 border-black/[0.04] dark:border-white/[0.04] my-6">
            </div>
        </template>
        <!-- Payment Form -->
        <div id="payment_form" class="mt-8 mx-3" x-cloak>
    <template x-if="checkoutConfig.form_step_enum === 1">
        <div class="mb-8 xl:mx-8">
            <div class="flex items-center justify-between ">
                <div class="flex items-center justify-center text-base leading-4 font-black rounded-lg w-8 h-8 bg-[var(--theme-color)] text-[var(--contrast-color)]">
                    2
                </div>
                <div class="flex items-center gap-1.5">
                    <p class="text-lg leading-8 font-medium text-zinc-900 dark:text-neutral-50">Opções de pagamento</p>
                </div>
            </div>
        </div>
    </template>
    <template x-if="checkoutConfig.form_step_enum === 2">
        <div class="my-8 xl:mx-8">
            <div class="flex items-center justify-between ">
                <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Opções de pagamento</p>
                <div class="flex items-center gap-1.5">
                    <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50">Ambiente seguro</p>
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.4627 4.7991C21.4265 4.54124 21.2395 4.32912 20.9866 4.2594L12.8838 2.02392C12.7683 1.99203 12.6463 1.99203 12.5307 2.02392L4.42791 4.2594C4.1751 4.32912 3.98808 4.54115 3.95188 4.7991C3.90489 5.13436 2.83274 13.0556 5.58272 16.9962C8.32945 20.9321 12.3815 21.9407 12.5526 21.9818C12.6034 21.994 12.6553 22 12.7073 22C12.7593 22 12.8111 21.9939 12.862 21.9818C13.0332 21.9407 17.0852 20.9321 19.8318 16.9962C22.5818 13.0557 21.5097 5.13444 21.4627 4.7991ZM17.9325 9.42362L12.4056 14.9066C12.277 15.0342 12.1084 15.0981 11.9398 15.0981C11.7712 15.0981 11.6025 15.0343 11.4739 14.9066L8.05669 11.5165C7.93309 11.394 7.8637 11.2277 7.8637 11.0544C7.8637 10.8811 7.93318 10.7148 8.05669 10.5923L8.7352 9.91914C8.9925 9.66397 9.40967 9.66388 9.66688 9.91914L11.9398 12.174L16.3223 7.82614C16.4459 7.70352 16.6135 7.63468 16.7882 7.63468C16.9629 7.63468 17.1305 7.70352 17.254 7.82614L17.9325 8.49926C18.1898 8.75451 18.1898 9.16837 17.9325 9.42362Z" class="fill-[var(--theme-color)]"/>
</svg>
                </div>
            </div>
        </div>
    </template>
    <div class="flex items-center justify-between gap-2 xl:mx-8">
        <template x-if="checkoutConfig.credit_card_flag">
            <button
                class="relative flex w-full justify-center items-center gap-1 h-14 border-[0.1875rem] rounded-[var(--border-radius)] border-black/[0.16] hover:border-black/[0.08] dark:border-white/[0.16] dark:hover:border-white/[0.08] transition-colors"
                x-bind:class="{ '!border-[var(--theme-color)]  cursor-default' : formPayment.payment_method === 2 }"
                @click="formPayment.payment_method = 2; totalDiscountAutomatic()"
            >
                <svg x-bind:data-active="formPayment.payment_method === 2" class="group" width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M4.8335 9H21.8335" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M7.0835 16.7539H8.8335" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M11.021 16.7539H14.521" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M7.8295 4H17.8285C21.0325 4 21.8335 4.82872 21.8335 8.13418V15.8657C21.8335 19.1712 21.0325 19.9999 17.8375 19.9999H7.8295C4.6345 20.0093 3.8335 19.1806 3.8335 15.8752V8.13418C3.8335 4.82872 4.6345 4 7.8295 4Z" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
</svg>
                <p
                    class="text-black/[0.64] dark:text-white/[0.64] text-sm font-black"
                    x-bind:class="{ '!text-zinc-900 dark:!text-neutral-50' : formPayment.payment_method === 2 }"
                >Cartão</p>
                <div x-text="formPayment.credit_card_automatic_discount+'% '" x-show="formPayment.credit_card_automatic_discount > 0" class="absolute -bottom-[50%] left-[50%] -translate-x-[50%] -translate-y-[50%] rounded-[var(--border-radius)] bg-[var(--theme-color)] text-[var(--contrast-color)] py-1 px-2 text-xs font-bold">
    <p ></p>
</div>
            </button>
        </template>
        <template x-if="checkoutConfig.pix_flag">
            <button
                class="relative flex w-full justify-center items-center gap-1 h-14 border-[0.1875rem] rounded-[var(--border-radius)] border-black/[0.16] hover:border-black/[0.08] dark:border-white/[0.16] dark:hover:border-white/[0.08] transition-colors"
                x-bind:class="{ '!border-[var(--theme-color)]  cursor-default': formPayment.payment_method === 3 }"
                @click="formPayment.payment_method = 3; totalDiscountAutomatic()"
            >
                <svg x-bind:data-active="formPayment.payment_method === 3" class="group" width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_1918_13812)">
            <mask id="mask0_1918_13812" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="2" y="2" width="21" height="20">
                <path d="M22.5391 2H2.5V22H22.5391V2Z" fill="white" />
            </mask>
            <g mask="url(#mask0_1918_13812)">
                <path d="M7.91257 17.7935C8.47903 17.6276 8.99946 17.3214 9.42834 16.8925L12.3532 13.9677C12.3685 13.9524 12.3933 13.9524 12.4085 13.9677L15.3451 16.9042C15.8191 17.3782 16.4049 17.7024 17.0411 17.8529L14.2171 20.6769C13.275 21.5912 11.7409 21.5911 10.7989 20.6768L7.91257 17.7935ZM10.9332 11.647L10.9489 11.6607C11.0943 11.7879 11.2633 11.9061 11.4501 12.002C11.2562 12.0973 11.0759 12.2243 10.9179 12.3832C10.9175 12.3836 10.9172 12.3839 10.9169 12.3842L7.92592 15.3713C7.61128 15.659 7.26416 15.8 6.90729 15.8H5.92119L3.83376 13.7132L3.83349 13.713C2.89079 12.7717 2.89079 11.2431 3.83349 10.3018L3.83414 10.3012L5.92151 8.21095H6.90729C7.26408 8.21095 7.61116 8.35185 7.92576 8.63952L10.9332 11.647ZM13.8432 12.3787C13.686 12.2215 13.5065 12.0956 13.3137 12.0011C13.4996 11.9053 13.668 11.7874 13.8128 11.6607L13.8285 11.647L16.8546 8.62082C16.855 8.62046 16.8553 8.62015 16.8557 8.6198C17.1229 8.35581 17.4929 8.20312 17.8662 8.20312H19.0823L21.1807 10.3015C22.122 11.2429 22.122 12.772 21.1807 13.7133L19.0823 15.8117H17.8662C17.4928 15.8117 17.1235 15.6589 16.8569 15.3924L13.8432 12.3787Z" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.25245" />
                <path d="M9.42837 7.11072C8.99949 6.68184 8.47906 6.37561 7.9126 6.20974L10.7989 3.32642C11.741 2.41209 13.275 2.41201 14.2171 3.32626L17.0412 6.15033C16.405 6.30078 15.8191 6.62497 15.3451 7.09898L12.4086 10.0356C12.3933 10.0508 12.3685 10.0508 12.3532 10.0356L9.42837 7.11072Z" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.25245" />
            </g>
        </g>
        <defs>
            <clipPath id="clip0_1918_13812">
                <rect width="20.0391" height="20" class="fill-black/[0.64] dark:fill-white/[0.64] group-data-[active=true]:fill-zinc-900 dark:group-data-[active=true]:fill-neutral-50" transform="translate(2.5 2)" />
            </clipPath>
        </defs>
    </svg>

                <p
                    class="text-black/[0.64] dark:text-white/[0.64] text-sm font-black"
                    x-bind:class="{ '!text-zinc-900 dark:!text-neutral-50' : formPayment.payment_method === 3 }"
                >Pix</p>
                <div x-text="checkoutConfig.pix_automatic_discount+'%'" x-show="checkoutConfig.pix_automatic_discount > 0" class="absolute -bottom-[50%] left-[50%] -translate-x-[50%] -translate-y-[50%] rounded-[var(--border-radius)] bg-[var(--theme-color)] text-[var(--contrast-color)] py-1 px-2 text-xs font-bold">
    <p ></p>
</div>
            </button>
        </template>
        <template x-if="checkoutConfig.billet_flag">
            <button
                class="relative flex w-full justify-center items-center gap-1 h-14 border-[0.1875rem] rounded-[var(--border-radius)] border-black/[0.16] hover:border-black/[0.08] dark:border-white/[0.16] dark:hover:border-white/[0.08] transition-colors"
                x-bind:class="{ '!border-[var(--theme-color)] cursor-default' : formPayment.payment_method === 1 }"
                @click="formPayment.payment_method = 1; totalDiscountAutomatic()"
            >
                <svg x-bind:data-active="formPayment.payment_method === 1" class="group" width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M6.41699 19.7076V4.29238L8.79489 5.65118L9.16699 5.86381L9.5391 5.65118L12.667 3.86381L15.7949 5.65118L16.167 5.86381L16.5391 5.65118L18.917 4.29238V19.7076L16.5391 18.3488L16.167 18.1362L15.7949 18.3488L12.667 20.1362L9.5391 18.3488L9.16699 18.1362L8.79489 18.3488L6.41699 19.7076Z" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.5" />
    <line x1="9.66699" y1="9.25" x2="15.667" y2="9.25" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.5" />
    <line x1="9.66699" y1="12.25" x2="15.667" y2="12.25" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.5" />
    <line x1="9.66699" y1="15.25" x2="15.667" y2="15.25" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.5" />
</svg>
                <p
                    class="text-black/[0.64] dark:text-white/[0.64] text-sm font-black"
                    x-bind:class="{ '!text-zinc-900 dark:!text-neutral-50' : formPayment.payment_method === 1 }"
                >Boleto</p>
                <div x-text="checkoutConfig.billet_automatic_discount+'%'" x-show="checkoutConfig.billet_automatic_discount > 0" class="absolute -bottom-[50%] left-[50%] -translate-x-[50%] -translate-y-[50%] rounded-[var(--border-radius)] bg-[var(--theme-color)] text-[var(--contrast-color)] py-1 px-2 text-xs font-bold">
    <p ></p>
</div>
            </button>
        </template>
    </div>
    <template x-if="formPayment.payment_method === 2">
        <div id="payment-credit-card-container" class="mt-8 xl:mx-8">
    <template x-if="checkoutConfig.form_step_enum === 3">
        <div class="my-8">
            <div class="flex items-center justify-between ">
                <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Opções de pagamento</p>
                <div class="flex items-center gap-1.5">
                    <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50">Ambiente seguro</p>
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.4627 4.7991C21.4265 4.54124 21.2395 4.32912 20.9866 4.2594L12.8838 2.02392C12.7683 1.99203 12.6463 1.99203 12.5307 2.02392L4.42791 4.2594C4.1751 4.32912 3.98808 4.54115 3.95188 4.7991C3.90489 5.13436 2.83274 13.0556 5.58272 16.9962C8.32945 20.9321 12.3815 21.9407 12.5526 21.9818C12.6034 21.994 12.6553 22 12.7073 22C12.7593 22 12.8111 21.9939 12.862 21.9818C13.0332 21.9407 17.0852 20.9321 19.8318 16.9962C22.5818 13.0557 21.5097 5.13444 21.4627 4.7991ZM17.9325 9.42362L12.4056 14.9066C12.277 15.0342 12.1084 15.0981 11.9398 15.0981C11.7712 15.0981 11.6025 15.0343 11.4739 14.9066L8.05669 11.5165C7.93309 11.394 7.8637 11.2277 7.8637 11.0544C7.8637 10.8811 7.93318 10.7148 8.05669 10.5923L8.7352 9.91914C8.9925 9.66397 9.40967 9.66388 9.66688 9.91914L11.9398 12.174L16.3223 7.82614C16.4459 7.70352 16.6135 7.63468 16.7882 7.63468C16.9629 7.63468 17.1305 7.70352 17.254 7.82614L17.9325 8.49926C18.1898 8.75451 18.1898 9.16837 17.9325 9.42362Z" class="fill-[var(--theme-color)]"/>
</svg>
                </div>
            </div>
        </div>
    </template>
        <div class="credit-card-container">
            <div class="credit-card-preview my-10">
                <section
        class='w-67.5 h-42 bg-transparent perspective mx-auto'
>
    <div
            class="relative preserve-3d w-full h-full duration-1000"
            x-on:flip.window="$event.detail == 0 ? formPayment.credit_cards[0].flip_credit_card = !formPayment.credit_cards[0].flip_credit_card : '' "
            x-bind:class="formPayment.credit_cards[0].flip_credit_card ? 'flip-credit-card' : ''"
    >
        <div class='absolute backface-hidden bg-[var(--theme-color)] w-full h-full  px-4 py-6 rounded-2xl bg-credit-card flex flex-col justify-between'>
            <div class='flex justify-between items-start'>
                <div class='w-full flex justify-end'>
                    <img class="flag-credit-card" src="https://checkout.ligafacil.online/images/flags/fake-card.svg" alt="ícone bandeira de cartão">
                </div>
            </div>
            <input
                    class='text-[var(--contrast-color)] font-bold uppercase text-sm border-none bg-transparent w-full'
                    type='text'
                    x-model="formPayment.credit_cards[0].full_name.length === 0 ? 'Nome impresso no cartão' : formPayment.credit_cards[0].full_name"
                    x-on:card-name.window="$event.detail[0] == 0 ? formPayment.credit_cards[0].full_name = $event.detail[1] : ''"
                    disabled
            >
            <div class='font-bold text-base'>
                <input
                        id="card-number"
                        class='p-0 w-full border-none bg-transparent text-center text-lg text-[var(--contrast-color)]'
                        x-mask="9999 9999 9999 9999"
                        type='text'
                        x-model="formPayment.credit_cards[0].number.length === 0 ? '0000 0000 0000 0000' : formPayment.credit_cards[0].number"
                        x-on:card-number.window="$event.detail[0] == 0 ? formPayment.credit_cards[0].number = $event.detail[1] : ''"
                        disabled
                >
            </div>
            <p class='text-xs'>
                <input
                        class='border-none bg-transparent text-xs text-[var(--contrast-color)]'
                        type='text'
                        x-model="formPayment.credit_cards[0].expiration.length === 0 ? 'MM / AA' : formPayment.credit_cards[0].expiration"
                        x-on:card-expiration.window="$event.detail[0] == 0 ? formPayment.credit_cards[0].expiration = $event.detail[1] : ''"
                        disabled
                >
            </p>
        </div>
        <div class='absolute flip-credit-card backface-hidden bg-[var(--theme-color)] w-full h-full mx-auto rounded-2xl bg-credit-card flex flex-col'>
            <div class='w-full h-8 bg-black mt-3.5 mb-2.5'></div>
            <div class='mx-8 text-right'>
                <p class='text-[8px] text-[var(--contrast-color)] leading-[8px] tracking-[0.02rem] pr-2'>Código de
                    <br /> segurança:</p>
                <div class='bg-white pr-2 mt-1 h-6 flex items-center justify-end'>
                    <input
                            class='border-none text-base font-black text-right w-full p-0 text-secondary'
                            x-mask="000"
                            type='text'
                            x-model="formPayment.credit_cards[0].cvv.length === 0 ? '000' : formPayment.credit_cards[0].cvv"
                            x-on:cod-sec.window="formPayment.credit_cards[0].cvv = $event.detail"
                            disabled
                    >
                </div>
                <p class='text-[4px] text-[var(--contrast-color)] font-medium text-left mt-4'>O código de segurança do cartão (CVV) é um número de três dígitos impresso na maioria dos cartões de crédito e débito. Quando você insere os dados do seu cartão, como medida de segurança adicional, solicitamos que também forneça o código de segurança do cartão (CVV).</p>
            </div>
        </div>
    </div>
</section>
            </div>
            <div class="flex flex-col gap-2">
                <div
    x-ref="creditCardNumber" x-bind:data-filled="formPayment.credit_cards[0].number !== ''" id="input-card-number-0" index="0" placeholder="0000 0000 0000 0000" x-mask="9999 9999 9999 9999" x-model="formPayment.credit_cards[0].number" x-on:keyup="getFlagCreditCard($el)"
    class="flex flex-col w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]"
>
            <label for="input-card-number-0" class="text-[0.8125rem] font-bold leading-5 text-black/[0.64] dark:text-white/[0.64] flex-1 pt-2">
            Número do cartão
        </label>
        <div class="w-full flex items-center">
                        <input
            x-ref="creditCardNumber" x-bind:data-filled="formPayment.credit_cards[0].number !== ''" id="input-card-number-0" index="0" placeholder="0000 0000 0000 0000" x-mask="9999 9999 9999 9999" x-model="formPayment.credit_cards[0].number" x-on:keyup="getFlagCreditCard($el)"
            type="text"
            class="w-full h-[3.25rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50"
        >
            
        
    </div>
</div>
                <div class="flex items-center gap-2 justify-between">
                    <div class="w-7/12">
                        <div
    x-bind:data-filled="formPayment.credit_cards[0].expiration !== ''" id="credit_card_expiration-0" index="0" name="credit_card_expiration-0" placeholder="10/28" x-mask="99/99" x-model="formPayment.credit_cards[0].expiration" x-on:keyup="$dispatch('card-expiration', [0,formPayment.credit_cards[0].expiration])"
    class="flex flex-col w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]"
>
            <label for="credit_card_expiration-0" class="text-[0.8125rem] font-bold leading-5 text-black/[0.64] dark:text-white/[0.64] flex-1 pt-2">
            Expiração
        </label>
        <div class="w-full flex items-center">
                        <input
            x-bind:data-filled="formPayment.credit_cards[0].expiration !== ''" id="credit_card_expiration-0" index="0" name="credit_card_expiration-0" placeholder="10/28" x-mask="99/99" x-model="formPayment.credit_cards[0].expiration" x-on:keyup="$dispatch('card-expiration', [0,formPayment.credit_cards[0].expiration])"
            type="text"
            class="w-full h-[3.25rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50"
        >
            
        
    </div>
</div>
                    </div>
                    <div class="w-5/12">
                        <div
    x-bind:data-filled="formPayment.credit_cards[0].cvv !== ''" id="cardCvv-0" index="0" placeholder="000" x-mask="9999" x-model="formPayment.credit_cards[0].cvv" x-on:keyup="$dispatch('formPayment.credit_cards[0].cvv', formPayment.credit_cards[0].cvv)" x-on:focus="$dispatch('flip',0)" x-on:blur="$dispatch('flip',0)"
    class="flex flex-col w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]"
>
            <label for="cardCvv-0" class="text-[0.8125rem] font-bold leading-5 text-black/[0.64] dark:text-white/[0.64] flex-1 pt-2">
            CVV
        </label>
        <div class="w-full flex items-center">
                        <input
            x-bind:data-filled="formPayment.credit_cards[0].cvv !== ''" id="cardCvv-0" index="0" placeholder="000" x-mask="9999" x-model="formPayment.credit_cards[0].cvv" x-on:keyup="$dispatch('formPayment.credit_cards[0].cvv', formPayment.credit_cards[0].cvv)" x-on:focus="$dispatch('flip',0)" x-on:blur="$dispatch('flip',0)"
            type="text"
            class="w-full h-[3.25rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50"
        >
            
                        <div
        class="flex items-center gap-4 relative cursor-pointer z-20"
        x-data="{ tooltip: false }"
        x-on:mouseover="tooltip = true"
        x-on:mouseleave="tooltip = false"
>
            <div class="w-6 h-6" stroke="stroke-gray-600 dark:stroke-zinc-400">
    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_139_8790)">
            <path d="M12 3C7.03747 3 3 7.03747 3 12C3 16.9626 7.03747 21 12 21C16.9626 21 21 16.9626 21 12C21 7.03747 16.9625 3 12 3ZM12.5854 17.3399C12.1579 17.4112 11.3071 17.5893 10.875 17.625C10.5093 17.6553 10.1642 17.446 9.95381 17.1455C9.74289 16.845 9.69235 16.4605 9.81757 16.1155L11.5188 11.4375H9.75C9.74848 10.4628 10.4796 9.74605 11.4148 9.47098C11.861 9.33968 12.6925 9.16 13.125 9.18754C13.3841 9.20402 13.8358 9.3666 14.0462 9.66711C14.2571 9.96758 14.3077 10.3521 14.1824 10.6971L12.4812 15.375H14.2495C14.2498 16.3487 13.5459 17.1799 12.5854 17.3399ZM13.125 8.62502C12.5037 8.62502 12 8.12128 12 7.50001C12 6.87867 12.5037 6.375 13.125 6.375C13.7463 6.375 14.25 6.87867 14.25 7.50001C14.25 8.12131 13.7464 8.62502 13.125 8.62502Z" class="fill-gray-600 dark:fill-zinc-400"/>
        </g>
        <defs>
            <clipPath id="clip0_139_8790">
                <rect width="18" height="18" fill="white" transform="translate(3 3)"/>
            </clipPath>
        </defs>
    </svg>
</div>
        <div
            x-cloak x-show="tooltip"
            class="absolute w-[200px] right-10"
    >
        <div
                class="p-4 text-sm rounded-xl font-medium relative flex items-center flex-wrap '<?php echo bg-gray-600 dark:bg-zinc-400 text-white dark:text-zinc-900; ?>'"
        >
            <div
                    class="absolute rounded-sm rotate-45 h-6 w-6 '<?php echo bg-gray-600 dark:bg-zinc-400 text-white dark:text-zinc-900; ?>' -right-1"
            ></div>
            <p class="relative z-50" x-html="'Código de segurança de 3 ou 4 dígitos presente na parte de trás do cartão.'"></p>
        </div>
    </div>
</div>

        
    </div>
</div>
                    </div>
                </div>
                <div
    x-bind:data-filled="formPayment.credit_cards[0].full_name !== ''" id="credit_card_full_name-0" index="0" placeholder="Nome impresso no cartão" x-on:keyup="$dispatch('card-name', [0,formPayment.credit_cards[0].full_name])" x-model="formPayment.credit_cards[0].full_name"
    class="flex flex-col w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]"
>
            <label for="credit_card_full_name-0" class="text-[0.8125rem] font-bold leading-5 text-black/[0.64] dark:text-white/[0.64] flex-1 pt-2">
            Nome impresso no cartão
        </label>
        <div class="w-full flex items-center">
                        <input
            x-bind:data-filled="formPayment.credit_cards[0].full_name !== ''" id="credit_card_full_name-0" index="0" placeholder="Nome impresso no cartão" x-on:keyup="$dispatch('card-name', [0,formPayment.credit_cards[0].full_name])" x-model="formPayment.credit_cards[0].full_name"
            type="text"
            class="w-full h-[3.25rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50"
        >
            
        
    </div>
</div>
                <div
    x-show="formPayment.multi_credit_card == 1" id="input-card-total-0" index="0" x-model="formPayment.credit_cards[0].amount" placeholder="1200,00" @blur="setCardValue($el)" @input="formPayment.credit_cards[0].amount = maskCurrency($event.target.value)"
    class="flex flex-col w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]"
>
            <label for="input-card-total-0" class="text-[0.8125rem] font-bold leading-5 text-black/[0.64] dark:text-white/[0.64] flex-1 pt-2">
            Valor
        </label>
        <div class="w-full flex items-center">
                            <span  class="text-base text-zinc-900 dark:text-neutral-50 font-bold" x-html="'R$'">  </span>
                <input
            x-show="formPayment.multi_credit_card == 1" id="input-card-total-0" index="0" x-model="formPayment.credit_cards[0].amount" placeholder="1200,00" @blur="setCardValue($el)" @input="formPayment.credit_cards[0].amount = maskCurrency($event.target.value)"
            type="text"
            class="w-full h-[3.25rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50"
        >
            
                        <div
        class="flex items-center gap-4 relative cursor-pointer z-20"
        x-data="{ tooltip: false }"
        x-on:mouseover="tooltip = true"
        x-on:mouseleave="tooltip = false"
>
            <div class="w-6 h-6" stroke="stroke-gray-600 dark:stroke-zinc-400">
    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_139_8790)">
            <path d="M12 3C7.03747 3 3 7.03747 3 12C3 16.9626 7.03747 21 12 21C16.9626 21 21 16.9626 21 12C21 7.03747 16.9625 3 12 3ZM12.5854 17.3399C12.1579 17.4112 11.3071 17.5893 10.875 17.625C10.5093 17.6553 10.1642 17.446 9.95381 17.1455C9.74289 16.845 9.69235 16.4605 9.81757 16.1155L11.5188 11.4375H9.75C9.74848 10.4628 10.4796 9.74605 11.4148 9.47098C11.861 9.33968 12.6925 9.16 13.125 9.18754C13.3841 9.20402 13.8358 9.3666 14.0462 9.66711C14.2571 9.96758 14.3077 10.3521 14.1824 10.6971L12.4812 15.375H14.2495C14.2498 16.3487 13.5459 17.1799 12.5854 17.3399ZM13.125 8.62502C12.5037 8.62502 12 8.12128 12 7.50001C12 6.87867 12.5037 6.375 13.125 6.375C13.7463 6.375 14.25 6.87867 14.25 7.50001C14.25 8.12131 13.7464 8.62502 13.125 8.62502Z" class="fill-gray-600 dark:fill-zinc-400"/>
        </g>
        <defs>
            <clipPath id="clip0_139_8790">
                <rect width="18" height="18" fill="white" transform="translate(3 3)"/>
            </clipPath>
        </defs>
    </svg>
</div>
        <div
            x-cloak x-show="tooltip"
            class="absolute w-[200px] right-10"
    >
        <div
                class="p-4 text-sm rounded-xl font-medium relative flex items-center flex-wrap '<?php echo bg-gray-600 dark:bg-zinc-400 text-white dark:text-zinc-900; ?>'"
        >
            <div
                    class="absolute rounded-sm rotate-45 h-6 w-6 '<?php echo bg-gray-600 dark:bg-zinc-400 text-white dark:text-zinc-900; ?>' -right-1"
            ></div>
            <p class="relative z-50" x-html="'Valor mínimo de  R$ 5,00.'"></p>
        </div>
    </div>
</div>

        
    </div>
</div>
                <div x-show="businessCurrency === 'brl'">
                    <div class="relative">
    <div
        class="relative flex flex-col w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 hover:border-[var(--theme-color)] dark:hover:border-[var(--theme-color)] transition-colors"
    >
                    <div class="text-[0.8125rem] font-bold leading-5 text-black/[0.64] dark:text-white/[0.64] flex-1 pt-2">
                Parcelamento
            </div>
                <button
            type="button"
            class="w-full flex items-center justify-between py-[0.875rem]"
            @click="installmentsOpen[0] = !installmentsOpen[0]"
            @click.outside="installmentsOpen[0] = false"
        >
            <div class="flex items-center gap-1 text-base font-bold text-zinc-900 dark:text-neutral-50">
                <p x-text="installmentIndex[0] + 'x'"></p>
                <p>de</p>
                <p x-text="installmentsData[0][(installmentIndex[0] - 1)]?.value+'*'"></p>
                <p x-show="installmentIndex[0] <= formPayment.credit_card.interest_free_installments" x-text="'Sem juros'"></p>
            </div>
            <div >
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14.5 11L12 13.5L9.5 11" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5"
                  stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </div>

        </button>
    </div>
    <div x-cloak x-show="installmentsOpen[0]" class="absolute left-0 flex flex-col w-full z-10 bg-white dark:bg-neutral-800 px-1 py-2 rounded-b-lg h-60 overflow-auto">
        <template x-for="(installment, index) in getInstallments(0)" :key="index">
            <label @click="installmentIndex[0] = installment.amount">
                <input class="hidden" type="radio" name="installments" x-model="installments[0]" x-bind:value="installment.amount">
                <div class="flex items-center gap-1 px-4 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-zinc-900 rounded label-checked:bg-gray-100 dark:label-checked:bg-zinc-900">
                    <span class="text-base font-medium text-zinc-900 dark:text-neutral-50" x-text="installment.amount + 'x'"></span>
                    <span class="text-base font-medium text-zinc-900 dark:text-neutral-50">de</span>
                    <p class="text-base font-medium text-zinc-900 dark:text-neutral-50" x-text="installment.value"></p>
                    <p class="text-base font-medium text-zinc-900 dark:text-neutral-50" x-show="installment.amount <= formPayment.credit_card.interest_free_installments" x-text="'Sem juros'"></p>
                </div>
            </label>
        </template>
    </div>
    <span
        class="font-medium text-[0.8125rem] text-black/[0.64] dark:text-white/[0.64] leading-4 mx-5"
        x-text="displayTaxOnCreditCard(formPayment.credit_cards[0].gateway_installment_tax)"
    ></span>
</div>
                </div>
            </div>
        </div>

        </div>
    </template>
</div>
        <!-- Card de progresso para frete grátis -->
        <div class="xl:mx-8">
            <!-- Card de progresso para frete grátis -->
<div x-show="process_getting_free_shipping.has_free_shipping && process_getting_free_shipping.free_shipping_progress < 100" class="leading-4 mt-6 rounded-xl border border-orange-100 dark:border-orange-300/10 bg-white dark:bg-neutral-900 p-4 shadow">
    <div class="relative w-full bg-neutral-200 dark:bg-neutral-400 rounded-full h-3 overflow-visible">
    <div class="bg-[var(--theme-color)] h-3 rounded-full transition-all duration-500" :style="{ width: process_getting_free_shipping.free_shipping_progress + '%' }"></div>
    <div class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-1/4 bg-[var(--theme-color)] text-white rounded-full shadow-lg w-7 h-7 flex items-center justify-center z-10">
        <div>
    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2.5 2C2.22386 2 2 2.22386 2 2.5C2 2.77614 2.22386 3 2.5 3H2.7457C2.96894 3 3.16513 3.14799 3.22646 3.36264L4.81202 8.91208C4.996 9.55603 5.58458 10 6.2543 10H10.823C11.4363 10 11.9879 9.62657 12.2157 9.05709L13.69 5.37139C13.9527 4.71453 13.4689 4 12.7615 4H4.44858L4.18798 3.08792C4.004 2.44397 3.41542 2 2.7457 2H2.5ZM6.5 14C7.32843 14 8 13.3284 8 12.5C8 11.6716 7.32843 11 6.5 11C5.67157 11 5 11.6716 5 12.5C5 13.3284 5.67157 14 6.5 14ZM10.5 14C11.3284 14 12 13.3284 12 12.5C12 11.6716 11.3284 11 10.5 11C9.67157 11 9 11.6716 9 12.5C9 13.3284 9.67157 14 10.5 14Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    </svg>
</div>
    </div>
</div>

    <div class="mt-4 text-center">
        <span class="text-sm text-zinc-800 dark:text-neutral-200">
            <span><strong x-text="'Faltam ' + getCurrencySymbol() + formatCurrencyPrice(process_getting_free_shipping.remaining_free_shipping / 100)"></strong> para você ganhar <strong class="text-[var(--theme-color)]">FRETE GRÁTIS!</strong></span>
        </span>
    </div>
</div>
        </div>
        <!-- Order Bump -->
        <template x-if="orderBumps.length > 0">
    <div class="pt-10 mx-3 md:px-6">
        <div
            class="bg-white dark:bg-neutral-800 rounded-2xl border border-dashed border-[var(--theme-color)] pt-6 relative flex flex-col min-h-[413px] overflow-x-hidden"
            x-bind:class="{ 'px-6': checkoutConfig.order_bump_position_enum === 1, 'px-2': checkoutConfig.order_bump_position_enum === 2}"
            id="default-carousel"
            data-carousel="static"
        >
            <div x-bind:class="{ 'px-4': checkoutConfig.order_bump_position_enum === 2}">
                <div>
    <div class="flex justify-center md:justify-between gap-2 py-4 px-3 bg-[var(--theme-color)] rounded-lg">
        <div class="flex items-center justify-center gap-2">
            <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.156 14.0517C20.8811 10.4723 19.2146 8.22933 17.7444 6.24998C16.383 4.41754 15.2073 2.83514 15.2073 0.500856C15.2073 0.313356 15.1023 0.141981 14.9358 0.0560595C14.7688 -0.030378 14.5681 -0.0162217 14.4163 0.094122C12.2083 1.67409 10.366 4.33701 9.72243 6.87783C9.27567 8.64675 9.21656 10.6354 9.20826 11.9488C7.1692 11.5132 6.70729 8.46319 6.70242 8.42995C6.67945 8.27175 6.58279 8.13408 6.44217 8.05889C6.30009 7.98468 6.13307 7.97929 5.98903 8.05059C5.8821 8.10234 3.36449 9.38156 3.21801 14.4891C3.20774 14.659 3.20728 14.8295 3.20728 14.9999C3.20728 19.9619 7.24485 23.9992 12.2073 23.9992C12.2141 23.9997 12.2214 24.0007 12.2273 23.9992C12.2293 23.9992 12.2312 23.9992 12.2336 23.9992C17.1839 23.985 21.2073 19.9531 21.2073 14.9999C21.2073 14.7503 21.156 14.0517 21.156 14.0517ZM12.2073 22.9993C10.553 22.9993 9.20728 21.5658 9.20728 19.8037C9.20728 19.7437 9.20681 19.6831 9.21117 19.6089C9.23118 18.8658 9.37232 18.3585 9.5271 18.0211C9.81717 18.6442 10.3357 19.2169 11.178 19.2169C11.4544 19.2169 11.678 18.9932 11.678 18.7169C11.678 18.0051 11.6927 17.1838 11.8699 16.4426C12.0276 15.7854 12.4046 15.0862 12.8821 14.5258C13.0945 15.2533 13.5086 15.8421 13.9129 16.4167C14.4915 17.2389 15.0897 18.089 15.1947 19.5386C15.201 19.6245 15.2074 19.711 15.2074 19.8037C15.2073 21.5658 13.8616 22.9993 12.2073 22.9993Z" class="fill-[var(--contrast-color)]" />
</svg>
            <p class="text-[var(--contrast-color)] text-xl leading-6 font-black">0 oferta exclusiva</p>
        </div>
        <template x-if="checkoutConfig.order_bump_position_enum === 2">
            <div class="items-center hidden md:flex">
                <button type="button"
                        class="flex items-center justify-center h-full cursor-pointer group focus:outline-none"
                        data-carousel-prev>
                    <span
                        class="inline-flex items-center justify-center w-10 h-10">
                        <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M14.7073 17L12.2073 14.5L9.70728 12L14.7073 7" stroke="white" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round"/>
    <path d="M14.7354 7L9.73535 12L12.2354 14.5" stroke="white" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round"/>
</svg>
                        <span class="sr-only">Anterior</span>
                    </span>
                </button>
                <button type="button"
                        class="flex items-center justify-center h-full cursor-pointer group focus:outline-none"
                        data-carousel-next>
                    <span
                        class="inline-flex items-center justify-center w-10 h-10">
                        <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M9.70728 17L12.2073 14.5L14.7073 12L9.70728 7" stroke="white" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round"/>
    <path d="M9.73535 7.00024L14.7354 12.0002L12.2354 14.5002" stroke="white" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round"/>
</svg>
                        <span class="sr-only">Próximo</span>
                    </span>
                </button>
            </div>
        </template>
    </div>
</div>            </div>
            <div class="my-6">
                <p class="text-zinc-900 dark:text-neutral-50 text-lg leading-6 px-4 text-center" x-html="checkoutConfig.order_bump_text"></p>
            </div>
            <template x-if="checkoutConfig.order_bump_position_enum === 2">
                <div class="relative rounded-lg min-h-[338px] md:min-h-[338px] z-10">
                    <!-- MOBILE: scroll lateral -->
                    <div class="md:hidden">
                        <div class="flex gap-4 overflow-x-auto snap-x snap-mandatory scroll-smooth no-scrollbar px-2">
                            <template x-for="(order_bump, index_of_order_bump) in orderBumps" :key="index_of_order_bump" >
                                <div class="snap-center shrink-0 w-[calc(100%_-_0px)]">
                                    <div
    x-data="{
        selectedVariant() {
            return order_bump.product.primaryVariants?.find(variant => variant.selected_flag);
        },
        selectedCode() {
            return this.selectedVariant()?.code || order_bump.product.product_code;
        }
    }"
    class="rounded-2xl border-[var(--theme-color)] px-2 py-2 bg-gray-100 dark:bg-zinc-900"
    x-bind:class="{
        'border-4': hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code),
        'border': !hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code),
        'mr-4': checkoutConfig.order_bump_position_enum === 2
    }"
>
    <div class="bg-white dark:bg-neutral-800 rounded-xl p-4 shadow-md">
        <div
            class="flex flex-col md:flex-row"
            x-bind:class="{
                'md:gap-4 items-start': order_bump.product.image_url,
            }"
        >
            <div class="flex items-center gap-2">
                <template x-if="order_bump.product.image_url">
                    <div class="w-10 h-10">
                        <img x-bind:src="order_bump.product.image_url" x-bind:alt="order_bump.product.title"
                            class="rounded overflow-hidden">
                    </div>
                </template>
                <p class="text-zinc-900 dark:text-neutral-50 text-lg block md:hidden leading-6 font-bold" x-text="order_bump.product.title"></p>
            </div>
            <div class="w-full space-y-3">
                <p class="text-zinc-900 dark:text-neutral-50 text-lg hidden md:block leading-6 font-bold" x-text="order_bump.product.title"></p>

                <!-- Variantes Primárias -->
                <template x-if="order_bump.product.primaryVariants && order_bump.product.primaryVariants.length > 0">
                    <div class="flex gap-2 flex-wrap mt-2">
                        <template x-for="variant in order_bump.product.primaryVariants" :key="variant.code">
                            <!-- Botão de Variante -->
                            <button
                                :class="{
                                    'w-20 h-20 p-2 -ml-2.5': variant.image_url,
                                    'w-auto h-auto px-4 py-2 -ml-4.5': !variant.image_url,
                                    'flex items-center justify-center rounded-lg': true
                                }"
                                @click="hasSelectedOffer(order_bump.product.product_code, variant.code)
                                    ? removePickUpOffer(order_bump.product.product_code, variant.code)
                                    : pickUpOffer(order_bump.product, order_bump.order_bump_code)"
                            >
                                <!-- Exibe a imagem, se disponível -->
                                <template x-if="variant.image_url">
                                    <img x-bind:src="variant.image_url" x-bind:alt="variant.title" class="w-full h-full object-contain rounded-lg border-2"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(order_bump.product.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(order_bump.product.product_code, variant.code)
                                        }">
                                </template>

                                <!-- Exibe o texto, se não houver imagem -->
                                <template x-if="!variant.image_url">
                                    <span class="text-sm font-semibold text-center whitespace-nowrap overflow-hidden text-ellipsis border-2 flex items-center justify-center w-auto h-auto rounded-lg py-2 px-2.5"
                                        x-text="variant.tag"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(order_bump.product.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(order_bump.product.product_code, variant.code)
                                        }">
                                    </span>
                                </template>
                            </button>
                        </template>
                    </div>
                </template>

                <!-- Opções de tamanho, preço e botões -->
                <div class="flex xl:flex-col xl:!justify-start xl:!items-start gap-2 items-center justify-between">
                    <span class="flex items-center gap-2" x-show="order_bump.product.discount_value > 0">
                        <div class="text-xs leading-5 px-1.5 py-0.5 m-0 font-black text-[var(--contrast-color)] bg-[var(--theme-color)] uppercase rounded">De</div>
                        <div class="flex items-center text-base font-bold">
                        <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50 line-through" x-text="order_bump.product.primaryVariants && order_bump.product.primaryVariants.length > 0
                                    ? formatCurrencyPrice((order_bump.product.primaryVariants.find(v => v.selected_flag)?.amount ?? order_bump.product.amount) / 100)
                                    : formatCurrencyPrice((order_bump.product.amount ?? 0) / 100)"></p>
                        </div>
                    </span>

                    <span class="flex items-center gap-2">
                        <div class="text-xs leading-5 px-1.5 py-0.5 m-0 font-black text-[var(--contrast-color)] bg-[var(--theme-color)] uppercase rounded">Por</div>
                        <div class="flex items-center text-xl font-black">
                            <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50" x-text="(() => {
                                        const selectedVariant = order_bump.product.primaryVariants?.find(v => v.selected_flag);
                                        const discountValue = (order_bump.product.discount_value ?? 0) / 100;
                                        const discountTypeEnum = order_bump.product.discount_type_enum;

                                        // Primeiro verifica se existe uma variante selecionada e se ela tem o preço (amount).
                                        if (selectedVariant && selectedVariant.amount) {
                                            return formatCurrencyPrice(applyDiscountAmount(discountValue, selectedVariant.amount / 100, discountTypeEnum));
                                        }

                                        // Caso não exista um preço específico na variante, utiliza o preço do produto principal.
                                        const productAmount = (order_bump.product.amount ?? 0) / 100;
                                        return formatCurrencyPrice(applyDiscountAmount(discountValue, productAmount, discountTypeEnum));
                                    })()"></p>
                        </div>
                    </span>
                </div>
            </div>
        </div>
        <div class="flex justify-end pt-2 mt-3 overflow-x-hidden w-full">
            <button
                :disabled="order_bump.product.primaryVariants.length > 0 && !selectedVariant()"
                class="px-14 flex items-center gap-2 border-[var(--theme-color)] rounded-[var(--border-radius)] text-zinc-900 uppercase dark:text-neutral-50 text-sm leading-4 font-bold pl-3 pr-4 !py-2 border-2 disabled:opacity-50"
                x-bind:class="{
                    'bg-[var(--theme-color)] !text-[var(--contrast-color)]': hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)
                }"
                @click="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)
                    ? removePickUpOffer(order_bump.product.product_code, selectedVariant()?.code)
                    : pickUpOffer(order_bump.product, order_bump.order_bump_code)"
            >
                <div
                    class="flex items-center justify-center w-4.5 h-4.5 border-2 border-[var(--theme-color)] bg-white rounded-[3px]">
                    <svg class="stroke-[var(--theme-color)] stroke-[3]" x-show="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)" width="13" height="10" viewBox="0 0 13 10" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1.70728 4.73333L5.34364 9L11.7073 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </svg>


                </div>
                <p x-text="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code) ? `Oferta adicionada` : `Pegar oferta`"></p>
            </button>
        </div>
    </div>
    <div
        class="px-4 mt-4"
        x-bind:class="{
            'min-h-[94px]': checkoutConfig.order_bump_position_enum === 2,
            'mb-3': order_bump.description?.length < 100
        }"
        x-show="order_bump.description?.length > 0"
    >
        <p class="text-zinc-900 dark:text-neutral-50 text-lg leading-6" x-html="orderBumps[index_of_order_bump].description" x-collapse.min.50px="x-collapse.min.50px" x-show="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded"></p>
        <button
            class="my-3 text-sm font-bold text-zinc-900 dark:text-neutral-50"
            @click="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded = ! orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded"
            x-show="order_bump.description?.length > 58"
        >
            <span
                class="text-zinc-900 dark:text-neutral-50"
                x-text="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded ? 'Ver menos' : 'Ver mais'"></span>
        </button>
    </div>
</div>
                                </div>
                            </template>
                        </div>
                    </div>
                    <!-- DESKTOP: carousel -->
                    <div class="hidden md:block">
                        <template x-for="(order_bump, index_of_order_bump) in orderBumps">
                            <div class="hidden duration-700 ease-in-out h-full md:w-[104%]" data-carousel-item>
                                <div
    x-data="{
        selectedVariant() {
            return order_bump.product.primaryVariants?.find(variant => variant.selected_flag);
        },
        selectedCode() {
            return this.selectedVariant()?.code || order_bump.product.product_code;
        }
    }"
    class="rounded-2xl border-[var(--theme-color)] px-2 py-2 bg-gray-100 dark:bg-zinc-900"
    x-bind:class="{
        'border-4': hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code),
        'border': !hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code),
        'mr-4': checkoutConfig.order_bump_position_enum === 2
    }"
>
    <div class="bg-white dark:bg-neutral-800 rounded-xl p-4 shadow-md">
        <div
            class="flex flex-col md:flex-row"
            x-bind:class="{
                'md:gap-4 items-start': order_bump.product.image_url,
            }"
        >
            <div class="flex items-center gap-2">
                <template x-if="order_bump.product.image_url">
                    <div class="w-10 h-10">
                        <img x-bind:src="order_bump.product.image_url" x-bind:alt="order_bump.product.title"
                            class="rounded overflow-hidden">
                    </div>
                </template>
                <p class="text-zinc-900 dark:text-neutral-50 text-lg block md:hidden leading-6 font-bold" x-text="order_bump.product.title"></p>
            </div>
            <div class="w-full space-y-3">
                <p class="text-zinc-900 dark:text-neutral-50 text-lg hidden md:block leading-6 font-bold" x-text="order_bump.product.title"></p>

                <!-- Variantes Primárias -->
                <template x-if="order_bump.product.primaryVariants && order_bump.product.primaryVariants.length > 0">
                    <div class="flex gap-2 flex-wrap mt-2">
                        <template x-for="variant in order_bump.product.primaryVariants" :key="variant.code">
                            <!-- Botão de Variante -->
                            <button
                                :class="{
                                    'w-20 h-20 p-2 -ml-2.5': variant.image_url,
                                    'w-auto h-auto px-4 py-2 -ml-4.5': !variant.image_url,
                                    'flex items-center justify-center rounded-lg': true
                                }"
                                @click="hasSelectedOffer(order_bump.product.product_code, variant.code)
                                    ? removePickUpOffer(order_bump.product.product_code, variant.code)
                                    : pickUpOffer(order_bump.product, order_bump.order_bump_code)"
                            >
                                <!-- Exibe a imagem, se disponível -->
                                <template x-if="variant.image_url">
                                    <img x-bind:src="variant.image_url" x-bind:alt="variant.title" class="w-full h-full object-contain rounded-lg border-2"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(order_bump.product.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(order_bump.product.product_code, variant.code)
                                        }">
                                </template>

                                <!-- Exibe o texto, se não houver imagem -->
                                <template x-if="!variant.image_url">
                                    <span class="text-sm font-semibold text-center whitespace-nowrap overflow-hidden text-ellipsis border-2 flex items-center justify-center w-auto h-auto rounded-lg py-2 px-2.5"
                                        x-text="variant.tag"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(order_bump.product.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(order_bump.product.product_code, variant.code)
                                        }">
                                    </span>
                                </template>
                            </button>
                        </template>
                    </div>
                </template>

                <!-- Opções de tamanho, preço e botões -->
                <div class="flex xl:flex-col xl:!justify-start xl:!items-start gap-2 items-center justify-between">
                    <span class="flex items-center gap-2" x-show="order_bump.product.discount_value > 0">
                        <div class="text-xs leading-5 px-1.5 py-0.5 m-0 font-black text-[var(--contrast-color)] bg-[var(--theme-color)] uppercase rounded">De</div>
                        <div class="flex items-center text-base font-bold">
                        <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50 line-through" x-text="order_bump.product.primaryVariants && order_bump.product.primaryVariants.length > 0
                                    ? formatCurrencyPrice((order_bump.product.primaryVariants.find(v => v.selected_flag)?.amount ?? order_bump.product.amount) / 100)
                                    : formatCurrencyPrice((order_bump.product.amount ?? 0) / 100)"></p>
                        </div>
                    </span>

                    <span class="flex items-center gap-2">
                        <div class="text-xs leading-5 px-1.5 py-0.5 m-0 font-black text-[var(--contrast-color)] bg-[var(--theme-color)] uppercase rounded">Por</div>
                        <div class="flex items-center text-xl font-black">
                            <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50" x-text="(() => {
                                        const selectedVariant = order_bump.product.primaryVariants?.find(v => v.selected_flag);
                                        const discountValue = (order_bump.product.discount_value ?? 0) / 100;
                                        const discountTypeEnum = order_bump.product.discount_type_enum;

                                        // Primeiro verifica se existe uma variante selecionada e se ela tem o preço (amount).
                                        if (selectedVariant && selectedVariant.amount) {
                                            return formatCurrencyPrice(applyDiscountAmount(discountValue, selectedVariant.amount / 100, discountTypeEnum));
                                        }

                                        // Caso não exista um preço específico na variante, utiliza o preço do produto principal.
                                        const productAmount = (order_bump.product.amount ?? 0) / 100;
                                        return formatCurrencyPrice(applyDiscountAmount(discountValue, productAmount, discountTypeEnum));
                                    })()"></p>
                        </div>
                    </span>
                </div>
            </div>
        </div>
        <div class="flex justify-end pt-2 mt-3 overflow-x-hidden w-full">
            <button
                :disabled="order_bump.product.primaryVariants.length > 0 && !selectedVariant()"
                class="px-14 flex items-center gap-2 border-[var(--theme-color)] rounded-[var(--border-radius)] text-zinc-900 uppercase dark:text-neutral-50 text-sm leading-4 font-bold pl-3 pr-4 !py-2 border-2 disabled:opacity-50"
                x-bind:class="{
                    'bg-[var(--theme-color)] !text-[var(--contrast-color)]': hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)
                }"
                @click="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)
                    ? removePickUpOffer(order_bump.product.product_code, selectedVariant()?.code)
                    : pickUpOffer(order_bump.product, order_bump.order_bump_code)"
            >
                <div
                    class="flex items-center justify-center w-4.5 h-4.5 border-2 border-[var(--theme-color)] bg-white rounded-[3px]">
                    <svg class="stroke-[var(--theme-color)] stroke-[3]" x-show="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)" width="13" height="10" viewBox="0 0 13 10" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1.70728 4.73333L5.34364 9L11.7073 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </svg>


                </div>
                <p x-text="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code) ? `Oferta adicionada` : `Pegar oferta`"></p>
            </button>
        </div>
    </div>
    <div
        class="px-4 mt-4"
        x-bind:class="{
            'min-h-[94px]': checkoutConfig.order_bump_position_enum === 2,
            'mb-3': order_bump.description?.length < 100
        }"
        x-show="order_bump.description?.length > 0"
    >
        <p class="text-zinc-900 dark:text-neutral-50 text-lg leading-6" x-html="orderBumps[index_of_order_bump].description" x-collapse.min.50px="x-collapse.min.50px" x-show="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded"></p>
        <button
            class="my-3 text-sm font-bold text-zinc-900 dark:text-neutral-50"
            @click="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded = ! orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded"
            x-show="order_bump.description?.length > 58"
        >
            <span
                class="text-zinc-900 dark:text-neutral-50"
                x-text="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded ? 'Ver menos' : 'Ver mais'"></span>
        </button>
    </div>
</div>
                            </div>
                        </template>
                    </div>
                </div>
            </template>
            <template x-if="checkoutConfig.order_bump_position_enum === 1">
                <div x-bind:class="{ 'space-y-6': checkoutConfig.order_bump_position_enum === 1 }">
                    <template x-for="(order_bump, index_of_order_bump) in orderBumps">
                        <div
    x-data="{
        selectedVariant() {
            return order_bump.product.primaryVariants?.find(variant => variant.selected_flag);
        },
        selectedCode() {
            return this.selectedVariant()?.code || order_bump.product.product_code;
        }
    }"
    class="rounded-2xl border-[var(--theme-color)] px-2 py-2 bg-gray-100 dark:bg-zinc-900"
    x-bind:class="{
        'border-4': hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code),
        'border': !hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code),
        'mr-4': checkoutConfig.order_bump_position_enum === 2
    }"
>
    <div class="bg-white dark:bg-neutral-800 rounded-xl p-4 shadow-md">
        <div
            class="flex flex-col md:flex-row"
            x-bind:class="{
                'md:gap-4 items-start': order_bump.product.image_url,
            }"
        >
            <div class="flex items-center gap-2">
                <template x-if="order_bump.product.image_url">
                    <div class="w-10 h-10">
                        <img x-bind:src="order_bump.product.image_url" x-bind:alt="order_bump.product.title"
                            class="rounded overflow-hidden">
                    </div>
                </template>
                <p class="text-zinc-900 dark:text-neutral-50 text-lg block md:hidden leading-6 font-bold" x-text="order_bump.product.title"></p>
            </div>
            <div class="w-full space-y-3">
                <p class="text-zinc-900 dark:text-neutral-50 text-lg hidden md:block leading-6 font-bold" x-text="order_bump.product.title"></p>

                <!-- Variantes Primárias -->
                <template x-if="order_bump.product.primaryVariants && order_bump.product.primaryVariants.length > 0">
                    <div class="flex gap-2 flex-wrap mt-2">
                        <template x-for="variant in order_bump.product.primaryVariants" :key="variant.code">
                            <!-- Botão de Variante -->
                            <button
                                :class="{
                                    'w-20 h-20 p-2 -ml-2.5': variant.image_url,
                                    'w-auto h-auto px-4 py-2 -ml-4.5': !variant.image_url,
                                    'flex items-center justify-center rounded-lg': true
                                }"
                                @click="hasSelectedOffer(order_bump.product.product_code, variant.code)
                                    ? removePickUpOffer(order_bump.product.product_code, variant.code)
                                    : pickUpOffer(order_bump.product, order_bump.order_bump_code)"
                            >
                                <!-- Exibe a imagem, se disponível -->
                                <template x-if="variant.image_url">
                                    <img x-bind:src="variant.image_url" x-bind:alt="variant.title" class="w-full h-full object-contain rounded-lg border-2"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(order_bump.product.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(order_bump.product.product_code, variant.code)
                                        }">
                                </template>

                                <!-- Exibe o texto, se não houver imagem -->
                                <template x-if="!variant.image_url">
                                    <span class="text-sm font-semibold text-center whitespace-nowrap overflow-hidden text-ellipsis border-2 flex items-center justify-center w-auto h-auto rounded-lg py-2 px-2.5"
                                        x-text="variant.tag"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(order_bump.product.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(order_bump.product.product_code, variant.code)
                                        }">
                                    </span>
                                </template>
                            </button>
                        </template>
                    </div>
                </template>

                <!-- Opções de tamanho, preço e botões -->
                <div class="flex xl:flex-col xl:!justify-start xl:!items-start gap-2 items-center justify-between">
                    <span class="flex items-center gap-2" x-show="order_bump.product.discount_value > 0">
                        <div class="text-xs leading-5 px-1.5 py-0.5 m-0 font-black text-[var(--contrast-color)] bg-[var(--theme-color)] uppercase rounded">De</div>
                        <div class="flex items-center text-base font-bold">
                        <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50 line-through" x-text="order_bump.product.primaryVariants && order_bump.product.primaryVariants.length > 0
                                    ? formatCurrencyPrice((order_bump.product.primaryVariants.find(v => v.selected_flag)?.amount ?? order_bump.product.amount) / 100)
                                    : formatCurrencyPrice((order_bump.product.amount ?? 0) / 100)"></p>
                        </div>
                    </span>

                    <span class="flex items-center gap-2">
                        <div class="text-xs leading-5 px-1.5 py-0.5 m-0 font-black text-[var(--contrast-color)] bg-[var(--theme-color)] uppercase rounded">Por</div>
                        <div class="flex items-center text-xl font-black">
                            <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50" x-text="(() => {
                                        const selectedVariant = order_bump.product.primaryVariants?.find(v => v.selected_flag);
                                        const discountValue = (order_bump.product.discount_value ?? 0) / 100;
                                        const discountTypeEnum = order_bump.product.discount_type_enum;

                                        // Primeiro verifica se existe uma variante selecionada e se ela tem o preço (amount).
                                        if (selectedVariant && selectedVariant.amount) {
                                            return formatCurrencyPrice(applyDiscountAmount(discountValue, selectedVariant.amount / 100, discountTypeEnum));
                                        }

                                        // Caso não exista um preço específico na variante, utiliza o preço do produto principal.
                                        const productAmount = (order_bump.product.amount ?? 0) / 100;
                                        return formatCurrencyPrice(applyDiscountAmount(discountValue, productAmount, discountTypeEnum));
                                    })()"></p>
                        </div>
                    </span>
                </div>
            </div>
        </div>
        <div class="flex justify-end pt-2 mt-3 overflow-x-hidden w-full">
            <button
                :disabled="order_bump.product.primaryVariants.length > 0 && !selectedVariant()"
                class="px-14 flex items-center gap-2 border-[var(--theme-color)] rounded-[var(--border-radius)] text-zinc-900 uppercase dark:text-neutral-50 text-sm leading-4 font-bold pl-3 pr-4 !py-2 border-2 disabled:opacity-50"
                x-bind:class="{
                    'bg-[var(--theme-color)] !text-[var(--contrast-color)]': hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)
                }"
                @click="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)
                    ? removePickUpOffer(order_bump.product.product_code, selectedVariant()?.code)
                    : pickUpOffer(order_bump.product, order_bump.order_bump_code)"
            >
                <div
                    class="flex items-center justify-center w-4.5 h-4.5 border-2 border-[var(--theme-color)] bg-white rounded-[3px]">
                    <svg class="stroke-[var(--theme-color)] stroke-[3]" x-show="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)" width="13" height="10" viewBox="0 0 13 10" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1.70728 4.73333L5.34364 9L11.7073 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </svg>


                </div>
                <p x-text="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code) ? `Oferta adicionada` : `Pegar oferta`"></p>
            </button>
        </div>
    </div>
    <div
        class="px-4 mt-4"
        x-bind:class="{
            'min-h-[94px]': checkoutConfig.order_bump_position_enum === 2,
            'mb-3': order_bump.description?.length < 100
        }"
        x-show="order_bump.description?.length > 0"
    >
        <p class="text-zinc-900 dark:text-neutral-50 text-lg leading-6" x-html="orderBumps[index_of_order_bump].description" x-collapse.min.50px="x-collapse.min.50px" x-show="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded"></p>
        <button
            class="my-3 text-sm font-bold text-zinc-900 dark:text-neutral-50"
            @click="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded = ! orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded"
            x-show="order_bump.description?.length > 58"
        >
            <span
                class="text-zinc-900 dark:text-neutral-50"
                x-text="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded ? 'Ver menos' : 'Ver mais'"></span>
        </button>
    </div>
</div>
                    </template>
                </div>
            </template>
            <template x-if="checkoutConfig.order_bump_position_enum === 2">
                <div
                    class="flex flex-col md:flex-row items-center justify-between"
                    x-bind:class="{
                        'px-6': checkoutConfig.order_bump_position_enum === 1,
                        'px-4': checkoutConfig.order_bump_position_enum === 2 }
                    "
                >
                    <p class="text-zinc-900 dark:text-neutral-50 text-lg mb-4 md:mb-0 md:py-6 leading-6">Somente<b>para este pedido</b></p>
                    <div class="flex gap-2 order-first md:order-none py-4 rtl:space-x-reverse">
                        <template x-for="(order_bump, index_of_order_bump) in orderBumps" :key="index_of_order_bump">
                            <button
                                type="button"
                                class="w-3 h-3 rounded-full aria-[current=true]:bg-[var(--theme-color)] aria-[current=false]:bg-black/[0.16] hover:aria-[current=false]:bg-black/[0.25]"
                                x-bind:aria-label="`Slide ${index_of_order_bump + 1}`"
                                x-bind:data-carousel-slide-to="index_of_order_bump"
                                @click="scrollToMobileSlide(index_of_order_bump)"
                            ></button>
                        </template>
                    </div>
                </div>
            </template>
            <template x-if="checkoutConfig.order_bump_position_enum === 1">
                <p class="text-zinc-900 dark:text-neutral-50 text-lg md:mb-0 py-6 leading-6 text-center">Somente
                    <b>para este pedido</b></p>
            </template>
        </div>
    </div>
</template>
        <div class="flex justify-center py-10" x-cloak>
            <button
    class="py-4 px-14 h-14 flex items-center gap-2 bg-[var(--theme-color)] rounded-[var(--border-radius)] text-[var(--contrast-color)] text-xl leading-6 font-black disabled:cursor-not-allowed hover:scale-105 transition-transform !gap-4" @click="validateForm(validation.formIdentification) || validateForm(validation.formShipping) ? sendPayment() : null" id="sendPayment" x-bind:disabled="loading_payment_button"
>
    <p x-show="formPayment.payment_method === 2" x-text="'Pagar'"></p>
                <p x-show="formPayment.payment_method === 3">Gerar Pix</p>
                <p x-show="formPayment.payment_method === 1">Gerar boleto</p>
                <svg x-show="loading_payment_button" class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="fill-[var(--theme-color)]" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>
</button>
        </div>
        <template x-if="formPayment.payment_method === 3">
            <div class="my-8 px-6">
    <div class="flex flex-col gap-2">
        <ul class="space-y-1">
            <li class="flex items-center gap-4 bg-white dark:bg-neutral-800 rounded py-2 px-4 text-base text-zinc-900 dark:text-neutral-50 leading-5">
                <div>
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="10" height="6" rx="3" class="stroke-[var(--theme-color)]" stroke-width="2" />
</svg>
                </div>
                Pagamento somente à vista
            </li>
            <li class="flex items-center gap-4 bg-white dark:bg-neutral-800 rounded py-2 px-4 text-base text-zinc-900 dark:text-neutral-50 leading-5">
                <div>
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="10" height="6" rx="3" class="stroke-[var(--theme-color)]" stroke-width="2" />
</svg>
                </div>
                A liberação da compra ocorre após a confirmação do pagamento
            </li>
            <li class="flex items-center gap-4 bg-white dark:bg-neutral-800 rounded py-2 px-4 text-base text-zinc-900 dark:text-neutral-50 leading-5">
                <div>
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="10" height="6" rx="3" class="stroke-[var(--theme-color)]" stroke-width="2" />
</svg>
                </div>
                Ao gerar o código atente para a data de expiração
            </li>
        </ul>
    </div>
</div>        </template>
        <template x-if="formPayment.payment_method === 1">
            <div class="my-8 px-6">
    <div class="flex flex-col gap-2">
        <ul class="space-y-1">
            <li class="flex items-center gap-4 bg-white dark:bg-neutral-800 rounded py-2 px-4 text-base text-zinc-900 dark:text-neutral-50 leading-5">
                <div>
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="10" height="6" rx="3" class="stroke-[var(--theme-color)]" stroke-width="2" />
</svg>
                </div>
                Pagamento somente à vista
            </li>
            <li class="flex items-center gap-4 bg-white dark:bg-neutral-800 rounded py-2 px-4 text-base text-zinc-900 dark:text-neutral-50 leading-5">
                <div>
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="10" height="6" rx="3" class="stroke-[var(--theme-color)]" stroke-width="2" />
</svg>
                </div>
                <p>A liberação da compra ocorre após a confirmação do pagamento, que pode levar até  <b>3 dias úteis</b></p>
            </li>
            <li class="flex items-center gap-4 bg-white dark:bg-neutral-800 rounded py-2 px-4 text-base text-zinc-900 dark:text-neutral-50 leading-5">
                <div>
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="10" height="6" rx="3" class="stroke-[var(--theme-color)]" stroke-width="2" />
</svg>
                </div>
                Pagável em qualquer banco ou casa lotérica até o vencimento
            </li>
        </ul>
    </div>
</div>
            </template>
    </div>
</template>
<!-- Optimized -->
<template x-if="checkoutConfig.form_step_enum === 3">
    <div x-bind:class="checkoutConfig.timer_flag && checkoutConfig.timer_position_enum === 1 ? 'xl:pt-8' : 'xl:pt-16'">
        <div class="bg-black/[0.04] dark:bg-white/[0.04] h-16 w-full rounded-[var(--border-radius-optimized-external)] flex items-center justify-center p-1 gap-1">
            <button
                :class="stepCurrent === STEP_ENUM.IDENTIFICATION ? 'bg-white dark:bg-neutral-800 cursor-default' : ''"
                class="h-14 flex-1 rounded-[var(--border-radius-optimized-internal)] flex items-center justify-evenly"
                @click="stepCurrent = STEP_ENUM.IDENTIFICATION"
            >
                <span
                    x-bind:data-active="stepCurrent === STEP_ENUM.IDENTIFICATION"
                    :class="stepCurrent === STEP_ENUM.IDENTIFICATION ? 'bg-[var(--theme-color)] !border-[var(--theme-color)]' : ''"
                    class="flex items-center justify-center font-semibold w-8 h-8 border border-black/[0.64] dark:border-white/[0.64] text-black/[0.64] dark:text-white/[0.64] rounded-full data-[active=true]:!text-[var(--contrast-color)]"
                >1</span>
                <p class="font-black text-sm leading-6 uppercase text-zinc-900 dark:text-neutral-50">Identificação</p>
            </button>
            <button
                :class="stepCurrent === STEP_ENUM.PAYMENT ? 'bg-white dark:bg-neutral-800 cursor-default' : ''"
                class="h-14 flex-1 rounded-[var(--border-radius-optimized-internal)] flex items-center justify-evenly"
                @click="validateForm(validation.formIdentification) && validateForm(validation.formShipping) ? stepCurrent = STEP_ENUM.PAYMENT : null; "
            >
                <span
                    x-bind:data-active="stepCurrent === STEP_ENUM.PAYMENT"
                    :class="stepCurrent === STEP_ENUM.PAYMENT ? 'bg-[var(--theme-color)] !border-[var(--theme-color)]' : ''"
                    class="flex items-center justify-center font-semibold w-8 h-8 border border-black/[0.64] dark:border-white/[0.64] text-black/[0.64] dark:text-white/[0.64] rounded-full data-[active=true]:!text-[var(--contrast-color)]"
                >2</span>
                <p class="font-black text-sm leading-6 uppercase text-zinc-900 dark:text-neutral-50">Pagamento</p>
            </button>
        </div>
        <template x-if="stepCurrent === STEP_ENUM.IDENTIFICATION">
            <div class="px-2 sm:px-6">
                <div class="mx-3 xl:mx-0">
    <template x-if="checkoutConfig.form_step_enum === 1">
        <div class="mb-8">
            <div class="flex items-center justify-between">
                <p class="text-xl font-bold text-zinc-900 dark:text-neutral-50">Finalizar</p>
                <div class="flex items-center gap-1.5">
                    <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50">Ambiente seguro</p>
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.4627 4.7991C21.4265 4.54124 21.2395 4.32912 20.9866 4.2594L12.8838 2.02392C12.7683 1.99203 12.6463 1.99203 12.5307 2.02392L4.42791 4.2594C4.1751 4.32912 3.98808 4.54115 3.95188 4.7991C3.90489 5.13436 2.83274 13.0556 5.58272 16.9962C8.32945 20.9321 12.3815 21.9407 12.5526 21.9818C12.6034 21.994 12.6553 22 12.7073 22C12.7593 22 12.8111 21.9939 12.862 21.9818C13.0332 21.9407 17.0852 20.9321 19.8318 16.9962C22.5818 13.0557 21.5097 5.13444 21.4627 4.7991ZM17.9325 9.42362L12.4056 14.9066C12.277 15.0342 12.1084 15.0981 11.9398 15.0981C11.7712 15.0981 11.6025 15.0343 11.4739 14.9066L8.05669 11.5165C7.93309 11.394 7.8637 11.2277 7.8637 11.0544C7.8637 10.8811 7.93318 10.7148 8.05669 10.5923L8.7352 9.91914C8.9925 9.66397 9.40967 9.66388 9.66688 9.91914L11.9398 12.174L16.3223 7.82614C16.4459 7.70352 16.6135 7.63468 16.7882 7.63468C16.9629 7.63468 17.1305 7.70352 17.254 7.82614L17.9325 8.49926C18.1898 8.75451 18.1898 9.16837 17.9325 9.42362Z" class="fill-[var(--theme-color)]"/>
</svg>
                </div>
            </div>
            <div class="py-2 mt-3 mb-8">
                <hr class="border-4 border-black/[0.04] dark:border-white/[0.04]">
            </div>
            <div class="flex items-center justify-between xl:mx-8">
                <div class="flex items-center justify-center text-base leading-4 font-black rounded-lg w-8 h-8 bg-[var(--theme-color)] text-[var(--contrast-color)]">1</div>
                <div class="flex items-center gap-1.5">
                    <p class="text-lg leading-8 font-medium text-zinc-900 dark:text-neutral-50">Dados pessoais</p>
                </div>
            </div>
        </div>
    </template>
    <template x-if="checkoutConfig.form_step_enum === 3">
        <div class="my-8">
            <div class="flex items-center justify-between xl:mx-8">
                <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Dados pessoais</p>
                <div class="flex items-center gap-1.5">
                    <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50">Ambiente seguro</p>
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.4627 4.7991C21.4265 4.54124 21.2395 4.32912 20.9866 4.2594L12.8838 2.02392C12.7683 1.99203 12.6463 1.99203 12.5307 2.02392L4.42791 4.2594C4.1751 4.32912 3.98808 4.54115 3.95188 4.7991C3.90489 5.13436 2.83274 13.0556 5.58272 16.9962C8.32945 20.9321 12.3815 21.9407 12.5526 21.9818C12.6034 21.994 12.6553 22 12.7073 22C12.7593 22 12.8111 21.9939 12.862 21.9818C13.0332 21.9407 17.0852 20.9321 19.8318 16.9962C22.5818 13.0557 21.5097 5.13444 21.4627 4.7991ZM17.9325 9.42362L12.4056 14.9066C12.277 15.0342 12.1084 15.0981 11.9398 15.0981C11.7712 15.0981 11.6025 15.0343 11.4739 14.9066L8.05669 11.5165C7.93309 11.394 7.8637 11.2277 7.8637 11.0544C7.8637 10.8811 7.93318 10.7148 8.05669 10.5923L8.7352 9.91914C8.9925 9.66397 9.40967 9.66388 9.66688 9.91914L11.9398 12.174L16.3223 7.82614C16.4459 7.70352 16.6135 7.63468 16.7882 7.63468C16.9629 7.63468 17.1305 7.70352 17.254 7.82614L17.9325 8.49926C18.1898 8.75451 18.1898 9.16837 17.9325 9.42362Z" class="fill-[var(--theme-color)]"/>
</svg>
                </div>
            </div>
        </div>
    </template>
    <template x-if="checkoutConfig.form_step_enum === 2">
        <div class="my-8">
            <div class="flex items-center justify-between xl:mx-8">
                <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Dados pessoais</p>
                <div class="flex items-center gap-1.5">
                    <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50">Ambiente seguro</p>
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.4627 4.7991C21.4265 4.54124 21.2395 4.32912 20.9866 4.2594L12.8838 2.02392C12.7683 1.99203 12.6463 1.99203 12.5307 2.02392L4.42791 4.2594C4.1751 4.32912 3.98808 4.54115 3.95188 4.7991C3.90489 5.13436 2.83274 13.0556 5.58272 16.9962C8.32945 20.9321 12.3815 21.9407 12.5526 21.9818C12.6034 21.994 12.6553 22 12.7073 22C12.7593 22 12.8111 21.9939 12.862 21.9818C13.0332 21.9407 17.0852 20.9321 19.8318 16.9962C22.5818 13.0557 21.5097 5.13444 21.4627 4.7991ZM17.9325 9.42362L12.4056 14.9066C12.277 15.0342 12.1084 15.0981 11.9398 15.0981C11.7712 15.0981 11.6025 15.0343 11.4739 14.9066L8.05669 11.5165C7.93309 11.394 7.8637 11.2277 7.8637 11.0544C7.8637 10.8811 7.93318 10.7148 8.05669 10.5923L8.7352 9.91914C8.9925 9.66397 9.40967 9.66388 9.66688 9.91914L11.9398 12.174L16.3223 7.82614C16.4459 7.70352 16.6135 7.63468 16.7882 7.63468C16.9629 7.63468 17.1305 7.70352 17.254 7.82614L17.9325 8.49926C18.1898 8.75451 18.1898 9.16837 17.9325 9.42362Z" class="fill-[var(--theme-color)]"/>
</svg>
                </div>
            </div>
        </div>
    </template>
    <div class="space-y-2 xl:mx-8">
        <div
    class="group w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formIdentification.full_name !== ''" x-bind:class="{ '!border-red-300' : !validation.formIdentification.full_name.isValid }"
>
    <input
    autocomplete="not"
    class="w-full py-[0.875rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50" id="full_name" placeholder="Nome completo" name="full_name" x-ref="full_name" x-model="formIdentification.full_name" @keyup="validation.formIdentification.full_name.validate(context)" @blur="validation.formIdentification.full_name.validate(context)" maxlength="255"
>
</div>

        <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formIdentification.full_name.isValid" x-text="validation.formIdentification.full_name.errorMessage">
    
</p>
        <div
    class="group w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)] relative" x-bind:data-filled="formIdentification.email !== ''" x-bind:class="{ '!border-red-300' : !validation.formIdentification.email.isValid }" @click.outside="emailSuggestions = []"
>
    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M19.7073 20.5H5.70728C4.64676 20.4989 3.63 20.0771 2.8801 19.3272C2.1302 18.5773 1.70841 17.5605 1.70728 16.5V7.5C1.70841 6.43948 2.1302 5.42272 2.8801 4.67282C3.63 3.92292 4.64676 3.50113 5.70728 3.5H19.7073C20.7678 3.50113 21.7846 3.92292 22.5345 4.67282C23.2844 5.42272 23.7061 6.43948 23.7073 7.5V16.5C23.7061 17.5605 23.2844 18.5773 22.5345 19.3272C21.7846 20.0771 20.7678 20.4989 19.7073 20.5ZM5.70728 5.5C5.17703 5.50061 4.66867 5.71151 4.29373 6.08646C3.91879 6.4614 3.70788 6.96975 3.70728 7.5V16.5C3.70788 17.0302 3.91879 17.5386 4.29373 17.9135C4.66867 18.2885 5.17703 18.4994 5.70728 18.5H19.7073C20.2375 18.4994 20.7459 18.2885 21.1208 17.9135C21.4958 17.5386 21.7067 17.0302 21.7073 16.5V7.5C21.7067 6.96975 21.4958 6.4614 21.1208 6.08646C20.7459 5.71151 20.2375 5.50061 19.7073 5.5H5.70728Z" class="fill-[var(--theme-color)]"/>
    <path d="M12.7072 13.4339C11.5949 13.4344 10.5143 13.0633 9.63688 12.3797L3.09288 7.28991C2.88348 7.12699 2.74737 6.88757 2.7145 6.6243C2.68163 6.36104 2.75468 6.0955 2.91759 5.8861C3.08051 5.67669 3.31993 5.54059 3.58319 5.50771C3.84646 5.47484 4.112 5.54789 4.3214 5.71081L10.8653 10.8006C11.3916 11.211 12.0398 11.4338 12.7071 11.4338C13.3745 11.4338 14.0227 11.211 14.5489 10.8006L21.0929 5.71081C21.3023 5.54789 21.5678 5.47484 21.8311 5.50771C22.0944 5.54059 22.3338 5.67669 22.4967 5.8861C22.6596 6.0955 22.7327 6.36104 22.6998 6.6243C22.6669 6.88757 22.5308 7.12699 22.3214 7.28991L15.7774 12.3797C14.8999 13.0631 13.8194 13.4341 12.7072 13.4339Z" class="fill-[var(--theme-color)]"/>
</svg>
            <input
    autocomplete="not"
    class="w-full py-[0.875rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50" id="formEmail" x-bind:placeholder="checkoutConfig.require_email_customer_flag ? 'E-mail' : 'E-mail (opcional)'" name="email" x-ref="email" x-model="formIdentification.email" @keyup="validation.formIdentification.email.validate(context)" @input="validation.formIdentification.email.validate(context, false, true); suggestEmail()" @keydown.arrow-down.prevent="nextSuggestionEmail()" @keydown.arrow-up.prevent="previousSuggestionEmail()" @keydown.enter.prevent="selectSuggestionEmail()" maxlength="255"
>
            <div x-show="emailSuggestions.length > 0" class="absolute top-16 left-0 py-1 w-full rounded bg-white dark:bg-neutral-800 text-zinc-900 dark:text-neutral-50" x-cloak>
                <template x-for="(suggestion, index) in emailSuggestions" :key="index">
                    <div
                        class="w-full py-2 pr-4 pl-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-neutral-700"
                        @click="selectSuggestionEmail(index)"
                    >
                        <p class="font-medium truncate" x-text="suggestion"></p>
                    </div>
                </template>
            </div>
</div>

        <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formIdentification.email.isValid" x-text="validation.formIdentification.email.errorMessage">
    
</p>
        <div
    class="group w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formIdentification.phone_number !== ''" x-bind:class="{ '!border-red-300' : !validation.formIdentification.phone_number.isValid }"
>
    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M17.207 2.25H8.20703C7.3786 2.25 6.70703 2.92157 6.70703 3.75V20.25C6.70703 21.0784 7.3786 21.75 8.20703 21.75H17.207C18.0355 21.75 18.707 21.0784 18.707 20.25V3.75C18.707 2.92157 18.0355 2.25 17.207 2.25Z" class="stroke-[var(--theme-color)]" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M6.70703 5.25H18.707" class="stroke-[var(--theme-color)]" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M11.707 19H13.707" class="stroke-[var(--theme-color)]" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
            <input
    autocomplete="not"
    class="w-full py-[0.875rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50" id="phone_number" placeholder="DDD + número" name="phone_number" x-mask:dynamic="getMaskInputPhone" x-mask="99 99999-9999" x-ref="phone_number" x-model="formIdentification.phone_number" @keyup="validation.formIdentification.phone_number.validate(context)" @blur="validation.formIdentification.phone_number.validate(context, false, true)" maxlength="25"
>
</div>

        <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formIdentification.phone_number.isValid" x-text="validation.formIdentification.phone_number.errorMessage">
    
</p>
        <div
    class="group w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formIdentification.identification_number !== ''" x-bind:class="{ '!border-red-300' : !validation.formIdentification.identification_number.isValid }"
>
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
            d="M6.15 11C6.15 11.6951 6.40863 12.334 6.82888 12.8298C6.16708 13.2805 5.64979 13.9338 5.37548 14.7273L5.37513 14.7284C5.22854 15.1681 5.45342 15.6568 5.90873 15.805C6.34977 15.9518 6.83661 15.7152 6.98465 15.2723C7.28075 14.423 8.08254 13.85 9 13.85C9.91841 13.85 10.7294 14.4239 11.0152 15.2719L11.0152 15.2719L11.0158 15.2734C11.1398 15.623 11.4673 15.85 11.82 15.85C11.9079 15.85 11.9998 15.8391 12.0933 15.8043C12.5357 15.6558 12.7718 15.1692 12.6249 14.7284L12.6245 14.7273C12.3502 13.9338 11.8329 13.2805 11.1711 12.8298C11.5914 12.334 11.85 11.6951 11.85 11C11.85 9.42477 10.5752 8.15 9 8.15C7.42477 8.15 6.15 9.42477 6.15 11ZM19 3.15H5C2.87477 3.15 1.15 4.87477 1.15 7V17C1.15 19.1252 2.87477 20.85 5 20.85H19C21.1252 20.85 22.85 19.1252 22.85 17V7C22.85 4.87477 21.1252 3.15 19 3.15ZM21.15 17C21.15 18.1848 20.1848 19.15 19 19.15H5C3.81523 19.15 2.85 18.1848 2.85 17V7C2.85 5.81523 3.81523 4.85 5 4.85H19C20.1848 4.85 21.15 5.81523 21.15 7V17ZM7.85 11C7.85 10.3652 8.36523 9.85 9 9.85C9.63477 9.85 10.15 10.3652 10.15 11C10.15 11.6348 9.63477 12.15 9 12.15C8.36523 12.15 7.85 11.6348 7.85 11ZM18 10.85C18.4652 10.85 18.85 10.4652 18.85 10C18.85 9.53477 18.4652 9.15 18 9.15H15C14.5348 9.15 14.15 9.53477 14.15 10C14.15 10.4652 14.5348 10.85 15 10.85H18ZM18 14.85C18.4652 14.85 18.85 14.4652 18.85 14C18.85 13.5348 18.4652 13.15 18 13.15H15C14.5348 13.15 14.15 13.5348 14.15 14C14.15 14.4652 14.5348 14.85 15 14.85H18Z"
            class="stroke-[var(--theme-color)] fill-[var(--theme-color)]" stroke-width="0.2"
        />
    </svg>
            <input
    autocomplete="not"
    class="w-full py-[0.875rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50" id="identification_number" x-bind:placeholder="getTextIdentificationNumber()" name="identification_number" x-ref="identification_number" x-model="formIdentification.identification_number" @keyup="validation.formIdentification.identification_number.validate(context)" @blur="validation.formIdentification.identification_number.validate(context, false, true)" x-mask:dynamic="getMaskInputIdentificationNumber" maxlength="25"
>
</div>

        <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formIdentification.identification_number.isValid" x-text="validation.formIdentification.identification_number.errorMessage">
    
</p>
    </div>
    <div>
        <div class="border rounded-lg border-black/[0.16] dark:border-white/[0.16] mt-8 mb-10 xl:mx-8">
            <div class="flex items-center gap-3 p-3">
                <div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
    <path d="M7.60132 7.43059C7.60132 7.84481 7.9371 8.18059 8.35132 8.18059C8.76553 8.18059 9.10132 7.84481 9.10132 7.43059H7.60132ZM8.35132 7.12771H7.60132H8.35132ZM17.0633 7.12772H16.3133H17.0633ZM16.3133 7.4306C16.3133 7.84481 16.6491 8.1806 17.0633 8.1806C17.4775 8.1806 17.8133 7.84481 17.8133 7.4306H16.3133ZM11.5591 3.14126L11.377 2.41368L11.377 2.41368L11.5591 3.14126ZM13.8556 3.14126L14.0376 2.41368H14.0376L13.8556 3.14126ZM9.10132 7.43059V7.12771H7.60132V7.43059H9.10132ZM16.3133 7.12772V7.4306H17.8133V7.12772H16.3133ZM11.7411 3.86884C12.3745 3.71039 13.0401 3.71039 13.6736 3.86884L14.0376 2.41368C13.1651 2.19544 12.2495 2.19544 11.377 2.41368L11.7411 3.86884ZM17.8133 7.12772C17.8133 4.88982 16.2423 2.96519 14.0376 2.41368L13.6736 3.86884C15.2473 4.2625 16.3133 5.61508 16.3133 7.12772H17.8133ZM9.10132 7.12771C9.10132 5.61508 10.1674 4.2625 11.7411 3.86884L11.377 2.41368C9.17232 2.96519 7.60132 4.88982 7.60132 7.12771H9.10132Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    <path d="M5.36037 17.0261L4.66566 17.3087L4.66566 17.3087L5.36037 17.0261ZM5.01337 11.3969L5.73734 11.5928L5.01337 11.3969ZM20.4012 11.3969L19.6772 11.5928L20.4012 11.3969ZM20.0542 17.0261L20.7489 17.3087V17.3087L20.0542 17.0261ZM14.7437 20.8416L14.6278 20.1006L14.7437 20.8416ZM10.6708 20.8416L10.7867 20.1006L10.6708 20.8416ZM9.36347 7.60192L9.214 6.86697L9.36347 7.60192ZM16.0511 7.60192L16.2006 6.86697L16.2006 6.86697L16.0511 7.60192ZM9.92206 20.7245L9.80617 21.4655L9.92206 20.7245ZM5.45326 17.2544L6.14797 16.9718L6.14797 16.9718L5.45326 17.2544ZM15.4925 20.7245L15.6084 21.4655L15.4925 20.7245ZM19.9613 17.2544L19.2666 16.9718V16.9718L19.9613 17.2544ZM16.3272 7.65808L16.1777 8.39303L16.1777 8.39303L16.3272 7.65808ZM9.08736 7.65807L9.23684 8.39303L9.08736 7.65807ZM9.23684 8.39303L9.51294 8.33688L9.214 6.86697L8.93789 6.92312L9.23684 8.39303ZM15.9016 8.33688L16.1777 8.39303L16.4767 6.92312L16.2006 6.86697L15.9016 8.33688ZM15.3766 19.9835L14.6278 20.1006L14.8596 21.5826L15.6084 21.4655L15.3766 19.9835ZM10.7867 20.1006L10.038 19.9835L9.80617 21.4655L10.5549 21.5826L10.7867 20.1006ZM19.3595 16.7435L19.2666 16.9718L20.656 17.5371L20.7489 17.3087L19.3595 16.7435ZM6.14797 16.9718L6.05508 16.7435L4.66566 17.3087L4.75855 17.537L6.14797 16.9718ZM6.05508 16.7435C5.38669 15.1005 5.27585 13.2985 5.73734 11.5928L4.2894 11.201C3.74193 13.2246 3.87398 15.3627 4.66566 17.3087L6.05508 16.7435ZM19.6772 11.5928C20.1387 13.2985 20.0279 15.1005 19.3595 16.7435L20.7489 17.3087C21.5406 15.3628 21.6726 13.2246 21.1252 11.201L19.6772 11.5928ZM14.6278 20.1006C13.3559 20.2995 12.0587 20.2995 10.7867 20.1006L10.5549 21.5826C11.9805 21.8055 13.4341 21.8055 14.8596 21.5826L14.6278 20.1006ZM9.51294 8.33688C11.6191 7.90854 13.7955 7.90854 15.9016 8.33688L16.2006 6.86697C13.8972 6.39851 11.5174 6.39851 9.214 6.86697L9.51294 8.33688ZM10.038 19.9835C8.26356 19.706 6.79094 18.5522 6.14797 16.9718L4.75855 17.537C5.60803 19.6251 7.5336 21.11 9.80617 21.4655L10.038 19.9835ZM15.6084 21.4655C17.8809 21.11 19.8065 19.6251 20.656 17.5371L19.2666 16.9718C18.6236 18.5522 17.151 19.706 15.3766 19.9835L15.6084 21.4655ZM16.1777 8.39303C17.8985 8.74298 19.2441 9.9919 19.6772 11.5928L21.1252 11.201C20.5371 9.02744 18.7278 7.38094 16.4767 6.92312L16.1777 8.39303ZM8.93789 6.92312C6.68679 7.38094 4.87745 9.02745 4.2894 11.201L5.73734 11.5928C6.17045 9.99191 7.5161 8.74298 9.23684 8.39303L8.93789 6.92312Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    <path d="M12.7073 13.5L12.7073 15.5" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round"/>
</svg>
                </div>
                <p class="text-sm text-zinc-900 dark:text-neutral-50">Usamos seus dados de forma segura para garantir a sua satisfação:</p>
            </div>
            <hr class="border-black/[0.16] dark:border-white/[0.16]">
            <div class="flex items-center gap-3 p-3">
                <ul>
                    <li class="flex items-center gap-3">
                        <div>
                            <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M20.8797 10.1867C20.6603 10.0092 20.2952 9.71311 20.2495 9.57278C20.203 9.42703 20.3231 8.95806 20.3952 8.67898C20.5681 8.00534 20.7836 7.16734 20.3006 6.50766C19.82 5.85263 18.9557 5.79525 18.2611 5.74872C17.9735 5.72857 17.4913 5.69677 17.3696 5.6084C17.2464 5.51925 17.0611 5.06266 16.9502 4.78901C16.6766 4.11071 16.365 3.3417 15.6045 3.09674C14.8479 2.84946 14.1564 3.28744 13.5479 3.6727C13.2797 3.84168 12.8758 4.09752 12.7068 4.09752C12.5448 4.09752 12.1456 3.83783 11.8805 3.66574C11.2952 3.2851 10.5634 2.81378 9.7921 3.07582C9.03317 3.33397 8.72467 4.09829 8.45102 4.77116C8.34095 5.04247 8.15798 5.49518 8.03242 5.58744C7.90993 5.67812 7.41923 5.71069 7.12619 5.73007C6.39364 5.77968 5.56341 5.83552 5.09674 6.49597C4.63861 7.14481 4.844 7.94481 5.0254 8.65102C5.09674 8.93164 5.21765 9.40142 5.17423 9.54171C5.12773 9.67581 4.76648 9.97273 4.55097 10.1502C4.00593 10.5999 3.32764 11.1588 3.32764 11.9961C3.32764 12.8278 3.99278 13.3806 4.52686 13.824C4.75864 14.0162 5.10824 14.3069 5.15554 14.4511C5.20204 14.5938 5.08113 15.0573 5.00826 15.3341C4.83151 16.0139 4.61058 16.8604 5.11213 17.5256C5.60129 18.1721 6.46175 18.2294 7.154 18.2759C7.44162 18.2961 7.92301 18.3271 8.0455 18.4163C8.16798 18.5055 8.35249 18.9612 8.46333 19.2349C8.73775 19.9132 9.04859 20.6822 9.80984 20.9279C9.96255 20.9783 10.1137 21 10.261 21C10.844 21 11.3819 20.659 11.8672 20.3535C12.1346 20.1845 12.5378 19.9287 12.7068 19.9287C12.8719 19.9287 13.2688 20.1814 13.5308 20.3489C14.1122 20.7186 14.8378 21.1822 15.6075 20.9186C16.3657 20.6605 16.6742 19.8969 16.9479 19.2225C17.0579 18.952 17.2409 18.4985 17.3665 18.4062C17.4897 18.3156 17.9773 18.283 18.2688 18.2636C18.9959 18.214 19.8207 18.159 20.2944 17.5086C20.7712 16.8551 20.5665 16.0465 20.3859 15.3341C20.3154 15.0558 20.1975 14.5915 20.2402 14.4519C20.2866 14.3178 20.6479 14.0209 20.8626 13.8434C21.4084 13.3938 22.0867 12.8341 22.0867 11.9968C22.0867 11.1666 21.4169 10.6232 20.8797 10.1867ZM19.8774 12.648C19.4239 13.0209 18.9549 13.4077 18.7704 13.962C18.582 14.5263 18.7355 15.131 18.8835 15.7155C18.9556 16.0008 19.0765 16.4775 19.0603 16.5759C18.9424 16.6643 18.4564 16.6977 18.1657 16.7163C17.5897 16.755 16.937 16.7985 16.451 17.155C15.9696 17.5077 15.7362 18.0837 15.5106 18.6403C15.4006 18.9147 15.2145 19.3744 15.1378 19.4442C14.9967 19.4442 14.6021 19.1907 14.3657 19.0403C13.8781 18.7303 13.3254 18.3775 12.7075 18.3775C12.0889 18.3775 11.5315 18.731 11.0385 19.0427C10.7997 19.1931 10.3998 19.4473 10.3145 19.4659C10.1944 19.3799 10.0114 18.9256 9.90132 18.6543C9.67343 18.0907 9.43777 17.5086 8.95172 17.1589C8.46878 16.8109 7.85325 16.7698 7.25714 16.7303C6.97729 16.7117 6.4556 16.6768 6.36099 16.6124C6.31292 16.4752 6.43464 16.0063 6.50828 15.7272C6.65169 15.1744 6.81528 14.5481 6.63077 13.976C6.44548 13.4047 5.95324 12.9946 5.51834 12.6333C5.30595 12.4566 4.90981 12.1271 4.87647 12.0078C4.91135 11.862 5.31833 11.5264 5.53692 11.3473C5.99039 10.9737 6.45941 10.5868 6.64392 10.0326C6.83385 9.46433 6.67726 8.85503 6.52686 8.26588C6.45398 7.98138 6.3315 7.5054 6.34081 7.41472C6.45941 7.32946 6.94157 7.29689 7.22996 7.27751C7.83537 7.23721 8.46252 7.19456 8.94857 6.83876C9.42997 6.48604 9.66332 5.91085 9.8889 5.35427C9.99897 5.07908 10.1858 4.62014 10.2571 4.55115C10.4005 4.55346 10.799 4.81238 11.037 4.96667C11.5284 5.28605 12.0866 5.64808 12.7075 5.64808C13.3254 5.64808 13.8843 5.29459 14.3758 4.98374C14.6145 4.83257 15.0145 4.5791 15.0998 4.56049C15.2192 4.64656 15.4029 5.1008 15.513 5.37211C15.7409 5.93492 15.9765 6.51707 16.4626 6.86668C16.9455 7.21552 17.5618 7.25659 18.1587 7.29612C18.4533 7.31628 18.9471 7.34962 19.0394 7.40542C19.0867 7.54186 18.9665 8.01318 18.8936 8.2938C18.7517 8.84884 18.5905 9.47752 18.7758 10.0512C18.9626 10.6287 19.4626 11.0341 19.9037 11.3915C20.1052 11.5558 20.4766 11.8559 20.5339 12C20.4789 12.1511 20.089 12.4728 19.8774 12.648Z" class="fill-[var(--theme-color)]"/>
    <path d="M17.1421 8.25906C16.7197 7.906 16.0958 7.96352 15.7457 8.38305L11.3234 13.6702L9.44199 11.7898C9.05419 11.402 8.42738 11.402 8.03963 11.7898C7.65183 12.1776 7.65183 12.8044 8.03963 13.1922L10.6877 15.8402C10.8731 16.0277 11.1261 16.1308 11.3889 16.1308C11.4028 16.1308 11.4177 16.1308 11.4315 16.1289C11.7112 16.117 11.9701 15.988 12.1486 15.7748L17.2661 9.65547C17.6172 9.235 17.5627 8.61016 17.1421 8.25906Z" class="fill-[var(--theme-color)]"/>
</svg>
                        </div>
                        <p class="text-sm text-zinc-900 dark:text-neutral-50">Enviar o seu comprovante de compra e pagamento;</p>
                    </li>
                    <li class="flex items-center gap-3">
                        <div>
                            <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M20.8797 10.1867C20.6603 10.0092 20.2952 9.71311 20.2495 9.57278C20.203 9.42703 20.3231 8.95806 20.3952 8.67898C20.5681 8.00534 20.7836 7.16734 20.3006 6.50766C19.82 5.85263 18.9557 5.79525 18.2611 5.74872C17.9735 5.72857 17.4913 5.69677 17.3696 5.6084C17.2464 5.51925 17.0611 5.06266 16.9502 4.78901C16.6766 4.11071 16.365 3.3417 15.6045 3.09674C14.8479 2.84946 14.1564 3.28744 13.5479 3.6727C13.2797 3.84168 12.8758 4.09752 12.7068 4.09752C12.5448 4.09752 12.1456 3.83783 11.8805 3.66574C11.2952 3.2851 10.5634 2.81378 9.7921 3.07582C9.03317 3.33397 8.72467 4.09829 8.45102 4.77116C8.34095 5.04247 8.15798 5.49518 8.03242 5.58744C7.90993 5.67812 7.41923 5.71069 7.12619 5.73007C6.39364 5.77968 5.56341 5.83552 5.09674 6.49597C4.63861 7.14481 4.844 7.94481 5.0254 8.65102C5.09674 8.93164 5.21765 9.40142 5.17423 9.54171C5.12773 9.67581 4.76648 9.97273 4.55097 10.1502C4.00593 10.5999 3.32764 11.1588 3.32764 11.9961C3.32764 12.8278 3.99278 13.3806 4.52686 13.824C4.75864 14.0162 5.10824 14.3069 5.15554 14.4511C5.20204 14.5938 5.08113 15.0573 5.00826 15.3341C4.83151 16.0139 4.61058 16.8604 5.11213 17.5256C5.60129 18.1721 6.46175 18.2294 7.154 18.2759C7.44162 18.2961 7.92301 18.3271 8.0455 18.4163C8.16798 18.5055 8.35249 18.9612 8.46333 19.2349C8.73775 19.9132 9.04859 20.6822 9.80984 20.9279C9.96255 20.9783 10.1137 21 10.261 21C10.844 21 11.3819 20.659 11.8672 20.3535C12.1346 20.1845 12.5378 19.9287 12.7068 19.9287C12.8719 19.9287 13.2688 20.1814 13.5308 20.3489C14.1122 20.7186 14.8378 21.1822 15.6075 20.9186C16.3657 20.6605 16.6742 19.8969 16.9479 19.2225C17.0579 18.952 17.2409 18.4985 17.3665 18.4062C17.4897 18.3156 17.9773 18.283 18.2688 18.2636C18.9959 18.214 19.8207 18.159 20.2944 17.5086C20.7712 16.8551 20.5665 16.0465 20.3859 15.3341C20.3154 15.0558 20.1975 14.5915 20.2402 14.4519C20.2866 14.3178 20.6479 14.0209 20.8626 13.8434C21.4084 13.3938 22.0867 12.8341 22.0867 11.9968C22.0867 11.1666 21.4169 10.6232 20.8797 10.1867ZM19.8774 12.648C19.4239 13.0209 18.9549 13.4077 18.7704 13.962C18.582 14.5263 18.7355 15.131 18.8835 15.7155C18.9556 16.0008 19.0765 16.4775 19.0603 16.5759C18.9424 16.6643 18.4564 16.6977 18.1657 16.7163C17.5897 16.755 16.937 16.7985 16.451 17.155C15.9696 17.5077 15.7362 18.0837 15.5106 18.6403C15.4006 18.9147 15.2145 19.3744 15.1378 19.4442C14.9967 19.4442 14.6021 19.1907 14.3657 19.0403C13.8781 18.7303 13.3254 18.3775 12.7075 18.3775C12.0889 18.3775 11.5315 18.731 11.0385 19.0427C10.7997 19.1931 10.3998 19.4473 10.3145 19.4659C10.1944 19.3799 10.0114 18.9256 9.90132 18.6543C9.67343 18.0907 9.43777 17.5086 8.95172 17.1589C8.46878 16.8109 7.85325 16.7698 7.25714 16.7303C6.97729 16.7117 6.4556 16.6768 6.36099 16.6124C6.31292 16.4752 6.43464 16.0063 6.50828 15.7272C6.65169 15.1744 6.81528 14.5481 6.63077 13.976C6.44548 13.4047 5.95324 12.9946 5.51834 12.6333C5.30595 12.4566 4.90981 12.1271 4.87647 12.0078C4.91135 11.862 5.31833 11.5264 5.53692 11.3473C5.99039 10.9737 6.45941 10.5868 6.64392 10.0326C6.83385 9.46433 6.67726 8.85503 6.52686 8.26588C6.45398 7.98138 6.3315 7.5054 6.34081 7.41472C6.45941 7.32946 6.94157 7.29689 7.22996 7.27751C7.83537 7.23721 8.46252 7.19456 8.94857 6.83876C9.42997 6.48604 9.66332 5.91085 9.8889 5.35427C9.99897 5.07908 10.1858 4.62014 10.2571 4.55115C10.4005 4.55346 10.799 4.81238 11.037 4.96667C11.5284 5.28605 12.0866 5.64808 12.7075 5.64808C13.3254 5.64808 13.8843 5.29459 14.3758 4.98374C14.6145 4.83257 15.0145 4.5791 15.0998 4.56049C15.2192 4.64656 15.4029 5.1008 15.513 5.37211C15.7409 5.93492 15.9765 6.51707 16.4626 6.86668C16.9455 7.21552 17.5618 7.25659 18.1587 7.29612C18.4533 7.31628 18.9471 7.34962 19.0394 7.40542C19.0867 7.54186 18.9665 8.01318 18.8936 8.2938C18.7517 8.84884 18.5905 9.47752 18.7758 10.0512C18.9626 10.6287 19.4626 11.0341 19.9037 11.3915C20.1052 11.5558 20.4766 11.8559 20.5339 12C20.4789 12.1511 20.089 12.4728 19.8774 12.648Z" class="fill-[var(--theme-color)]"/>
    <path d="M17.1421 8.25906C16.7197 7.906 16.0958 7.96352 15.7457 8.38305L11.3234 13.6702L9.44199 11.7898C9.05419 11.402 8.42738 11.402 8.03963 11.7898C7.65183 12.1776 7.65183 12.8044 8.03963 13.1922L10.6877 15.8402C10.8731 16.0277 11.1261 16.1308 11.3889 16.1308C11.4028 16.1308 11.4177 16.1308 11.4315 16.1289C11.7112 16.117 11.9701 15.988 12.1486 15.7748L17.2661 9.65547C17.6172 9.235 17.5627 8.61016 17.1421 8.25906Z" class="fill-[var(--theme-color)]"/>
</svg>
                        </div>
                        <p class="text-sm text-zinc-900 dark:text-neutral-50">Ativar sua devolução caso não fique satisfeito;</p>
                    </li>
                    <li class="flex items-center gap-3">
                        <div>
                            <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M20.8797 10.1867C20.6603 10.0092 20.2952 9.71311 20.2495 9.57278C20.203 9.42703 20.3231 8.95806 20.3952 8.67898C20.5681 8.00534 20.7836 7.16734 20.3006 6.50766C19.82 5.85263 18.9557 5.79525 18.2611 5.74872C17.9735 5.72857 17.4913 5.69677 17.3696 5.6084C17.2464 5.51925 17.0611 5.06266 16.9502 4.78901C16.6766 4.11071 16.365 3.3417 15.6045 3.09674C14.8479 2.84946 14.1564 3.28744 13.5479 3.6727C13.2797 3.84168 12.8758 4.09752 12.7068 4.09752C12.5448 4.09752 12.1456 3.83783 11.8805 3.66574C11.2952 3.2851 10.5634 2.81378 9.7921 3.07582C9.03317 3.33397 8.72467 4.09829 8.45102 4.77116C8.34095 5.04247 8.15798 5.49518 8.03242 5.58744C7.90993 5.67812 7.41923 5.71069 7.12619 5.73007C6.39364 5.77968 5.56341 5.83552 5.09674 6.49597C4.63861 7.14481 4.844 7.94481 5.0254 8.65102C5.09674 8.93164 5.21765 9.40142 5.17423 9.54171C5.12773 9.67581 4.76648 9.97273 4.55097 10.1502C4.00593 10.5999 3.32764 11.1588 3.32764 11.9961C3.32764 12.8278 3.99278 13.3806 4.52686 13.824C4.75864 14.0162 5.10824 14.3069 5.15554 14.4511C5.20204 14.5938 5.08113 15.0573 5.00826 15.3341C4.83151 16.0139 4.61058 16.8604 5.11213 17.5256C5.60129 18.1721 6.46175 18.2294 7.154 18.2759C7.44162 18.2961 7.92301 18.3271 8.0455 18.4163C8.16798 18.5055 8.35249 18.9612 8.46333 19.2349C8.73775 19.9132 9.04859 20.6822 9.80984 20.9279C9.96255 20.9783 10.1137 21 10.261 21C10.844 21 11.3819 20.659 11.8672 20.3535C12.1346 20.1845 12.5378 19.9287 12.7068 19.9287C12.8719 19.9287 13.2688 20.1814 13.5308 20.3489C14.1122 20.7186 14.8378 21.1822 15.6075 20.9186C16.3657 20.6605 16.6742 19.8969 16.9479 19.2225C17.0579 18.952 17.2409 18.4985 17.3665 18.4062C17.4897 18.3156 17.9773 18.283 18.2688 18.2636C18.9959 18.214 19.8207 18.159 20.2944 17.5086C20.7712 16.8551 20.5665 16.0465 20.3859 15.3341C20.3154 15.0558 20.1975 14.5915 20.2402 14.4519C20.2866 14.3178 20.6479 14.0209 20.8626 13.8434C21.4084 13.3938 22.0867 12.8341 22.0867 11.9968C22.0867 11.1666 21.4169 10.6232 20.8797 10.1867ZM19.8774 12.648C19.4239 13.0209 18.9549 13.4077 18.7704 13.962C18.582 14.5263 18.7355 15.131 18.8835 15.7155C18.9556 16.0008 19.0765 16.4775 19.0603 16.5759C18.9424 16.6643 18.4564 16.6977 18.1657 16.7163C17.5897 16.755 16.937 16.7985 16.451 17.155C15.9696 17.5077 15.7362 18.0837 15.5106 18.6403C15.4006 18.9147 15.2145 19.3744 15.1378 19.4442C14.9967 19.4442 14.6021 19.1907 14.3657 19.0403C13.8781 18.7303 13.3254 18.3775 12.7075 18.3775C12.0889 18.3775 11.5315 18.731 11.0385 19.0427C10.7997 19.1931 10.3998 19.4473 10.3145 19.4659C10.1944 19.3799 10.0114 18.9256 9.90132 18.6543C9.67343 18.0907 9.43777 17.5086 8.95172 17.1589C8.46878 16.8109 7.85325 16.7698 7.25714 16.7303C6.97729 16.7117 6.4556 16.6768 6.36099 16.6124C6.31292 16.4752 6.43464 16.0063 6.50828 15.7272C6.65169 15.1744 6.81528 14.5481 6.63077 13.976C6.44548 13.4047 5.95324 12.9946 5.51834 12.6333C5.30595 12.4566 4.90981 12.1271 4.87647 12.0078C4.91135 11.862 5.31833 11.5264 5.53692 11.3473C5.99039 10.9737 6.45941 10.5868 6.64392 10.0326C6.83385 9.46433 6.67726 8.85503 6.52686 8.26588C6.45398 7.98138 6.3315 7.5054 6.34081 7.41472C6.45941 7.32946 6.94157 7.29689 7.22996 7.27751C7.83537 7.23721 8.46252 7.19456 8.94857 6.83876C9.42997 6.48604 9.66332 5.91085 9.8889 5.35427C9.99897 5.07908 10.1858 4.62014 10.2571 4.55115C10.4005 4.55346 10.799 4.81238 11.037 4.96667C11.5284 5.28605 12.0866 5.64808 12.7075 5.64808C13.3254 5.64808 13.8843 5.29459 14.3758 4.98374C14.6145 4.83257 15.0145 4.5791 15.0998 4.56049C15.2192 4.64656 15.4029 5.1008 15.513 5.37211C15.7409 5.93492 15.9765 6.51707 16.4626 6.86668C16.9455 7.21552 17.5618 7.25659 18.1587 7.29612C18.4533 7.31628 18.9471 7.34962 19.0394 7.40542C19.0867 7.54186 18.9665 8.01318 18.8936 8.2938C18.7517 8.84884 18.5905 9.47752 18.7758 10.0512C18.9626 10.6287 19.4626 11.0341 19.9037 11.3915C20.1052 11.5558 20.4766 11.8559 20.5339 12C20.4789 12.1511 20.089 12.4728 19.8774 12.648Z" class="fill-[var(--theme-color)]"/>
    <path d="M17.1421 8.25906C16.7197 7.906 16.0958 7.96352 15.7457 8.38305L11.3234 13.6702L9.44199 11.7898C9.05419 11.402 8.42738 11.402 8.03963 11.7898C7.65183 12.1776 7.65183 12.8044 8.03963 13.1922L10.6877 15.8402C10.8731 16.0277 11.1261 16.1308 11.3889 16.1308C11.4028 16.1308 11.4177 16.1308 11.4315 16.1289C11.7112 16.117 11.9701 15.988 12.1486 15.7748L17.2661 9.65547C17.6172 9.235 17.5627 8.61016 17.1421 8.25906Z" class="fill-[var(--theme-color)]"/>
</svg>
                        </div>
                        <p class="text-sm text-zinc-900 dark:text-neutral-50">Acompanhar o andamento do seu pedido.</p>
                    </li>
                </ul>
            </div>
        </div>
        <hr class="border-4 border-black/[0.04] dark:border-white/[0.04] my-4">
    </div>
</div>
                <template x-if="checkoutConfig.hasFreight">
                    <div id="shipping_form" class="mt-8 mx-3">
    <template x-if="checkoutConfig.form_step_enum === 1">
        <div class="mb-8 xl:mx-8">
            <div class="flex items-center justify-between ">
                <div class="flex items-center justify-center text-base leading-4 font-black rounded-lg w-8 h-8 bg-[var(--theme-color)] text-[var(--contrast-color)]">2</div>
                <div class="flex items-center gap-1.5">
                    <p class="text-lg leading-8 font-medium text-zinc-900 dark:text-neutral-50">Frete e destino</p>
                </div>
            </div>
        </div>
    </template>
    <template x-if="checkoutConfig.form_step_enum === 3">
        <div class="my-8 xl:mx-8">
            <div class="flex items-center justify-between ">
                <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Frete e destino</p>
            </div>
        </div>
    </template>
    <template x-if="checkoutConfig.form_step_enum === 2">
        <div class="my-8 xl:mx-8">
            <div class="flex items-center justify-between ">
                <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Frete e destino</p>
                <div class="flex items-center gap-1.5">
                    <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50">Ambiente seguro</p>
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.4627 4.7991C21.4265 4.54124 21.2395 4.32912 20.9866 4.2594L12.8838 2.02392C12.7683 1.99203 12.6463 1.99203 12.5307 2.02392L4.42791 4.2594C4.1751 4.32912 3.98808 4.54115 3.95188 4.7991C3.90489 5.13436 2.83274 13.0556 5.58272 16.9962C8.32945 20.9321 12.3815 21.9407 12.5526 21.9818C12.6034 21.994 12.6553 22 12.7073 22C12.7593 22 12.8111 21.9939 12.862 21.9818C13.0332 21.9407 17.0852 20.9321 19.8318 16.9962C22.5818 13.0557 21.5097 5.13444 21.4627 4.7991ZM17.9325 9.42362L12.4056 14.9066C12.277 15.0342 12.1084 15.0981 11.9398 15.0981C11.7712 15.0981 11.6025 15.0343 11.4739 14.9066L8.05669 11.5165C7.93309 11.394 7.8637 11.2277 7.8637 11.0544C7.8637 10.8811 7.93318 10.7148 8.05669 10.5923L8.7352 9.91914C8.9925 9.66397 9.40967 9.66388 9.66688 9.91914L11.9398 12.174L16.3223 7.82614C16.4459 7.70352 16.6135 7.63468 16.7882 7.63468C16.9629 7.63468 17.1305 7.70352 17.254 7.82614L17.9325 8.49926C18.1898 8.75451 18.1898 9.16837 17.9325 9.42362Z" class="fill-[var(--theme-color)]"/>
</svg>
                </div>
            </div>
        </div>
    </template>
    <div class="space-y-2 xl:mx-8">
        <div>
            <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.zip_code !== ''" x-bind:class="{ '!border-red-600 dark:!border-red-500' : formShipping.error_message }"
>
    <input
    autocomplete="not"
    class="w-full py-[0.875rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" placeholder="CEP" x-model="formShipping.zip_code" x-mask="99999-999" id="zip_code" name="zip_code" x-ref="zip_code" @keyup="validation.formShipping.zip_code.validate(context)" @blur="validation.formShipping.zip_code.validate(context, false, true)" @input="validateAndFetchFreight" @keyup.enter="getFreight(); getAddress($refs.zip_code.value)"
>
                <button type="button" class="text-sm  leading-4 font-black text-zinc-900 dark:text-neutral-50 hover:text-zinc-500 hover:dark:text-neutral-300 transition-colors ring-0" x-bind:class="'disabled:!text-zinc-600 disabled:cursor-not-allowed'" x-bind:disabled="formShipping.zip_code.length < 9" @click="getFreight(); getAddress($refs.zip_code.value)">
    <svg x-show="formShipping.is_loading" class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="fill-[var(--theme-color)]" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>
                    <p x-show="!formShipping.is_loading">Buscar</p>
</button>
</div>
            <p class="text-sm text-red-600 ml-5 font-medium" x-text="formShipping.error_message" x-show="formShipping.error_message">
    
</p>
            <a
                class="text-[0.8125rem] font-medium text-zinc-900 dark:text-neutral-50 hover:text-zinc-500 hover:dark:text-neutral-300 transition-colors ml-5 mt-1 underline"
                rel="noopener noreferrer"
                target="_blank"
                href="https://buscacepinter.correios.com.br/app/endereco/index.php?t"
            >
                Não sei meu CEP
            </a>
        </div>
        <div class="flex flex-col mt-8 gap-2" x-show="formShipping.show_form">
            <div class="flex flex-col gap-1 p-1 rounded-lg border-2 border-black/[0.16] dark:border-white/[0.16] my-8" x-data="{ selected: null }">
                <template x-if="freight_list.length === 0">
                    <button
                        type="button"
                        class="group flex items-center p-4 rounded border-2 w-full border-red-500 dark:border-rose-300"
                    >
                        <div class="flex flex-col flex-1 items-start">
                            <p class="text-[0.8125rem] font-black text-red-500 dark:text-rose-300" x-text="'Sem frete cadastrado para este CEP'"></p>
                        </div>
                    </button>
                </template>
                <template x-for="item in freight_list">
                    <button
                        type="button"
                        class="group flex items-center p-2 rounded border-2 w-full hover:!border-[var(--theme-color)] pr-4"
                        :class="freight.code === item.code ? 'border-[var(--theme-color)]' : 'border-black/[0.16] dark:border-white/[0.16] bg-transparent'"
                        @click="selected = item.code; freight = item; cart.totals.freight = item.price;"
                    >
                        <div class="w-12 h-12 flex justify-center items-center">
                        <span
                            class='w-6 h-6 border-2 rounded-full flex items-center justify-center group-hover:border-[var(--theme-color)]'
                            :class="freight.code === item.code ? 'border-[var(--theme-color)]' : 'border-black/[0.16] dark:border-white/[0.16]'"
                        >
                            <span x-cloak x-show="freight.code === item.code" class='w-4 h-4 bg-[var(--theme-color)] rounded-full'></span>
                        </span>
                        </div>
                        <div class="flex flex-col flex-1 items-start">
                            <p class="text-[0.8125rem] font-black text-zinc-900 dark:text-neutral-50" x-html="item.price === 0 ? 'Grátis' : getCurrencySymbol() + formatCurrencyPrice(item.price / 100)"></p>
                            <p class="text-[0.8125rem] font-medium text-zinc-900 dark:text-neutral-50" x-text="item.description"></p>
                        </div>
                        <p class="text-[0.8125rem] font-normal text-zinc-900 dark:text-neutral-50" x-text="item.delivery_time ? item.delivery_time+' úteis' : ''"></p>
                    </button>
                </template>
            </div>
            <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.street !== ''"
>
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g id="icon-location">
        <path id="Vector" d="M20 11.1755C20 15.6907 16.4183 21 12 21C7.58172 21 4 15.6907 4 11.1755C4 6.66029 7.58172 3 12 3C16.4183 3 20 6.66029 20 11.1755Z" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" />
        <path id="Vector_2" d="M9.5 10.5C9.5 9.11929 10.6193 8 12 8C13.3807 8 14.5 9.11929 14.5 10.5C14.5 11.8807 13.3807 13 12 13C10.6193 13 9.5 11.8807 9.5 10.5Z" class="stroke-zinc-900 dark:stroke-neutral-50" />
    </g>
</svg>
                <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" id="street" placeholder="Endereço" name="street" x-ref="street" x-model="formShipping.street" x-bind:disabled="shippingLockedStreet" @keyup="validation.formShipping.street.validate(context)" @blur="validation.formShipping.street.validate(context, false, true)" maxLength="255"
>
</div>
            <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-text="formShipping.error_message" x-show="formShipping.error_message">
    
</p>
            <div class="flex items-start gap-2 justify-between">
                <div class="w-full">
                    <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:class="formShipping.no_number ? '!border-black/[0.16] dark:border-white/[0.16]' : ''"
>
    <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 !py-[0.875rem]" id="number" placeholder="Número" type="text" x-bind:disabled="formShipping.no_number ? true : false" name="street_number" x-ref="street_number" x-model="formShipping.street_number" @keyup="validation.formShipping.street_number.validate(context)" @blur="validation.formShipping.street_number.validate(context, false, true)" maxlength="9"
>
                        <label class="flex items-center text-xs font-bold text-zinc-900 dark:text-neutral-50">
                            S/N
                            <div class="w-12 h-12 flex items-center justify-center -mr-4">
                                <input
                                    type="checkbox"
                                    class="w-4.5 h-4.5 border-2 rounded-[3px] bg-white dark:bg-neutral-800 border-[var(--theme-color)] text-[var(--theme-color)] focus:ring-0"
                                    x-bind:class="formShipping.no_number && '!bg-[var(--theme-color)]'"
                                    x-model="formShipping.no_number"
                                >
                            </div>
                        </label>
</div>
                    <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formShipping.street_number.isValid && formShipping.no_number !== true" x-text="validation.formShipping.street_number.errorMessage">
    
</p>
                </div>
                <div class="w-full">
                    <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.neighborhood !== ''"
>
    <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" id="neighborhood" placeholder="Bairro" name="neighborhood" x-ref="neighborhood" x-model="formShipping.neighborhood" x-bind:disabled="shippingLockedNeighborhood" @keyup="validation.formShipping.neighborhood.validate(context)" @blur="validation.formShipping.neighborhood.validate(context, false, true)" maxLength="255"
>
</div>
                    <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formShipping.neighborhood.isValid" x-text="validation.formShipping.neighborhood.errorMessage">
    
</p>
                </div>
            </div>
            <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.complement !== ''"
>
    <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" placeholder="Complemento" name="complement" x-ref="complement" x-model="formShipping.complement" @keyup="validation.formShipping.complement.validate(context)" @blur="validation.formShipping.complement.validate(context, false, true)" maxLength="255"
>
</div>
            <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formShipping.complement.isValid" x-text="validation.formShipping.complement.errorMessage">
    
</p>
            <div class="flex items-center gap-2 justify-between">
                <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.city !== ''"
>
    <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" id="city" placeholder="Cidade" name="city" x-ref="city" x-model="formShipping.city" x-bind:disabled="shippingLockedCity" maxLength="255"
>
</div>
                <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.state !== ''"
>
    <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" id="state" placeholder="Estado" name="state" x-ref="state" x-model="formShipping.state" x-bind:disabled="shippingLockedState" x-on:input="formShipping.state = formShipping.state.toUpperCase().replace(/[^A-Z]/g, '').substring(0, 2)" maxlength="2" pattern="[A-Z]{2}" title="Insira exatamente 2 letras maiúsculas."
>
</div>
            </div>
            <div>
                <span class="flex items-center gap-2 mb-5 mt-4 text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50 ml-4">
                    Outra pessoa vai receber?
                    <button @click="formShipping.receiver_flag = true" class="font-bold underline">
                        Clique aqui
                    </button>
                </span>
                <div class="flex items-center gap-4 justify-between" x-cloak x-show="formShipping.receiver_flag" x-collapse>
                    <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.receiver !== ''"
>
    <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" placeholder="Nome do recebedor" name="receiver" x-ref="receiver" x-model="formShipping.receiver" @keyup="validation.formShipping.receiver.validate(context)" @blur="validation.formShipping.receiver.validate(context, false, true)"
>
</div>
                    <button
                        class="w-10 h-10 flex items-center justify-center"
                        @click="clearReceiver"
                    >
                        <svg width="24" height="24" class="fill-black dark:fill-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path id="Vector" d="M19 6H5C4.73478 6 4.48043 6.10536 4.29289 6.29289C4.10536 6.48043 4 6.73478 4 7C4 7.26522 4.10536 7.51957 4.29289 7.70711C4.48043 7.89464 4.73478 8 5 8V17.591C5.00106 18.4948 5.36056 19.3613 5.99964 20.0004C6.63872 20.6394 7.5052 20.9989 8.409 21H15.591C16.4948 20.9989 17.3613 20.6394 18.0004 20.0004C18.6394 19.3613 18.9989 18.4948 19 17.591V8C19.2652 8 19.5196 7.89464 19.7071 7.70711C19.8946 7.51957 20 7.26522 20 7C20 6.73478 19.8946 6.48043 19.7071 6.29289C19.5196 6.10536 19.2652 6 19 6ZM17 17.591C16.9997 17.9646 16.8512 18.3228 16.587 18.587C16.3228 18.8512 15.9646 18.9997 15.591 19H8.409C8.03539 18.9997 7.67716 18.8512 7.41298 18.587C7.1488 18.3228 7.00026 17.9646 7 17.591V8H17V17.591Z" class="fill-black dark:fill-white" />
    <path id="Vector_2" d="M10 5H14C14.2652 5 14.5196 4.89464 14.7071 4.70711C14.8946 4.51957 15 4.26522 15 4C15 3.73478 14.8946 3.48043 14.7071 3.29289C14.5196 3.10536 14.2652 3 14 3H10C9.73478 3 9.48043 3.10536 9.29289 3.29289C9.10536 3.48043 9 3.73478 9 4C9 4.26522 9.10536 4.51957 9.29289 4.70711C9.48043 4.89464 9.73478 5 10 5Z" class="fill-black dark:fill-white" fill-opacity="0.64" />
    <path id="Vector_3" d="M10 16C10.2652 16 10.5196 15.8946 10.7071 15.7071C10.8946 15.5196 11 15.2652 11 15V12C11 11.7348 10.8946 11.4804 10.7071 11.2929C10.5196 11.1054 10.2652 11 10 11C9.73478 11 9.48043 11.1054 9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12V15C9 15.2652 9.10536 15.5196 9.29289 15.7071C9.48043 15.8946 9.73478 16 10 16Z" class="fill-black dark:fill-white" fill-opacity="0.64" />
    <path id="Vector_4" d="M14 16C14.2652 16 14.5196 15.8946 14.7071 15.7071C14.8946 15.5196 15 15.2652 15 15V12C15 11.7348 14.8946 11.4804 14.7071 11.2929C14.5196 11.1054 14.2652 11 14 11C13.7348 11 13.4804 11.1054 13.2929 11.2929C13.1054 11.4804 13 11.7348 13 12V15C13 15.2652 13.1054 15.5196 13.2929 15.7071C13.4804 15.8946 13.7348 16 14 16Z" class="fill-black dark:fill-white" fill-opacity="0.64" />
</svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
                </template>
                <!-- Card de progresso para frete grátis -->
                <div class="xl:mx-8">
                    <!-- Card de progresso para frete grátis -->
<div x-show="process_getting_free_shipping.has_free_shipping && process_getting_free_shipping.free_shipping_progress < 100" class="leading-4 mt-6 rounded-xl border border-orange-100 dark:border-orange-300/10 bg-white dark:bg-neutral-900 p-4 shadow">
    <div class="relative w-full bg-neutral-200 dark:bg-neutral-400 rounded-full h-3 overflow-visible">
    <div class="bg-[var(--theme-color)] h-3 rounded-full transition-all duration-500" :style="{ width: process_getting_free_shipping.free_shipping_progress + '%' }"></div>
    <div class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-1/4 bg-[var(--theme-color)] text-white rounded-full shadow-lg w-7 h-7 flex items-center justify-center z-10">
        <div>
    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2.5 2C2.22386 2 2 2.22386 2 2.5C2 2.77614 2.22386 3 2.5 3H2.7457C2.96894 3 3.16513 3.14799 3.22646 3.36264L4.81202 8.91208C4.996 9.55603 5.58458 10 6.2543 10H10.823C11.4363 10 11.9879 9.62657 12.2157 9.05709L13.69 5.37139C13.9527 4.71453 13.4689 4 12.7615 4H4.44858L4.18798 3.08792C4.004 2.44397 3.41542 2 2.7457 2H2.5ZM6.5 14C7.32843 14 8 13.3284 8 12.5C8 11.6716 7.32843 11 6.5 11C5.67157 11 5 11.6716 5 12.5C5 13.3284 5.67157 14 6.5 14ZM10.5 14C11.3284 14 12 13.3284 12 12.5C12 11.6716 11.3284 11 10.5 11C9.67157 11 9 11.6716 9 12.5C9 13.3284 9.67157 14 10.5 14Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    </svg>
</div>
    </div>
</div>

    <div class="mt-4 text-center">
        <span class="text-sm text-zinc-800 dark:text-neutral-200">
            <span><strong x-text="'Faltam ' + getCurrencySymbol() + formatCurrencyPrice(process_getting_free_shipping.remaining_free_shipping / 100)"></strong> para você ganhar <strong class="text-[var(--theme-color)]">FRETE GRÁTIS!</strong></span>
        </span>
    </div>
</div>
                </div>
                <div class="flex mt-10 justify-end mx-3 xl:mx-8">
                    <template x-if="!checkoutConfig.hasFreight">
                        <button class="py-3 h-10 pl-4 pr-3 flex items-center gap-2 border-3 border-[var(--theme-color)] rounded-[var(--border-radius)] text-zinc-900 dark:text-neutral-50 text-sm leading-4 font-bold hover:scale-105 transition-transform" @click="validateForm(validation.formIdentification) ? stepCurrent = STEP_ENUM.PAYMENT : null">
    Pagamento
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M6.5 12H17" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M12.9116 8L17.4999 12L12.9116 16" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</button>
                    </template>
                    <template x-if="checkoutConfig.hasFreight">
                        <button class="py-3 h-10 pl-4 pr-3 flex items-center gap-2 border-3 border-[var(--theme-color)] rounded-[var(--border-radius)] text-zinc-900 dark:text-neutral-50 text-sm leading-4 font-bold hover:scale-105 transition-transform" @click="validateForm(validation.formShipping) ? stepCurrent = STEP_ENUM.PAYMENT : null">
    Pagamento
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M6.5 12H17" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M12.9116 8L17.4999 12L12.9116 16" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</button>
                    </template>
                </div>
            </div>
        </template>
        <div x-show="stepCurrent === STEP_ENUM.PAYMENT">
            <!-- Payment Form -->
            <div id="payment_form" class="mt-8 mx-3" x-cloak>
    <template x-if="checkoutConfig.form_step_enum === 1">
        <div class="mb-8 xl:mx-8">
            <div class="flex items-center justify-between ">
                <div class="flex items-center justify-center text-base leading-4 font-black rounded-lg w-8 h-8 bg-[var(--theme-color)] text-[var(--contrast-color)]">
                    2
                </div>
                <div class="flex items-center gap-1.5">
                    <p class="text-lg leading-8 font-medium text-zinc-900 dark:text-neutral-50">Opções de pagamento</p>
                </div>
            </div>
        </div>
    </template>
    <template x-if="checkoutConfig.form_step_enum === 2">
        <div class="my-8 xl:mx-8">
            <div class="flex items-center justify-between ">
                <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Opções de pagamento</p>
                <div class="flex items-center gap-1.5">
                    <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50">Ambiente seguro</p>
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.4627 4.7991C21.4265 4.54124 21.2395 4.32912 20.9866 4.2594L12.8838 2.02392C12.7683 1.99203 12.6463 1.99203 12.5307 2.02392L4.42791 4.2594C4.1751 4.32912 3.98808 4.54115 3.95188 4.7991C3.90489 5.13436 2.83274 13.0556 5.58272 16.9962C8.32945 20.9321 12.3815 21.9407 12.5526 21.9818C12.6034 21.994 12.6553 22 12.7073 22C12.7593 22 12.8111 21.9939 12.862 21.9818C13.0332 21.9407 17.0852 20.9321 19.8318 16.9962C22.5818 13.0557 21.5097 5.13444 21.4627 4.7991ZM17.9325 9.42362L12.4056 14.9066C12.277 15.0342 12.1084 15.0981 11.9398 15.0981C11.7712 15.0981 11.6025 15.0343 11.4739 14.9066L8.05669 11.5165C7.93309 11.394 7.8637 11.2277 7.8637 11.0544C7.8637 10.8811 7.93318 10.7148 8.05669 10.5923L8.7352 9.91914C8.9925 9.66397 9.40967 9.66388 9.66688 9.91914L11.9398 12.174L16.3223 7.82614C16.4459 7.70352 16.6135 7.63468 16.7882 7.63468C16.9629 7.63468 17.1305 7.70352 17.254 7.82614L17.9325 8.49926C18.1898 8.75451 18.1898 9.16837 17.9325 9.42362Z" class="fill-[var(--theme-color)]"/>
</svg>
                </div>
            </div>
        </div>
    </template>
    <div class="flex items-center justify-between gap-2 xl:mx-8">
        <template x-if="checkoutConfig.credit_card_flag">
            <button
                class="relative flex w-full justify-center items-center gap-1 h-14 border-[0.1875rem] rounded-[var(--border-radius)] border-black/[0.16] hover:border-black/[0.08] dark:border-white/[0.16] dark:hover:border-white/[0.08] transition-colors"
                x-bind:class="{ '!border-[var(--theme-color)]  cursor-default' : formPayment.payment_method === 2 }"
                @click="formPayment.payment_method = 2; totalDiscountAutomatic()"
            >
                <svg x-bind:data-active="formPayment.payment_method === 2" class="group" width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M4.8335 9H21.8335" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M7.0835 16.7539H8.8335" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M11.021 16.7539H14.521" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M7.8295 4H17.8285C21.0325 4 21.8335 4.82872 21.8335 8.13418V15.8657C21.8335 19.1712 21.0325 19.9999 17.8375 19.9999H7.8295C4.6345 20.0093 3.8335 19.1806 3.8335 15.8752V8.13418C3.8335 4.82872 4.6345 4 7.8295 4Z" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
</svg>
                <p
                    class="text-black/[0.64] dark:text-white/[0.64] text-sm font-black"
                    x-bind:class="{ '!text-zinc-900 dark:!text-neutral-50' : formPayment.payment_method === 2 }"
                >Cartão</p>
                <div x-text="formPayment.credit_card_automatic_discount+'% '" x-show="formPayment.credit_card_automatic_discount > 0" class="absolute -bottom-[50%] left-[50%] -translate-x-[50%] -translate-y-[50%] rounded-[var(--border-radius)] bg-[var(--theme-color)] text-[var(--contrast-color)] py-1 px-2 text-xs font-bold">
    <p ></p>
</div>
            </button>
        </template>
        <template x-if="checkoutConfig.pix_flag">
            <button
                class="relative flex w-full justify-center items-center gap-1 h-14 border-[0.1875rem] rounded-[var(--border-radius)] border-black/[0.16] hover:border-black/[0.08] dark:border-white/[0.16] dark:hover:border-white/[0.08] transition-colors"
                x-bind:class="{ '!border-[var(--theme-color)]  cursor-default': formPayment.payment_method === 3 }"
                @click="formPayment.payment_method = 3; totalDiscountAutomatic()"
            >
                <svg x-bind:data-active="formPayment.payment_method === 3" class="group" width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_1918_13812)">
            <mask id="mask0_1918_13812" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="2" y="2" width="21" height="20">
                <path d="M22.5391 2H2.5V22H22.5391V2Z" fill="white" />
            </mask>
            <g mask="url(#mask0_1918_13812)">
                <path d="M7.91257 17.7935C8.47903 17.6276 8.99946 17.3214 9.42834 16.8925L12.3532 13.9677C12.3685 13.9524 12.3933 13.9524 12.4085 13.9677L15.3451 16.9042C15.8191 17.3782 16.4049 17.7024 17.0411 17.8529L14.2171 20.6769C13.275 21.5912 11.7409 21.5911 10.7989 20.6768L7.91257 17.7935ZM10.9332 11.647L10.9489 11.6607C11.0943 11.7879 11.2633 11.9061 11.4501 12.002C11.2562 12.0973 11.0759 12.2243 10.9179 12.3832C10.9175 12.3836 10.9172 12.3839 10.9169 12.3842L7.92592 15.3713C7.61128 15.659 7.26416 15.8 6.90729 15.8H5.92119L3.83376 13.7132L3.83349 13.713C2.89079 12.7717 2.89079 11.2431 3.83349 10.3018L3.83414 10.3012L5.92151 8.21095H6.90729C7.26408 8.21095 7.61116 8.35185 7.92576 8.63952L10.9332 11.647ZM13.8432 12.3787C13.686 12.2215 13.5065 12.0956 13.3137 12.0011C13.4996 11.9053 13.668 11.7874 13.8128 11.6607L13.8285 11.647L16.8546 8.62082C16.855 8.62046 16.8553 8.62015 16.8557 8.6198C17.1229 8.35581 17.4929 8.20312 17.8662 8.20312H19.0823L21.1807 10.3015C22.122 11.2429 22.122 12.772 21.1807 13.7133L19.0823 15.8117H17.8662C17.4928 15.8117 17.1235 15.6589 16.8569 15.3924L13.8432 12.3787Z" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.25245" />
                <path d="M9.42837 7.11072C8.99949 6.68184 8.47906 6.37561 7.9126 6.20974L10.7989 3.32642C11.741 2.41209 13.275 2.41201 14.2171 3.32626L17.0412 6.15033C16.405 6.30078 15.8191 6.62497 15.3451 7.09898L12.4086 10.0356C12.3933 10.0508 12.3685 10.0508 12.3532 10.0356L9.42837 7.11072Z" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.25245" />
            </g>
        </g>
        <defs>
            <clipPath id="clip0_1918_13812">
                <rect width="20.0391" height="20" class="fill-black/[0.64] dark:fill-white/[0.64] group-data-[active=true]:fill-zinc-900 dark:group-data-[active=true]:fill-neutral-50" transform="translate(2.5 2)" />
            </clipPath>
        </defs>
    </svg>

                <p
                    class="text-black/[0.64] dark:text-white/[0.64] text-sm font-black"
                    x-bind:class="{ '!text-zinc-900 dark:!text-neutral-50' : formPayment.payment_method === 3 }"
                >Pix</p>
                <div x-text="checkoutConfig.pix_automatic_discount+'%'" x-show="checkoutConfig.pix_automatic_discount > 0" class="absolute -bottom-[50%] left-[50%] -translate-x-[50%] -translate-y-[50%] rounded-[var(--border-radius)] bg-[var(--theme-color)] text-[var(--contrast-color)] py-1 px-2 text-xs font-bold">
    <p ></p>
</div>
            </button>
        </template>
        <template x-if="checkoutConfig.billet_flag">
            <button
                class="relative flex w-full justify-center items-center gap-1 h-14 border-[0.1875rem] rounded-[var(--border-radius)] border-black/[0.16] hover:border-black/[0.08] dark:border-white/[0.16] dark:hover:border-white/[0.08] transition-colors"
                x-bind:class="{ '!border-[var(--theme-color)] cursor-default' : formPayment.payment_method === 1 }"
                @click="formPayment.payment_method = 1; totalDiscountAutomatic()"
            >
                <svg x-bind:data-active="formPayment.payment_method === 1" class="group" width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M6.41699 19.7076V4.29238L8.79489 5.65118L9.16699 5.86381L9.5391 5.65118L12.667 3.86381L15.7949 5.65118L16.167 5.86381L16.5391 5.65118L18.917 4.29238V19.7076L16.5391 18.3488L16.167 18.1362L15.7949 18.3488L12.667 20.1362L9.5391 18.3488L9.16699 18.1362L8.79489 18.3488L6.41699 19.7076Z" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.5" />
    <line x1="9.66699" y1="9.25" x2="15.667" y2="9.25" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.5" />
    <line x1="9.66699" y1="12.25" x2="15.667" y2="12.25" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.5" />
    <line x1="9.66699" y1="15.25" x2="15.667" y2="15.25" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.5" />
</svg>
                <p
                    class="text-black/[0.64] dark:text-white/[0.64] text-sm font-black"
                    x-bind:class="{ '!text-zinc-900 dark:!text-neutral-50' : formPayment.payment_method === 1 }"
                >Boleto</p>
                <div x-text="checkoutConfig.billet_automatic_discount+'%'" x-show="checkoutConfig.billet_automatic_discount > 0" class="absolute -bottom-[50%] left-[50%] -translate-x-[50%] -translate-y-[50%] rounded-[var(--border-radius)] bg-[var(--theme-color)] text-[var(--contrast-color)] py-1 px-2 text-xs font-bold">
    <p ></p>
</div>
            </button>
        </template>
    </div>
    <template x-if="formPayment.payment_method === 2">
        <div id="payment-credit-card-container" class="mt-8 xl:mx-8">
    <template x-if="checkoutConfig.form_step_enum === 3">
        <div class="my-8">
            <div class="flex items-center justify-between ">
                <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Opções de pagamento</p>
                <div class="flex items-center gap-1.5">
                    <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50">Ambiente seguro</p>
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.4627 4.7991C21.4265 4.54124 21.2395 4.32912 20.9866 4.2594L12.8838 2.02392C12.7683 1.99203 12.6463 1.99203 12.5307 2.02392L4.42791 4.2594C4.1751 4.32912 3.98808 4.54115 3.95188 4.7991C3.90489 5.13436 2.83274 13.0556 5.58272 16.9962C8.32945 20.9321 12.3815 21.9407 12.5526 21.9818C12.6034 21.994 12.6553 22 12.7073 22C12.7593 22 12.8111 21.9939 12.862 21.9818C13.0332 21.9407 17.0852 20.9321 19.8318 16.9962C22.5818 13.0557 21.5097 5.13444 21.4627 4.7991ZM17.9325 9.42362L12.4056 14.9066C12.277 15.0342 12.1084 15.0981 11.9398 15.0981C11.7712 15.0981 11.6025 15.0343 11.4739 14.9066L8.05669 11.5165C7.93309 11.394 7.8637 11.2277 7.8637 11.0544C7.8637 10.8811 7.93318 10.7148 8.05669 10.5923L8.7352 9.91914C8.9925 9.66397 9.40967 9.66388 9.66688 9.91914L11.9398 12.174L16.3223 7.82614C16.4459 7.70352 16.6135 7.63468 16.7882 7.63468C16.9629 7.63468 17.1305 7.70352 17.254 7.82614L17.9325 8.49926C18.1898 8.75451 18.1898 9.16837 17.9325 9.42362Z" class="fill-[var(--theme-color)]"/>
</svg>
                </div>
            </div>
        </div>
    </template>
        <div class="credit-card-container">
            <div class="credit-card-preview my-10">
                <section
        class='w-67.5 h-42 bg-transparent perspective mx-auto'
>
    <div
            class="relative preserve-3d w-full h-full duration-1000"
            x-on:flip.window="$event.detail == 0 ? formPayment.credit_cards[0].flip_credit_card = !formPayment.credit_cards[0].flip_credit_card : '' "
            x-bind:class="formPayment.credit_cards[0].flip_credit_card ? 'flip-credit-card' : ''"
    >
        <div class='absolute backface-hidden bg-[var(--theme-color)] w-full h-full  px-4 py-6 rounded-2xl bg-credit-card flex flex-col justify-between'>
            <div class='flex justify-between items-start'>
                <div class='w-full flex justify-end'>
                    <img class="flag-credit-card" src="https://checkout.ligafacil.online/images/flags/fake-card.svg" alt="ícone bandeira de cartão">
                </div>
            </div>
            <input
                    class='text-[var(--contrast-color)] font-bold uppercase text-sm border-none bg-transparent w-full'
                    type='text'
                    x-model="formPayment.credit_cards[0].full_name.length === 0 ? 'Nome impresso no cartão' : formPayment.credit_cards[0].full_name"
                    x-on:card-name.window="$event.detail[0] == 0 ? formPayment.credit_cards[0].full_name = $event.detail[1] : ''"
                    disabled
            >
            <div class='font-bold text-base'>
                <input
                        id="card-number"
                        class='p-0 w-full border-none bg-transparent text-center text-lg text-[var(--contrast-color)]'
                        x-mask="9999 9999 9999 9999"
                        type='text'
                        x-model="formPayment.credit_cards[0].number.length === 0 ? '0000 0000 0000 0000' : formPayment.credit_cards[0].number"
                        x-on:card-number.window="$event.detail[0] == 0 ? formPayment.credit_cards[0].number = $event.detail[1] : ''"
                        disabled
                >
            </div>
            <p class='text-xs'>
                <input
                        class='border-none bg-transparent text-xs text-[var(--contrast-color)]'
                        type='text'
                        x-model="formPayment.credit_cards[0].expiration.length === 0 ? 'MM / AA' : formPayment.credit_cards[0].expiration"
                        x-on:card-expiration.window="$event.detail[0] == 0 ? formPayment.credit_cards[0].expiration = $event.detail[1] : ''"
                        disabled
                >
            </p>
        </div>
        <div class='absolute flip-credit-card backface-hidden bg-[var(--theme-color)] w-full h-full mx-auto rounded-2xl bg-credit-card flex flex-col'>
            <div class='w-full h-8 bg-black mt-3.5 mb-2.5'></div>
            <div class='mx-8 text-right'>
                <p class='text-[8px] text-[var(--contrast-color)] leading-[8px] tracking-[0.02rem] pr-2'>Código de
                    <br /> segurança:</p>
                <div class='bg-white pr-2 mt-1 h-6 flex items-center justify-end'>
                    <input
                            class='border-none text-base font-black text-right w-full p-0 text-secondary'
                            x-mask="000"
                            type='text'
                            x-model="formPayment.credit_cards[0].cvv.length === 0 ? '000' : formPayment.credit_cards[0].cvv"
                            x-on:cod-sec.window="formPayment.credit_cards[0].cvv = $event.detail"
                            disabled
                    >
                </div>
                <p class='text-[4px] text-[var(--contrast-color)] font-medium text-left mt-4'>O código de segurança do cartão (CVV) é um número de três dígitos impresso na maioria dos cartões de crédito e débito. Quando você insere os dados do seu cartão, como medida de segurança adicional, solicitamos que também forneça o código de segurança do cartão (CVV).</p>
            </div>
        </div>
    </div>
</section>
            </div>
            <div class="flex flex-col gap-2">
                <div
    x-ref="creditCardNumber" x-bind:data-filled="formPayment.credit_cards[0].number !== ''" id="input-card-number-0" index="0" placeholder="0000 0000 0000 0000" x-mask="9999 9999 9999 9999" x-model="formPayment.credit_cards[0].number" x-on:keyup="getFlagCreditCard($el)"
    class="flex flex-col w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]"
>
            <label for="input-card-number-0" class="text-[0.8125rem] font-bold leading-5 text-black/[0.64] dark:text-white/[0.64] flex-1 pt-2">
            Número do cartão
        </label>
        <div class="w-full flex items-center">
                        <input
            x-ref="creditCardNumber" x-bind:data-filled="formPayment.credit_cards[0].number !== ''" id="input-card-number-0" index="0" placeholder="0000 0000 0000 0000" x-mask="9999 9999 9999 9999" x-model="formPayment.credit_cards[0].number" x-on:keyup="getFlagCreditCard($el)"
            type="text"
            class="w-full h-[3.25rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50"
        >
            
        
    </div>
</div>
                <div class="flex items-center gap-2 justify-between">
                    <div class="w-7/12">
                        <div
    x-bind:data-filled="formPayment.credit_cards[0].expiration !== ''" id="credit_card_expiration-0" index="0" name="credit_card_expiration-0" placeholder="10/28" x-mask="99/99" x-model="formPayment.credit_cards[0].expiration" x-on:keyup="$dispatch('card-expiration', [0,formPayment.credit_cards[0].expiration])"
    class="flex flex-col w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]"
>
            <label for="credit_card_expiration-0" class="text-[0.8125rem] font-bold leading-5 text-black/[0.64] dark:text-white/[0.64] flex-1 pt-2">
            Expiração
        </label>
        <div class="w-full flex items-center">
                        <input
            x-bind:data-filled="formPayment.credit_cards[0].expiration !== ''" id="credit_card_expiration-0" index="0" name="credit_card_expiration-0" placeholder="10/28" x-mask="99/99" x-model="formPayment.credit_cards[0].expiration" x-on:keyup="$dispatch('card-expiration', [0,formPayment.credit_cards[0].expiration])"
            type="text"
            class="w-full h-[3.25rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50"
        >
            
        
    </div>
</div>
                    </div>
                    <div class="w-5/12">
                        <div
    x-bind:data-filled="formPayment.credit_cards[0].cvv !== ''" id="cardCvv-0" index="0" placeholder="000" x-mask="9999" x-model="formPayment.credit_cards[0].cvv" x-on:keyup="$dispatch('formPayment.credit_cards[0].cvv', formPayment.credit_cards[0].cvv)" x-on:focus="$dispatch('flip',0)" x-on:blur="$dispatch('flip',0)"
    class="flex flex-col w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]"
>
            <label for="cardCvv-0" class="text-[0.8125rem] font-bold leading-5 text-black/[0.64] dark:text-white/[0.64] flex-1 pt-2">
            CVV
        </label>
        <div class="w-full flex items-center">
                        <input
            x-bind:data-filled="formPayment.credit_cards[0].cvv !== ''" id="cardCvv-0" index="0" placeholder="000" x-mask="9999" x-model="formPayment.credit_cards[0].cvv" x-on:keyup="$dispatch('formPayment.credit_cards[0].cvv', formPayment.credit_cards[0].cvv)" x-on:focus="$dispatch('flip',0)" x-on:blur="$dispatch('flip',0)"
            type="text"
            class="w-full h-[3.25rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50"
        >
            
                        <div
        class="flex items-center gap-4 relative cursor-pointer z-20"
        x-data="{ tooltip: false }"
        x-on:mouseover="tooltip = true"
        x-on:mouseleave="tooltip = false"
>
            <div class="w-6 h-6" stroke="stroke-gray-600 dark:stroke-zinc-400">
    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_139_8790)">
            <path d="M12 3C7.03747 3 3 7.03747 3 12C3 16.9626 7.03747 21 12 21C16.9626 21 21 16.9626 21 12C21 7.03747 16.9625 3 12 3ZM12.5854 17.3399C12.1579 17.4112 11.3071 17.5893 10.875 17.625C10.5093 17.6553 10.1642 17.446 9.95381 17.1455C9.74289 16.845 9.69235 16.4605 9.81757 16.1155L11.5188 11.4375H9.75C9.74848 10.4628 10.4796 9.74605 11.4148 9.47098C11.861 9.33968 12.6925 9.16 13.125 9.18754C13.3841 9.20402 13.8358 9.3666 14.0462 9.66711C14.2571 9.96758 14.3077 10.3521 14.1824 10.6971L12.4812 15.375H14.2495C14.2498 16.3487 13.5459 17.1799 12.5854 17.3399ZM13.125 8.62502C12.5037 8.62502 12 8.12128 12 7.50001C12 6.87867 12.5037 6.375 13.125 6.375C13.7463 6.375 14.25 6.87867 14.25 7.50001C14.25 8.12131 13.7464 8.62502 13.125 8.62502Z" class="fill-gray-600 dark:fill-zinc-400"/>
        </g>
        <defs>
            <clipPath id="clip0_139_8790">
                <rect width="18" height="18" fill="white" transform="translate(3 3)"/>
            </clipPath>
        </defs>
    </svg>
</div>
        <div
            x-cloak x-show="tooltip"
            class="absolute w-[200px] right-10"
    >
        <div
                class="p-4 text-sm rounded-xl font-medium relative flex items-center flex-wrap '<?php echo bg-gray-600 dark:bg-zinc-400 text-white dark:text-zinc-900; ?>'"
        >
            <div
                    class="absolute rounded-sm rotate-45 h-6 w-6 '<?php echo bg-gray-600 dark:bg-zinc-400 text-white dark:text-zinc-900; ?>' -right-1"
            ></div>
            <p class="relative z-50" x-html="'Código de segurança de 3 ou 4 dígitos presente na parte de trás do cartão.'"></p>
        </div>
    </div>
</div>

        
    </div>
</div>
                    </div>
                </div>
                <div
    x-bind:data-filled="formPayment.credit_cards[0].full_name !== ''" id="credit_card_full_name-0" index="0" placeholder="Nome impresso no cartão" x-on:keyup="$dispatch('card-name', [0,formPayment.credit_cards[0].full_name])" x-model="formPayment.credit_cards[0].full_name"
    class="flex flex-col w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]"
>
            <label for="credit_card_full_name-0" class="text-[0.8125rem] font-bold leading-5 text-black/[0.64] dark:text-white/[0.64] flex-1 pt-2">
            Nome impresso no cartão
        </label>
        <div class="w-full flex items-center">
                        <input
            x-bind:data-filled="formPayment.credit_cards[0].full_name !== ''" id="credit_card_full_name-0" index="0" placeholder="Nome impresso no cartão" x-on:keyup="$dispatch('card-name', [0,formPayment.credit_cards[0].full_name])" x-model="formPayment.credit_cards[0].full_name"
            type="text"
            class="w-full h-[3.25rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50"
        >
            
        
    </div>
</div>
                <div
    x-show="formPayment.multi_credit_card == 1" id="input-card-total-0" index="0" x-model="formPayment.credit_cards[0].amount" placeholder="1200,00" @blur="setCardValue($el)" @input="formPayment.credit_cards[0].amount = maskCurrency($event.target.value)"
    class="flex flex-col w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]"
>
            <label for="input-card-total-0" class="text-[0.8125rem] font-bold leading-5 text-black/[0.64] dark:text-white/[0.64] flex-1 pt-2">
            Valor
        </label>
        <div class="w-full flex items-center">
                            <span  class="text-base text-zinc-900 dark:text-neutral-50 font-bold" x-html="'R$'">  </span>
                <input
            x-show="formPayment.multi_credit_card == 1" id="input-card-total-0" index="0" x-model="formPayment.credit_cards[0].amount" placeholder="1200,00" @blur="setCardValue($el)" @input="formPayment.credit_cards[0].amount = maskCurrency($event.target.value)"
            type="text"
            class="w-full h-[3.25rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50"
        >
            
                        <div
        class="flex items-center gap-4 relative cursor-pointer z-20"
        x-data="{ tooltip: false }"
        x-on:mouseover="tooltip = true"
        x-on:mouseleave="tooltip = false"
>
            <div class="w-6 h-6" stroke="stroke-gray-600 dark:stroke-zinc-400">
    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_139_8790)">
            <path d="M12 3C7.03747 3 3 7.03747 3 12C3 16.9626 7.03747 21 12 21C16.9626 21 21 16.9626 21 12C21 7.03747 16.9625 3 12 3ZM12.5854 17.3399C12.1579 17.4112 11.3071 17.5893 10.875 17.625C10.5093 17.6553 10.1642 17.446 9.95381 17.1455C9.74289 16.845 9.69235 16.4605 9.81757 16.1155L11.5188 11.4375H9.75C9.74848 10.4628 10.4796 9.74605 11.4148 9.47098C11.861 9.33968 12.6925 9.16 13.125 9.18754C13.3841 9.20402 13.8358 9.3666 14.0462 9.66711C14.2571 9.96758 14.3077 10.3521 14.1824 10.6971L12.4812 15.375H14.2495C14.2498 16.3487 13.5459 17.1799 12.5854 17.3399ZM13.125 8.62502C12.5037 8.62502 12 8.12128 12 7.50001C12 6.87867 12.5037 6.375 13.125 6.375C13.7463 6.375 14.25 6.87867 14.25 7.50001C14.25 8.12131 13.7464 8.62502 13.125 8.62502Z" class="fill-gray-600 dark:fill-zinc-400"/>
        </g>
        <defs>
            <clipPath id="clip0_139_8790">
                <rect width="18" height="18" fill="white" transform="translate(3 3)"/>
            </clipPath>
        </defs>
    </svg>
</div>
        <div
            x-cloak x-show="tooltip"
            class="absolute w-[200px] right-10"
    >
        <div
                class="p-4 text-sm rounded-xl font-medium relative flex items-center flex-wrap '<?php echo bg-gray-600 dark:bg-zinc-400 text-white dark:text-zinc-900; ?>'"
        >
            <div
                    class="absolute rounded-sm rotate-45 h-6 w-6 '<?php echo bg-gray-600 dark:bg-zinc-400 text-white dark:text-zinc-900; ?>' -right-1"
            ></div>
            <p class="relative z-50" x-html="'Valor mínimo de  R$ 5,00.'"></p>
        </div>
    </div>
</div>

        
    </div>
</div>
                <div x-show="businessCurrency === 'brl'">
                    <div class="relative">
    <div
        class="relative flex flex-col w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 hover:border-[var(--theme-color)] dark:hover:border-[var(--theme-color)] transition-colors"
    >
                    <div class="text-[0.8125rem] font-bold leading-5 text-black/[0.64] dark:text-white/[0.64] flex-1 pt-2">
                Parcelamento
            </div>
                <button
            type="button"
            class="w-full flex items-center justify-between py-[0.875rem]"
            @click="installmentsOpen[0] = !installmentsOpen[0]"
            @click.outside="installmentsOpen[0] = false"
        >
            <div class="flex items-center gap-1 text-base font-bold text-zinc-900 dark:text-neutral-50">
                <p x-text="installmentIndex[0] + 'x'"></p>
                <p>de</p>
                <p x-text="installmentsData[0][(installmentIndex[0] - 1)]?.value+'*'"></p>
                <p x-show="installmentIndex[0] <= formPayment.credit_card.interest_free_installments" x-text="'Sem juros'"></p>
            </div>
            <div >
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14.5 11L12 13.5L9.5 11" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5"
                  stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </div>

        </button>
    </div>
    <div x-cloak x-show="installmentsOpen[0]" class="absolute left-0 flex flex-col w-full z-10 bg-white dark:bg-neutral-800 px-1 py-2 rounded-b-lg h-60 overflow-auto">
        <template x-for="(installment, index) in getInstallments(0)" :key="index">
            <label @click="installmentIndex[0] = installment.amount">
                <input class="hidden" type="radio" name="installments" x-model="installments[0]" x-bind:value="installment.amount">
                <div class="flex items-center gap-1 px-4 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-zinc-900 rounded label-checked:bg-gray-100 dark:label-checked:bg-zinc-900">
                    <span class="text-base font-medium text-zinc-900 dark:text-neutral-50" x-text="installment.amount + 'x'"></span>
                    <span class="text-base font-medium text-zinc-900 dark:text-neutral-50">de</span>
                    <p class="text-base font-medium text-zinc-900 dark:text-neutral-50" x-text="installment.value"></p>
                    <p class="text-base font-medium text-zinc-900 dark:text-neutral-50" x-show="installment.amount <= formPayment.credit_card.interest_free_installments" x-text="'Sem juros'"></p>
                </div>
            </label>
        </template>
    </div>
    <span
        class="font-medium text-[0.8125rem] text-black/[0.64] dark:text-white/[0.64] leading-4 mx-5"
        x-text="displayTaxOnCreditCard(formPayment.credit_cards[0].gateway_installment_tax)"
    ></span>
</div>
                </div>
            </div>
        </div>

        </div>
    </template>
</div>
            <!-- Order Bump -->
            <template x-if="orderBumps.length > 0">
    <div class="pt-10 mx-3 md:px-6">
        <div
            class="bg-white dark:bg-neutral-800 rounded-2xl border border-dashed border-[var(--theme-color)] pt-6 relative flex flex-col min-h-[413px] overflow-x-hidden"
            x-bind:class="{ 'px-6': checkoutConfig.order_bump_position_enum === 1, 'px-2': checkoutConfig.order_bump_position_enum === 2}"
            id="default-carousel"
            data-carousel="static"
        >
            <div x-bind:class="{ 'px-4': checkoutConfig.order_bump_position_enum === 2}">
                <div>
    <div class="flex justify-center md:justify-between gap-2 py-4 px-3 bg-[var(--theme-color)] rounded-lg">
        <div class="flex items-center justify-center gap-2">
            <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.156 14.0517C20.8811 10.4723 19.2146 8.22933 17.7444 6.24998C16.383 4.41754 15.2073 2.83514 15.2073 0.500856C15.2073 0.313356 15.1023 0.141981 14.9358 0.0560595C14.7688 -0.030378 14.5681 -0.0162217 14.4163 0.094122C12.2083 1.67409 10.366 4.33701 9.72243 6.87783C9.27567 8.64675 9.21656 10.6354 9.20826 11.9488C7.1692 11.5132 6.70729 8.46319 6.70242 8.42995C6.67945 8.27175 6.58279 8.13408 6.44217 8.05889C6.30009 7.98468 6.13307 7.97929 5.98903 8.05059C5.8821 8.10234 3.36449 9.38156 3.21801 14.4891C3.20774 14.659 3.20728 14.8295 3.20728 14.9999C3.20728 19.9619 7.24485 23.9992 12.2073 23.9992C12.2141 23.9997 12.2214 24.0007 12.2273 23.9992C12.2293 23.9992 12.2312 23.9992 12.2336 23.9992C17.1839 23.985 21.2073 19.9531 21.2073 14.9999C21.2073 14.7503 21.156 14.0517 21.156 14.0517ZM12.2073 22.9993C10.553 22.9993 9.20728 21.5658 9.20728 19.8037C9.20728 19.7437 9.20681 19.6831 9.21117 19.6089C9.23118 18.8658 9.37232 18.3585 9.5271 18.0211C9.81717 18.6442 10.3357 19.2169 11.178 19.2169C11.4544 19.2169 11.678 18.9932 11.678 18.7169C11.678 18.0051 11.6927 17.1838 11.8699 16.4426C12.0276 15.7854 12.4046 15.0862 12.8821 14.5258C13.0945 15.2533 13.5086 15.8421 13.9129 16.4167C14.4915 17.2389 15.0897 18.089 15.1947 19.5386C15.201 19.6245 15.2074 19.711 15.2074 19.8037C15.2073 21.5658 13.8616 22.9993 12.2073 22.9993Z" class="fill-[var(--contrast-color)]" />
</svg>
            <p class="text-[var(--contrast-color)] text-xl leading-6 font-black">0 oferta exclusiva</p>
        </div>
        <template x-if="checkoutConfig.order_bump_position_enum === 2">
            <div class="items-center hidden md:flex">
                <button type="button"
                        class="flex items-center justify-center h-full cursor-pointer group focus:outline-none"
                        data-carousel-prev>
                    <span
                        class="inline-flex items-center justify-center w-10 h-10">
                        <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M14.7073 17L12.2073 14.5L9.70728 12L14.7073 7" stroke="white" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round"/>
    <path d="M14.7354 7L9.73535 12L12.2354 14.5" stroke="white" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round"/>
</svg>
                        <span class="sr-only">Anterior</span>
                    </span>
                </button>
                <button type="button"
                        class="flex items-center justify-center h-full cursor-pointer group focus:outline-none"
                        data-carousel-next>
                    <span
                        class="inline-flex items-center justify-center w-10 h-10">
                        <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M9.70728 17L12.2073 14.5L14.7073 12L9.70728 7" stroke="white" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round"/>
    <path d="M9.73535 7.00024L14.7354 12.0002L12.2354 14.5002" stroke="white" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round"/>
</svg>
                        <span class="sr-only">Próximo</span>
                    </span>
                </button>
            </div>
        </template>
    </div>
</div>            </div>
            <div class="my-6">
                <p class="text-zinc-900 dark:text-neutral-50 text-lg leading-6 px-4 text-center" x-html="checkoutConfig.order_bump_text"></p>
            </div>
            <template x-if="checkoutConfig.order_bump_position_enum === 2">
                <div class="relative rounded-lg min-h-[338px] md:min-h-[338px] z-10">
                    <!-- MOBILE: scroll lateral -->
                    <div class="md:hidden">
                        <div class="flex gap-4 overflow-x-auto snap-x snap-mandatory scroll-smooth no-scrollbar px-2">
                            <template x-for="(order_bump, index_of_order_bump) in orderBumps" :key="index_of_order_bump" >
                                <div class="snap-center shrink-0 w-[calc(100%_-_0px)]">
                                    <div
    x-data="{
        selectedVariant() {
            return order_bump.product.primaryVariants?.find(variant => variant.selected_flag);
        },
        selectedCode() {
            return this.selectedVariant()?.code || order_bump.product.product_code;
        }
    }"
    class="rounded-2xl border-[var(--theme-color)] px-2 py-2 bg-gray-100 dark:bg-zinc-900"
    x-bind:class="{
        'border-4': hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code),
        'border': !hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code),
        'mr-4': checkoutConfig.order_bump_position_enum === 2
    }"
>
    <div class="bg-white dark:bg-neutral-800 rounded-xl p-4 shadow-md">
        <div
            class="flex flex-col md:flex-row"
            x-bind:class="{
                'md:gap-4 items-start': order_bump.product.image_url,
            }"
        >
            <div class="flex items-center gap-2">
                <template x-if="order_bump.product.image_url">
                    <div class="w-10 h-10">
                        <img x-bind:src="order_bump.product.image_url" x-bind:alt="order_bump.product.title"
                            class="rounded overflow-hidden">
                    </div>
                </template>
                <p class="text-zinc-900 dark:text-neutral-50 text-lg block md:hidden leading-6 font-bold" x-text="order_bump.product.title"></p>
            </div>
            <div class="w-full space-y-3">
                <p class="text-zinc-900 dark:text-neutral-50 text-lg hidden md:block leading-6 font-bold" x-text="order_bump.product.title"></p>

                <!-- Variantes Primárias -->
                <template x-if="order_bump.product.primaryVariants && order_bump.product.primaryVariants.length > 0">
                    <div class="flex gap-2 flex-wrap mt-2">
                        <template x-for="variant in order_bump.product.primaryVariants" :key="variant.code">
                            <!-- Botão de Variante -->
                            <button
                                :class="{
                                    'w-20 h-20 p-2 -ml-2.5': variant.image_url,
                                    'w-auto h-auto px-4 py-2 -ml-4.5': !variant.image_url,
                                    'flex items-center justify-center rounded-lg': true
                                }"
                                @click="hasSelectedOffer(order_bump.product.product_code, variant.code)
                                    ? removePickUpOffer(order_bump.product.product_code, variant.code)
                                    : pickUpOffer(order_bump.product, order_bump.order_bump_code)"
                            >
                                <!-- Exibe a imagem, se disponível -->
                                <template x-if="variant.image_url">
                                    <img x-bind:src="variant.image_url" x-bind:alt="variant.title" class="w-full h-full object-contain rounded-lg border-2"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(order_bump.product.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(order_bump.product.product_code, variant.code)
                                        }">
                                </template>

                                <!-- Exibe o texto, se não houver imagem -->
                                <template x-if="!variant.image_url">
                                    <span class="text-sm font-semibold text-center whitespace-nowrap overflow-hidden text-ellipsis border-2 flex items-center justify-center w-auto h-auto rounded-lg py-2 px-2.5"
                                        x-text="variant.tag"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(order_bump.product.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(order_bump.product.product_code, variant.code)
                                        }">
                                    </span>
                                </template>
                            </button>
                        </template>
                    </div>
                </template>

                <!-- Opções de tamanho, preço e botões -->
                <div class="flex xl:flex-col xl:!justify-start xl:!items-start gap-2 items-center justify-between">
                    <span class="flex items-center gap-2" x-show="order_bump.product.discount_value > 0">
                        <div class="text-xs leading-5 px-1.5 py-0.5 m-0 font-black text-[var(--contrast-color)] bg-[var(--theme-color)] uppercase rounded">De</div>
                        <div class="flex items-center text-base font-bold">
                        <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50 line-through" x-text="order_bump.product.primaryVariants && order_bump.product.primaryVariants.length > 0
                                    ? formatCurrencyPrice((order_bump.product.primaryVariants.find(v => v.selected_flag)?.amount ?? order_bump.product.amount) / 100)
                                    : formatCurrencyPrice((order_bump.product.amount ?? 0) / 100)"></p>
                        </div>
                    </span>

                    <span class="flex items-center gap-2">
                        <div class="text-xs leading-5 px-1.5 py-0.5 m-0 font-black text-[var(--contrast-color)] bg-[var(--theme-color)] uppercase rounded">Por</div>
                        <div class="flex items-center text-xl font-black">
                            <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50" x-text="(() => {
                                        const selectedVariant = order_bump.product.primaryVariants?.find(v => v.selected_flag);
                                        const discountValue = (order_bump.product.discount_value ?? 0) / 100;
                                        const discountTypeEnum = order_bump.product.discount_type_enum;

                                        // Primeiro verifica se existe uma variante selecionada e se ela tem o preço (amount).
                                        if (selectedVariant && selectedVariant.amount) {
                                            return formatCurrencyPrice(applyDiscountAmount(discountValue, selectedVariant.amount / 100, discountTypeEnum));
                                        }

                                        // Caso não exista um preço específico na variante, utiliza o preço do produto principal.
                                        const productAmount = (order_bump.product.amount ?? 0) / 100;
                                        return formatCurrencyPrice(applyDiscountAmount(discountValue, productAmount, discountTypeEnum));
                                    })()"></p>
                        </div>
                    </span>
                </div>
            </div>
        </div>
        <div class="flex justify-end pt-2 mt-3 overflow-x-hidden w-full">
            <button
                :disabled="order_bump.product.primaryVariants.length > 0 && !selectedVariant()"
                class="px-14 flex items-center gap-2 border-[var(--theme-color)] rounded-[var(--border-radius)] text-zinc-900 uppercase dark:text-neutral-50 text-sm leading-4 font-bold pl-3 pr-4 !py-2 border-2 disabled:opacity-50"
                x-bind:class="{
                    'bg-[var(--theme-color)] !text-[var(--contrast-color)]': hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)
                }"
                @click="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)
                    ? removePickUpOffer(order_bump.product.product_code, selectedVariant()?.code)
                    : pickUpOffer(order_bump.product, order_bump.order_bump_code)"
            >
                <div
                    class="flex items-center justify-center w-4.5 h-4.5 border-2 border-[var(--theme-color)] bg-white rounded-[3px]">
                    <svg class="stroke-[var(--theme-color)] stroke-[3]" x-show="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)" width="13" height="10" viewBox="0 0 13 10" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1.70728 4.73333L5.34364 9L11.7073 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </svg>


                </div>
                <p x-text="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code) ? `Oferta adicionada` : `Pegar oferta`"></p>
            </button>
        </div>
    </div>
    <div
        class="px-4 mt-4"
        x-bind:class="{
            'min-h-[94px]': checkoutConfig.order_bump_position_enum === 2,
            'mb-3': order_bump.description?.length < 100
        }"
        x-show="order_bump.description?.length > 0"
    >
        <p class="text-zinc-900 dark:text-neutral-50 text-lg leading-6" x-html="orderBumps[index_of_order_bump].description" x-collapse.min.50px="x-collapse.min.50px" x-show="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded"></p>
        <button
            class="my-3 text-sm font-bold text-zinc-900 dark:text-neutral-50"
            @click="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded = ! orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded"
            x-show="order_bump.description?.length > 58"
        >
            <span
                class="text-zinc-900 dark:text-neutral-50"
                x-text="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded ? 'Ver menos' : 'Ver mais'"></span>
        </button>
    </div>
</div>
                                </div>
                            </template>
                        </div>
                    </div>
                    <!-- DESKTOP: carousel -->
                    <div class="hidden md:block">
                        <template x-for="(order_bump, index_of_order_bump) in orderBumps">
                            <div class="hidden duration-700 ease-in-out h-full md:w-[104%]" data-carousel-item>
                                <div
    x-data="{
        selectedVariant() {
            return order_bump.product.primaryVariants?.find(variant => variant.selected_flag);
        },
        selectedCode() {
            return this.selectedVariant()?.code || order_bump.product.product_code;
        }
    }"
    class="rounded-2xl border-[var(--theme-color)] px-2 py-2 bg-gray-100 dark:bg-zinc-900"
    x-bind:class="{
        'border-4': hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code),
        'border': !hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code),
        'mr-4': checkoutConfig.order_bump_position_enum === 2
    }"
>
    <div class="bg-white dark:bg-neutral-800 rounded-xl p-4 shadow-md">
        <div
            class="flex flex-col md:flex-row"
            x-bind:class="{
                'md:gap-4 items-start': order_bump.product.image_url,
            }"
        >
            <div class="flex items-center gap-2">
                <template x-if="order_bump.product.image_url">
                    <div class="w-10 h-10">
                        <img x-bind:src="order_bump.product.image_url" x-bind:alt="order_bump.product.title"
                            class="rounded overflow-hidden">
                    </div>
                </template>
                <p class="text-zinc-900 dark:text-neutral-50 text-lg block md:hidden leading-6 font-bold" x-text="order_bump.product.title"></p>
            </div>
            <div class="w-full space-y-3">
                <p class="text-zinc-900 dark:text-neutral-50 text-lg hidden md:block leading-6 font-bold" x-text="order_bump.product.title"></p>

                <!-- Variantes Primárias -->
                <template x-if="order_bump.product.primaryVariants && order_bump.product.primaryVariants.length > 0">
                    <div class="flex gap-2 flex-wrap mt-2">
                        <template x-for="variant in order_bump.product.primaryVariants" :key="variant.code">
                            <!-- Botão de Variante -->
                            <button
                                :class="{
                                    'w-20 h-20 p-2 -ml-2.5': variant.image_url,
                                    'w-auto h-auto px-4 py-2 -ml-4.5': !variant.image_url,
                                    'flex items-center justify-center rounded-lg': true
                                }"
                                @click="hasSelectedOffer(order_bump.product.product_code, variant.code)
                                    ? removePickUpOffer(order_bump.product.product_code, variant.code)
                                    : pickUpOffer(order_bump.product, order_bump.order_bump_code)"
                            >
                                <!-- Exibe a imagem, se disponível -->
                                <template x-if="variant.image_url">
                                    <img x-bind:src="variant.image_url" x-bind:alt="variant.title" class="w-full h-full object-contain rounded-lg border-2"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(order_bump.product.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(order_bump.product.product_code, variant.code)
                                        }">
                                </template>

                                <!-- Exibe o texto, se não houver imagem -->
                                <template x-if="!variant.image_url">
                                    <span class="text-sm font-semibold text-center whitespace-nowrap overflow-hidden text-ellipsis border-2 flex items-center justify-center w-auto h-auto rounded-lg py-2 px-2.5"
                                        x-text="variant.tag"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(order_bump.product.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(order_bump.product.product_code, variant.code)
                                        }">
                                    </span>
                                </template>
                            </button>
                        </template>
                    </div>
                </template>

                <!-- Opções de tamanho, preço e botões -->
                <div class="flex xl:flex-col xl:!justify-start xl:!items-start gap-2 items-center justify-between">
                    <span class="flex items-center gap-2" x-show="order_bump.product.discount_value > 0">
                        <div class="text-xs leading-5 px-1.5 py-0.5 m-0 font-black text-[var(--contrast-color)] bg-[var(--theme-color)] uppercase rounded">De</div>
                        <div class="flex items-center text-base font-bold">
                        <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50 line-through" x-text="order_bump.product.primaryVariants && order_bump.product.primaryVariants.length > 0
                                    ? formatCurrencyPrice((order_bump.product.primaryVariants.find(v => v.selected_flag)?.amount ?? order_bump.product.amount) / 100)
                                    : formatCurrencyPrice((order_bump.product.amount ?? 0) / 100)"></p>
                        </div>
                    </span>

                    <span class="flex items-center gap-2">
                        <div class="text-xs leading-5 px-1.5 py-0.5 m-0 font-black text-[var(--contrast-color)] bg-[var(--theme-color)] uppercase rounded">Por</div>
                        <div class="flex items-center text-xl font-black">
                            <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50" x-text="(() => {
                                        const selectedVariant = order_bump.product.primaryVariants?.find(v => v.selected_flag);
                                        const discountValue = (order_bump.product.discount_value ?? 0) / 100;
                                        const discountTypeEnum = order_bump.product.discount_type_enum;

                                        // Primeiro verifica se existe uma variante selecionada e se ela tem o preço (amount).
                                        if (selectedVariant && selectedVariant.amount) {
                                            return formatCurrencyPrice(applyDiscountAmount(discountValue, selectedVariant.amount / 100, discountTypeEnum));
                                        }

                                        // Caso não exista um preço específico na variante, utiliza o preço do produto principal.
                                        const productAmount = (order_bump.product.amount ?? 0) / 100;
                                        return formatCurrencyPrice(applyDiscountAmount(discountValue, productAmount, discountTypeEnum));
                                    })()"></p>
                        </div>
                    </span>
                </div>
            </div>
        </div>
        <div class="flex justify-end pt-2 mt-3 overflow-x-hidden w-full">
            <button
                :disabled="order_bump.product.primaryVariants.length > 0 && !selectedVariant()"
                class="px-14 flex items-center gap-2 border-[var(--theme-color)] rounded-[var(--border-radius)] text-zinc-900 uppercase dark:text-neutral-50 text-sm leading-4 font-bold pl-3 pr-4 !py-2 border-2 disabled:opacity-50"
                x-bind:class="{
                    'bg-[var(--theme-color)] !text-[var(--contrast-color)]': hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)
                }"
                @click="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)
                    ? removePickUpOffer(order_bump.product.product_code, selectedVariant()?.code)
                    : pickUpOffer(order_bump.product, order_bump.order_bump_code)"
            >
                <div
                    class="flex items-center justify-center w-4.5 h-4.5 border-2 border-[var(--theme-color)] bg-white rounded-[3px]">
                    <svg class="stroke-[var(--theme-color)] stroke-[3]" x-show="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)" width="13" height="10" viewBox="0 0 13 10" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1.70728 4.73333L5.34364 9L11.7073 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </svg>


                </div>
                <p x-text="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code) ? `Oferta adicionada` : `Pegar oferta`"></p>
            </button>
        </div>
    </div>
    <div
        class="px-4 mt-4"
        x-bind:class="{
            'min-h-[94px]': checkoutConfig.order_bump_position_enum === 2,
            'mb-3': order_bump.description?.length < 100
        }"
        x-show="order_bump.description?.length > 0"
    >
        <p class="text-zinc-900 dark:text-neutral-50 text-lg leading-6" x-html="orderBumps[index_of_order_bump].description" x-collapse.min.50px="x-collapse.min.50px" x-show="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded"></p>
        <button
            class="my-3 text-sm font-bold text-zinc-900 dark:text-neutral-50"
            @click="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded = ! orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded"
            x-show="order_bump.description?.length > 58"
        >
            <span
                class="text-zinc-900 dark:text-neutral-50"
                x-text="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded ? 'Ver menos' : 'Ver mais'"></span>
        </button>
    </div>
</div>
                            </div>
                        </template>
                    </div>
                </div>
            </template>
            <template x-if="checkoutConfig.order_bump_position_enum === 1">
                <div x-bind:class="{ 'space-y-6': checkoutConfig.order_bump_position_enum === 1 }">
                    <template x-for="(order_bump, index_of_order_bump) in orderBumps">
                        <div
    x-data="{
        selectedVariant() {
            return order_bump.product.primaryVariants?.find(variant => variant.selected_flag);
        },
        selectedCode() {
            return this.selectedVariant()?.code || order_bump.product.product_code;
        }
    }"
    class="rounded-2xl border-[var(--theme-color)] px-2 py-2 bg-gray-100 dark:bg-zinc-900"
    x-bind:class="{
        'border-4': hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code),
        'border': !hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code),
        'mr-4': checkoutConfig.order_bump_position_enum === 2
    }"
>
    <div class="bg-white dark:bg-neutral-800 rounded-xl p-4 shadow-md">
        <div
            class="flex flex-col md:flex-row"
            x-bind:class="{
                'md:gap-4 items-start': order_bump.product.image_url,
            }"
        >
            <div class="flex items-center gap-2">
                <template x-if="order_bump.product.image_url">
                    <div class="w-10 h-10">
                        <img x-bind:src="order_bump.product.image_url" x-bind:alt="order_bump.product.title"
                            class="rounded overflow-hidden">
                    </div>
                </template>
                <p class="text-zinc-900 dark:text-neutral-50 text-lg block md:hidden leading-6 font-bold" x-text="order_bump.product.title"></p>
            </div>
            <div class="w-full space-y-3">
                <p class="text-zinc-900 dark:text-neutral-50 text-lg hidden md:block leading-6 font-bold" x-text="order_bump.product.title"></p>

                <!-- Variantes Primárias -->
                <template x-if="order_bump.product.primaryVariants && order_bump.product.primaryVariants.length > 0">
                    <div class="flex gap-2 flex-wrap mt-2">
                        <template x-for="variant in order_bump.product.primaryVariants" :key="variant.code">
                            <!-- Botão de Variante -->
                            <button
                                :class="{
                                    'w-20 h-20 p-2 -ml-2.5': variant.image_url,
                                    'w-auto h-auto px-4 py-2 -ml-4.5': !variant.image_url,
                                    'flex items-center justify-center rounded-lg': true
                                }"
                                @click="hasSelectedOffer(order_bump.product.product_code, variant.code)
                                    ? removePickUpOffer(order_bump.product.product_code, variant.code)
                                    : pickUpOffer(order_bump.product, order_bump.order_bump_code)"
                            >
                                <!-- Exibe a imagem, se disponível -->
                                <template x-if="variant.image_url">
                                    <img x-bind:src="variant.image_url" x-bind:alt="variant.title" class="w-full h-full object-contain rounded-lg border-2"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(order_bump.product.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(order_bump.product.product_code, variant.code)
                                        }">
                                </template>

                                <!-- Exibe o texto, se não houver imagem -->
                                <template x-if="!variant.image_url">
                                    <span class="text-sm font-semibold text-center whitespace-nowrap overflow-hidden text-ellipsis border-2 flex items-center justify-center w-auto h-auto rounded-lg py-2 px-2.5"
                                        x-text="variant.tag"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(order_bump.product.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(order_bump.product.product_code, variant.code)
                                        }">
                                    </span>
                                </template>
                            </button>
                        </template>
                    </div>
                </template>

                <!-- Opções de tamanho, preço e botões -->
                <div class="flex xl:flex-col xl:!justify-start xl:!items-start gap-2 items-center justify-between">
                    <span class="flex items-center gap-2" x-show="order_bump.product.discount_value > 0">
                        <div class="text-xs leading-5 px-1.5 py-0.5 m-0 font-black text-[var(--contrast-color)] bg-[var(--theme-color)] uppercase rounded">De</div>
                        <div class="flex items-center text-base font-bold">
                        <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50 line-through" x-text="order_bump.product.primaryVariants && order_bump.product.primaryVariants.length > 0
                                    ? formatCurrencyPrice((order_bump.product.primaryVariants.find(v => v.selected_flag)?.amount ?? order_bump.product.amount) / 100)
                                    : formatCurrencyPrice((order_bump.product.amount ?? 0) / 100)"></p>
                        </div>
                    </span>

                    <span class="flex items-center gap-2">
                        <div class="text-xs leading-5 px-1.5 py-0.5 m-0 font-black text-[var(--contrast-color)] bg-[var(--theme-color)] uppercase rounded">Por</div>
                        <div class="flex items-center text-xl font-black">
                            <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50" x-text="(() => {
                                        const selectedVariant = order_bump.product.primaryVariants?.find(v => v.selected_flag);
                                        const discountValue = (order_bump.product.discount_value ?? 0) / 100;
                                        const discountTypeEnum = order_bump.product.discount_type_enum;

                                        // Primeiro verifica se existe uma variante selecionada e se ela tem o preço (amount).
                                        if (selectedVariant && selectedVariant.amount) {
                                            return formatCurrencyPrice(applyDiscountAmount(discountValue, selectedVariant.amount / 100, discountTypeEnum));
                                        }

                                        // Caso não exista um preço específico na variante, utiliza o preço do produto principal.
                                        const productAmount = (order_bump.product.amount ?? 0) / 100;
                                        return formatCurrencyPrice(applyDiscountAmount(discountValue, productAmount, discountTypeEnum));
                                    })()"></p>
                        </div>
                    </span>
                </div>
            </div>
        </div>
        <div class="flex justify-end pt-2 mt-3 overflow-x-hidden w-full">
            <button
                :disabled="order_bump.product.primaryVariants.length > 0 && !selectedVariant()"
                class="px-14 flex items-center gap-2 border-[var(--theme-color)] rounded-[var(--border-radius)] text-zinc-900 uppercase dark:text-neutral-50 text-sm leading-4 font-bold pl-3 pr-4 !py-2 border-2 disabled:opacity-50"
                x-bind:class="{
                    'bg-[var(--theme-color)] !text-[var(--contrast-color)]': hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)
                }"
                @click="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)
                    ? removePickUpOffer(order_bump.product.product_code, selectedVariant()?.code)
                    : pickUpOffer(order_bump.product, order_bump.order_bump_code)"
            >
                <div
                    class="flex items-center justify-center w-4.5 h-4.5 border-2 border-[var(--theme-color)] bg-white rounded-[3px]">
                    <svg class="stroke-[var(--theme-color)] stroke-[3]" x-show="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)" width="13" height="10" viewBox="0 0 13 10" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1.70728 4.73333L5.34364 9L11.7073 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </svg>


                </div>
                <p x-text="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code) ? `Oferta adicionada` : `Pegar oferta`"></p>
            </button>
        </div>
    </div>
    <div
        class="px-4 mt-4"
        x-bind:class="{
            'min-h-[94px]': checkoutConfig.order_bump_position_enum === 2,
            'mb-3': order_bump.description?.length < 100
        }"
        x-show="order_bump.description?.length > 0"
    >
        <p class="text-zinc-900 dark:text-neutral-50 text-lg leading-6" x-html="orderBumps[index_of_order_bump].description" x-collapse.min.50px="x-collapse.min.50px" x-show="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded"></p>
        <button
            class="my-3 text-sm font-bold text-zinc-900 dark:text-neutral-50"
            @click="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded = ! orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded"
            x-show="order_bump.description?.length > 58"
        >
            <span
                class="text-zinc-900 dark:text-neutral-50"
                x-text="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded ? 'Ver menos' : 'Ver mais'"></span>
        </button>
    </div>
</div>
                    </template>
                </div>
            </template>
            <template x-if="checkoutConfig.order_bump_position_enum === 2">
                <div
                    class="flex flex-col md:flex-row items-center justify-between"
                    x-bind:class="{
                        'px-6': checkoutConfig.order_bump_position_enum === 1,
                        'px-4': checkoutConfig.order_bump_position_enum === 2 }
                    "
                >
                    <p class="text-zinc-900 dark:text-neutral-50 text-lg mb-4 md:mb-0 md:py-6 leading-6">Somente<b>para este pedido</b></p>
                    <div class="flex gap-2 order-first md:order-none py-4 rtl:space-x-reverse">
                        <template x-for="(order_bump, index_of_order_bump) in orderBumps" :key="index_of_order_bump">
                            <button
                                type="button"
                                class="w-3 h-3 rounded-full aria-[current=true]:bg-[var(--theme-color)] aria-[current=false]:bg-black/[0.16] hover:aria-[current=false]:bg-black/[0.25]"
                                x-bind:aria-label="`Slide ${index_of_order_bump + 1}`"
                                x-bind:data-carousel-slide-to="index_of_order_bump"
                                @click="scrollToMobileSlide(index_of_order_bump)"
                            ></button>
                        </template>
                    </div>
                </div>
            </template>
            <template x-if="checkoutConfig.order_bump_position_enum === 1">
                <p class="text-zinc-900 dark:text-neutral-50 text-lg md:mb-0 py-6 leading-6 text-center">Somente
                    <b>para este pedido</b></p>
            </template>
        </div>
    </div>
</template>
            <!-- Card de progresso para frete grátis -->
            <div class="xl:mx-8">
                <!-- Card de progresso para frete grátis -->
<div x-show="process_getting_free_shipping.has_free_shipping && process_getting_free_shipping.free_shipping_progress < 100" class="leading-4 mt-6 rounded-xl border border-orange-100 dark:border-orange-300/10 bg-white dark:bg-neutral-900 p-4 shadow">
    <div class="relative w-full bg-neutral-200 dark:bg-neutral-400 rounded-full h-3 overflow-visible">
    <div class="bg-[var(--theme-color)] h-3 rounded-full transition-all duration-500" :style="{ width: process_getting_free_shipping.free_shipping_progress + '%' }"></div>
    <div class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-1/4 bg-[var(--theme-color)] text-white rounded-full shadow-lg w-7 h-7 flex items-center justify-center z-10">
        <div>
    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2.5 2C2.22386 2 2 2.22386 2 2.5C2 2.77614 2.22386 3 2.5 3H2.7457C2.96894 3 3.16513 3.14799 3.22646 3.36264L4.81202 8.91208C4.996 9.55603 5.58458 10 6.2543 10H10.823C11.4363 10 11.9879 9.62657 12.2157 9.05709L13.69 5.37139C13.9527 4.71453 13.4689 4 12.7615 4H4.44858L4.18798 3.08792C4.004 2.44397 3.41542 2 2.7457 2H2.5ZM6.5 14C7.32843 14 8 13.3284 8 12.5C8 11.6716 7.32843 11 6.5 11C5.67157 11 5 11.6716 5 12.5C5 13.3284 5.67157 14 6.5 14ZM10.5 14C11.3284 14 12 13.3284 12 12.5C12 11.6716 11.3284 11 10.5 11C9.67157 11 9 11.6716 9 12.5C9 13.3284 9.67157 14 10.5 14Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    </svg>
</div>
    </div>
</div>

    <div class="mt-4 text-center">
        <span class="text-sm text-zinc-800 dark:text-neutral-200">
            <span><strong x-text="'Faltam ' + getCurrencySymbol() + formatCurrencyPrice(process_getting_free_shipping.remaining_free_shipping / 100)"></strong> para você ganhar <strong class="text-[var(--theme-color)]">FRETE GRÁTIS!</strong></span>
        </span>
    </div>
</div>
            </div>
            <div class="flex items-center justify-between py-8 mx-3 xl:mx-8">
                <button class="pl-3 pr-4 flex items-center gap-2 text-zinc-900 dark:text-neutral-50 text-sm leading-4 font-bold" @click="stepCurrent = STEP_ENUM.IDENTIFICATION" x-cloak="x-cloak">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M17.5 12L7 12" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M11.0884 16L6.50014 12L11.0884 8" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
                    Voltar
</button>
                <button
    class="py-4 px-14 h-14 flex items-center gap-2 bg-[var(--theme-color)] rounded-[var(--border-radius)] text-[var(--contrast-color)] text-xl leading-6 font-black disabled:cursor-not-allowed hover:scale-105 transition-transform !gap-4" @click="sendPayment()" x-bind:disabled="loading_payment_button"
>
    <p x-show="formPayment.payment_method === 2" x-text="'Pagar'"></p>
                    <p x-show="formPayment.payment_method === 3">Gerar Pix</p>
                    <p x-show="formPayment.payment_method === 1">Gerar boleto</p>
                    <svg x-show="loading_payment_button" class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="fill-[var(--theme-color)]" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>
</button>
            </div>
            <template x-if="formPayment.payment_method === 3">
                <div class="my-8 px-6">
    <div class="flex flex-col gap-2">
        <ul class="space-y-1">
            <li class="flex items-center gap-4 bg-white dark:bg-neutral-800 rounded py-2 px-4 text-base text-zinc-900 dark:text-neutral-50 leading-5">
                <div>
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="10" height="6" rx="3" class="stroke-[var(--theme-color)]" stroke-width="2" />
</svg>
                </div>
                Pagamento somente à vista
            </li>
            <li class="flex items-center gap-4 bg-white dark:bg-neutral-800 rounded py-2 px-4 text-base text-zinc-900 dark:text-neutral-50 leading-5">
                <div>
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="10" height="6" rx="3" class="stroke-[var(--theme-color)]" stroke-width="2" />
</svg>
                </div>
                A liberação da compra ocorre após a confirmação do pagamento
            </li>
            <li class="flex items-center gap-4 bg-white dark:bg-neutral-800 rounded py-2 px-4 text-base text-zinc-900 dark:text-neutral-50 leading-5">
                <div>
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="10" height="6" rx="3" class="stroke-[var(--theme-color)]" stroke-width="2" />
</svg>
                </div>
                Ao gerar o código atente para a data de expiração
            </li>
        </ul>
    </div>
</div>            </template>
            <template x-if="formPayment.payment_method === 1">
                <div class="my-8 px-6">
    <div class="flex flex-col gap-2">
        <ul class="space-y-1">
            <li class="flex items-center gap-4 bg-white dark:bg-neutral-800 rounded py-2 px-4 text-base text-zinc-900 dark:text-neutral-50 leading-5">
                <div>
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="10" height="6" rx="3" class="stroke-[var(--theme-color)]" stroke-width="2" />
</svg>
                </div>
                Pagamento somente à vista
            </li>
            <li class="flex items-center gap-4 bg-white dark:bg-neutral-800 rounded py-2 px-4 text-base text-zinc-900 dark:text-neutral-50 leading-5">
                <div>
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="10" height="6" rx="3" class="stroke-[var(--theme-color)]" stroke-width="2" />
</svg>
                </div>
                <p>A liberação da compra ocorre após a confirmação do pagamento, que pode levar até  <b>3 dias úteis</b></p>
            </li>
            <li class="flex items-center gap-4 bg-white dark:bg-neutral-800 rounded py-2 px-4 text-base text-zinc-900 dark:text-neutral-50 leading-5">
                <div>
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="10" height="6" rx="3" class="stroke-[var(--theme-color)]" stroke-width="2" />
</svg>
                </div>
                Pagável em qualquer banco ou casa lotérica até o vencimento
            </li>
        </ul>
    </div>
</div>
                </template>
        </div>
    </div>
</template>
<!-- Three Steps -->
<template x-if="checkoutConfig.form_step_enum === 2">
    <div class="block" x-bind:class="checkoutConfig.timer_flag && checkoutConfig.timer_position_enum === 1 ? 'xl:pt-8' : 'xl:pt-16'">
        <div class="flex items-center w-full">
            <div class="flex items-center gap-2 w-full">
                <div
                    x-bind:data-current="stepCurrent === STEP_ENUM.IDENTIFICATION"
                    class="w-full h-0.5 data-[current=true]:bg-[var(--theme-color)]"
                    x-bind:class="stepCurrent >= STEP_ENUM.IDENTIFICATION ? 'bg-[var(--theme-color)]' : 'bg-black/[0.04] dark:bg-white/[0.04]'"
                ></div>
                <button
                    @click="stepCurrent = STEP_ENUM.IDENTIFICATION"
                    x-bind:data-current="stepCurrent === STEP_ENUM.IDENTIFICATION"
                    x-bind:class="stepCurrent > STEP_ENUM.IDENTIFICATION ? 'bg-[var(--theme-color)]' : 'bg-black/[0.04] dark:bg-white/[0.04]'"
                    class="flex items-center justify-center px-[17px] w-12 h-8 rounded-[var(--border-radius)] font-black text-base data-[current=true]:!bg-white data-[current=true]:border-[3px] data-[current=true]:border-[var(--theme-color)]">
                    <p x-show="stepCurrent === STEP_ENUM.IDENTIFICATION">1</p>
                    <div>
        <svg x-cloak="x-cloak" x-show="stepCurrent > STEP_ENUM.IDENTIFICATION" width="24" height="24" class="stroke-[var(--contrast-color)]" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 7L9.42857 17L6 13" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
    </div>

                </button>
                <div
                    class="w-full h-0.5"
                    x-bind:class="stepCurrent > STEP_ENUM.IDENTIFICATION ? 'bg-[var(--theme-color)]' : 'bg-black/[0.04] dark:bg-white/[0.04]'"
                ></div>
            </div>
            <template x-if="checkoutConfig.hasFreight">
                <div class="flex items-center gap-2 w-full">
                    <div
                        x-bind:data-current="stepCurrent === STEP_ENUM.SHIPPING"
                        class="w-full h-0.5 data-[current=true]:bg-[var(--theme-color)]"
                        x-bind:class="stepCurrent > STEP_ENUM.IDENTIFICATION ? 'bg-[var(--theme-color)]' : 'bg-black/[0.04] dark:bg-white/[0.04]'"
                    ></div>
                    <button
                        @click="validateForm(validation.formIdentification) ? stepCurrent = STEP_ENUM.SHIPPING : null"
                        x-bind:data-current="stepCurrent === STEP_ENUM.SHIPPING"
                        x-bind:class="stepCurrent > STEP_ENUM.IDENTIFICATION ? 'bg-[var(--theme-color)]' : 'bg-black/[0.04] dark:bg-white/[0.04]'"
                        class="flex items-center justify-center px-[17px] w-12 h-8 rounded-[var(--border-radius)] font-black text-base data-[current=true]:bg-white data-[current=true]:border-[3px] data-[current=true]:border-[var(--theme-color)]">
                        <p x-cloak x-show="stepCurrent < STEP_ENUM.PAYMENT">2</p>
                        <div>
        <svg x-cloak="x-cloak" x-show="stepCurrent === STEP_ENUM.PAYMENT" width="24" height="24" class="stroke-[var(--contrast-color)]" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M18 7L9.42857 17L6 13" stroke-linecap="round" stroke-linejoin="round" />
        </svg>
    </div>

                    </button>
                    <div
                        class="w-full h-0.5"
                        x-bind:class="stepCurrent > STEP_ENUM.SHIPPING ? 'bg-[var(--theme-color)]' : 'bg-black/[0.04] dark:bg-white/[0.04]'"
                    ></div>
                </div>
            </template>
            <div class="flex items-center gap-2 w-full">
                <div
                    x-bind:data-current="stepCurrent === STEP_ENUM.PAYMENT"
                    class="w-full h-0.5 data-[current=true]:bg-[var(--theme-color)]"
                    x-bind:class="stepCurrent > STEP_ENUM.SHIPPING ? 'bg-[var(--theme-color)]' : 'bg-black/[0.04] dark:bg-white/[0.04]'"
                ></div>
                <template x-if="checkoutConfig.hasFreight">
                    <button
                        @click="validateForm(validation.formShipping) ? stepCurrent = STEP_ENUM.PAYMENT : null"
                        x-bind:data-current="stepCurrent === STEP_ENUM.PAYMENT"
                        x-bind:class="stepCurrent > STEP_ENUM.SHIPPING ? 'bg-[var(--theme-color)]' : 'bg-black/[0.04] dark:bg-white/[0.04]'"
                        class="flex items-center justify-center px-[17px] w-12 h-8 rounded-[var(--border-radius)] font-black text-base data-[current=true]:bg-white data-[current=true]:border-[3px] data-[current=true]:border-[var(--theme-color)]">
                        <p>2</p>
                    </button>
                </template>
                <template x-if="!checkoutConfig.hasFreight">
                    <button
                        @click="validateForm(validation.formIdentification) ? stepCurrent = STEP_ENUM.PAYMENT : null"
                        x-bind:data-current="stepCurrent === STEP_ENUM.PAYMENT"
                        x-bind:class="stepCurrent > STEP_ENUM.SHIPPING ? 'bg-[var(--theme-color)]' : 'bg-black/[0.04] dark:bg-white/[0.04]'"
                        class="flex items-center justify-center px-[17px] w-12 h-8 rounded-[var(--border-radius)] font-black text-base data-[current=true]:bg-white data-[current=true]:border-[3px] data-[current=true]:border-[var(--theme-color)]">
                        <p>2</p>
                    </button>
                </template>
                <div class="w-full h-0.5 bg-black/[0.04] dark:bg-white/[0.04]"></div>
            </div>
        </div>
        <template x-if="stepCurrent === STEP_ENUM.IDENTIFICATION">
            <div class="w-full">
                <div class="mx-3 xl:mx-0">
    <template x-if="checkoutConfig.form_step_enum === 1">
        <div class="mb-8">
            <div class="flex items-center justify-between">
                <p class="text-xl font-bold text-zinc-900 dark:text-neutral-50">Finalizar</p>
                <div class="flex items-center gap-1.5">
                    <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50">Ambiente seguro</p>
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.4627 4.7991C21.4265 4.54124 21.2395 4.32912 20.9866 4.2594L12.8838 2.02392C12.7683 1.99203 12.6463 1.99203 12.5307 2.02392L4.42791 4.2594C4.1751 4.32912 3.98808 4.54115 3.95188 4.7991C3.90489 5.13436 2.83274 13.0556 5.58272 16.9962C8.32945 20.9321 12.3815 21.9407 12.5526 21.9818C12.6034 21.994 12.6553 22 12.7073 22C12.7593 22 12.8111 21.9939 12.862 21.9818C13.0332 21.9407 17.0852 20.9321 19.8318 16.9962C22.5818 13.0557 21.5097 5.13444 21.4627 4.7991ZM17.9325 9.42362L12.4056 14.9066C12.277 15.0342 12.1084 15.0981 11.9398 15.0981C11.7712 15.0981 11.6025 15.0343 11.4739 14.9066L8.05669 11.5165C7.93309 11.394 7.8637 11.2277 7.8637 11.0544C7.8637 10.8811 7.93318 10.7148 8.05669 10.5923L8.7352 9.91914C8.9925 9.66397 9.40967 9.66388 9.66688 9.91914L11.9398 12.174L16.3223 7.82614C16.4459 7.70352 16.6135 7.63468 16.7882 7.63468C16.9629 7.63468 17.1305 7.70352 17.254 7.82614L17.9325 8.49926C18.1898 8.75451 18.1898 9.16837 17.9325 9.42362Z" class="fill-[var(--theme-color)]"/>
</svg>
                </div>
            </div>
            <div class="py-2 mt-3 mb-8">
                <hr class="border-4 border-black/[0.04] dark:border-white/[0.04]">
            </div>
            <div class="flex items-center justify-between xl:mx-8">
                <div class="flex items-center justify-center text-base leading-4 font-black rounded-lg w-8 h-8 bg-[var(--theme-color)] text-[var(--contrast-color)]">1</div>
                <div class="flex items-center gap-1.5">
                    <p class="text-lg leading-8 font-medium text-zinc-900 dark:text-neutral-50">Dados pessoais</p>
                </div>
            </div>
        </div>
    </template>
    <template x-if="checkoutConfig.form_step_enum === 3">
        <div class="my-8">
            <div class="flex items-center justify-between xl:mx-8">
                <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Dados pessoais</p>
                <div class="flex items-center gap-1.5">
                    <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50">Ambiente seguro</p>
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.4627 4.7991C21.4265 4.54124 21.2395 4.32912 20.9866 4.2594L12.8838 2.02392C12.7683 1.99203 12.6463 1.99203 12.5307 2.02392L4.42791 4.2594C4.1751 4.32912 3.98808 4.54115 3.95188 4.7991C3.90489 5.13436 2.83274 13.0556 5.58272 16.9962C8.32945 20.9321 12.3815 21.9407 12.5526 21.9818C12.6034 21.994 12.6553 22 12.7073 22C12.7593 22 12.8111 21.9939 12.862 21.9818C13.0332 21.9407 17.0852 20.9321 19.8318 16.9962C22.5818 13.0557 21.5097 5.13444 21.4627 4.7991ZM17.9325 9.42362L12.4056 14.9066C12.277 15.0342 12.1084 15.0981 11.9398 15.0981C11.7712 15.0981 11.6025 15.0343 11.4739 14.9066L8.05669 11.5165C7.93309 11.394 7.8637 11.2277 7.8637 11.0544C7.8637 10.8811 7.93318 10.7148 8.05669 10.5923L8.7352 9.91914C8.9925 9.66397 9.40967 9.66388 9.66688 9.91914L11.9398 12.174L16.3223 7.82614C16.4459 7.70352 16.6135 7.63468 16.7882 7.63468C16.9629 7.63468 17.1305 7.70352 17.254 7.82614L17.9325 8.49926C18.1898 8.75451 18.1898 9.16837 17.9325 9.42362Z" class="fill-[var(--theme-color)]"/>
</svg>
                </div>
            </div>
        </div>
    </template>
    <template x-if="checkoutConfig.form_step_enum === 2">
        <div class="my-8">
            <div class="flex items-center justify-between xl:mx-8">
                <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Dados pessoais</p>
                <div class="flex items-center gap-1.5">
                    <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50">Ambiente seguro</p>
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.4627 4.7991C21.4265 4.54124 21.2395 4.32912 20.9866 4.2594L12.8838 2.02392C12.7683 1.99203 12.6463 1.99203 12.5307 2.02392L4.42791 4.2594C4.1751 4.32912 3.98808 4.54115 3.95188 4.7991C3.90489 5.13436 2.83274 13.0556 5.58272 16.9962C8.32945 20.9321 12.3815 21.9407 12.5526 21.9818C12.6034 21.994 12.6553 22 12.7073 22C12.7593 22 12.8111 21.9939 12.862 21.9818C13.0332 21.9407 17.0852 20.9321 19.8318 16.9962C22.5818 13.0557 21.5097 5.13444 21.4627 4.7991ZM17.9325 9.42362L12.4056 14.9066C12.277 15.0342 12.1084 15.0981 11.9398 15.0981C11.7712 15.0981 11.6025 15.0343 11.4739 14.9066L8.05669 11.5165C7.93309 11.394 7.8637 11.2277 7.8637 11.0544C7.8637 10.8811 7.93318 10.7148 8.05669 10.5923L8.7352 9.91914C8.9925 9.66397 9.40967 9.66388 9.66688 9.91914L11.9398 12.174L16.3223 7.82614C16.4459 7.70352 16.6135 7.63468 16.7882 7.63468C16.9629 7.63468 17.1305 7.70352 17.254 7.82614L17.9325 8.49926C18.1898 8.75451 18.1898 9.16837 17.9325 9.42362Z" class="fill-[var(--theme-color)]"/>
</svg>
                </div>
            </div>
        </div>
    </template>
    <div class="space-y-2 xl:mx-8">
        <div
    class="group w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formIdentification.full_name !== ''" x-bind:class="{ '!border-red-300' : !validation.formIdentification.full_name.isValid }"
>
    <input
    autocomplete="not"
    class="w-full py-[0.875rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50" id="full_name" placeholder="Nome completo" name="full_name" x-ref="full_name" x-model="formIdentification.full_name" @keyup="validation.formIdentification.full_name.validate(context)" @blur="validation.formIdentification.full_name.validate(context)" maxlength="255"
>
</div>

        <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formIdentification.full_name.isValid" x-text="validation.formIdentification.full_name.errorMessage">
    
</p>
        <div
    class="group w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)] relative" x-bind:data-filled="formIdentification.email !== ''" x-bind:class="{ '!border-red-300' : !validation.formIdentification.email.isValid }" @click.outside="emailSuggestions = []"
>
    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M19.7073 20.5H5.70728C4.64676 20.4989 3.63 20.0771 2.8801 19.3272C2.1302 18.5773 1.70841 17.5605 1.70728 16.5V7.5C1.70841 6.43948 2.1302 5.42272 2.8801 4.67282C3.63 3.92292 4.64676 3.50113 5.70728 3.5H19.7073C20.7678 3.50113 21.7846 3.92292 22.5345 4.67282C23.2844 5.42272 23.7061 6.43948 23.7073 7.5V16.5C23.7061 17.5605 23.2844 18.5773 22.5345 19.3272C21.7846 20.0771 20.7678 20.4989 19.7073 20.5ZM5.70728 5.5C5.17703 5.50061 4.66867 5.71151 4.29373 6.08646C3.91879 6.4614 3.70788 6.96975 3.70728 7.5V16.5C3.70788 17.0302 3.91879 17.5386 4.29373 17.9135C4.66867 18.2885 5.17703 18.4994 5.70728 18.5H19.7073C20.2375 18.4994 20.7459 18.2885 21.1208 17.9135C21.4958 17.5386 21.7067 17.0302 21.7073 16.5V7.5C21.7067 6.96975 21.4958 6.4614 21.1208 6.08646C20.7459 5.71151 20.2375 5.50061 19.7073 5.5H5.70728Z" class="fill-[var(--theme-color)]"/>
    <path d="M12.7072 13.4339C11.5949 13.4344 10.5143 13.0633 9.63688 12.3797L3.09288 7.28991C2.88348 7.12699 2.74737 6.88757 2.7145 6.6243C2.68163 6.36104 2.75468 6.0955 2.91759 5.8861C3.08051 5.67669 3.31993 5.54059 3.58319 5.50771C3.84646 5.47484 4.112 5.54789 4.3214 5.71081L10.8653 10.8006C11.3916 11.211 12.0398 11.4338 12.7071 11.4338C13.3745 11.4338 14.0227 11.211 14.5489 10.8006L21.0929 5.71081C21.3023 5.54789 21.5678 5.47484 21.8311 5.50771C22.0944 5.54059 22.3338 5.67669 22.4967 5.8861C22.6596 6.0955 22.7327 6.36104 22.6998 6.6243C22.6669 6.88757 22.5308 7.12699 22.3214 7.28991L15.7774 12.3797C14.8999 13.0631 13.8194 13.4341 12.7072 13.4339Z" class="fill-[var(--theme-color)]"/>
</svg>
            <input
    autocomplete="not"
    class="w-full py-[0.875rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50" id="formEmail" x-bind:placeholder="checkoutConfig.require_email_customer_flag ? 'E-mail' : 'E-mail (opcional)'" name="email" x-ref="email" x-model="formIdentification.email" @keyup="validation.formIdentification.email.validate(context)" @input="validation.formIdentification.email.validate(context, false, true); suggestEmail()" @keydown.arrow-down.prevent="nextSuggestionEmail()" @keydown.arrow-up.prevent="previousSuggestionEmail()" @keydown.enter.prevent="selectSuggestionEmail()" maxlength="255"
>
            <div x-show="emailSuggestions.length > 0" class="absolute top-16 left-0 py-1 w-full rounded bg-white dark:bg-neutral-800 text-zinc-900 dark:text-neutral-50" x-cloak>
                <template x-for="(suggestion, index) in emailSuggestions" :key="index">
                    <div
                        class="w-full py-2 pr-4 pl-4 cursor-pointer hover:bg-gray-100 dark:hover:bg-neutral-700"
                        @click="selectSuggestionEmail(index)"
                    >
                        <p class="font-medium truncate" x-text="suggestion"></p>
                    </div>
                </template>
            </div>
</div>

        <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formIdentification.email.isValid" x-text="validation.formIdentification.email.errorMessage">
    
</p>
        <div
    class="group w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formIdentification.phone_number !== ''" x-bind:class="{ '!border-red-300' : !validation.formIdentification.phone_number.isValid }"
>
    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M17.207 2.25H8.20703C7.3786 2.25 6.70703 2.92157 6.70703 3.75V20.25C6.70703 21.0784 7.3786 21.75 8.20703 21.75H17.207C18.0355 21.75 18.707 21.0784 18.707 20.25V3.75C18.707 2.92157 18.0355 2.25 17.207 2.25Z" class="stroke-[var(--theme-color)]" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M6.70703 5.25H18.707" class="stroke-[var(--theme-color)]" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M11.707 19H13.707" class="stroke-[var(--theme-color)]" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
            <input
    autocomplete="not"
    class="w-full py-[0.875rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50" id="phone_number" placeholder="DDD + número" name="phone_number" x-mask:dynamic="getMaskInputPhone" x-mask="99 99999-9999" x-ref="phone_number" x-model="formIdentification.phone_number" @keyup="validation.formIdentification.phone_number.validate(context)" @blur="validation.formIdentification.phone_number.validate(context, false, true)" maxlength="25"
>
</div>

        <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formIdentification.phone_number.isValid" x-text="validation.formIdentification.phone_number.errorMessage">
    
</p>
        <div
    class="group w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formIdentification.identification_number !== ''" x-bind:class="{ '!border-red-300' : !validation.formIdentification.identification_number.isValid }"
>
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
            d="M6.15 11C6.15 11.6951 6.40863 12.334 6.82888 12.8298C6.16708 13.2805 5.64979 13.9338 5.37548 14.7273L5.37513 14.7284C5.22854 15.1681 5.45342 15.6568 5.90873 15.805C6.34977 15.9518 6.83661 15.7152 6.98465 15.2723C7.28075 14.423 8.08254 13.85 9 13.85C9.91841 13.85 10.7294 14.4239 11.0152 15.2719L11.0152 15.2719L11.0158 15.2734C11.1398 15.623 11.4673 15.85 11.82 15.85C11.9079 15.85 11.9998 15.8391 12.0933 15.8043C12.5357 15.6558 12.7718 15.1692 12.6249 14.7284L12.6245 14.7273C12.3502 13.9338 11.8329 13.2805 11.1711 12.8298C11.5914 12.334 11.85 11.6951 11.85 11C11.85 9.42477 10.5752 8.15 9 8.15C7.42477 8.15 6.15 9.42477 6.15 11ZM19 3.15H5C2.87477 3.15 1.15 4.87477 1.15 7V17C1.15 19.1252 2.87477 20.85 5 20.85H19C21.1252 20.85 22.85 19.1252 22.85 17V7C22.85 4.87477 21.1252 3.15 19 3.15ZM21.15 17C21.15 18.1848 20.1848 19.15 19 19.15H5C3.81523 19.15 2.85 18.1848 2.85 17V7C2.85 5.81523 3.81523 4.85 5 4.85H19C20.1848 4.85 21.15 5.81523 21.15 7V17ZM7.85 11C7.85 10.3652 8.36523 9.85 9 9.85C9.63477 9.85 10.15 10.3652 10.15 11C10.15 11.6348 9.63477 12.15 9 12.15C8.36523 12.15 7.85 11.6348 7.85 11ZM18 10.85C18.4652 10.85 18.85 10.4652 18.85 10C18.85 9.53477 18.4652 9.15 18 9.15H15C14.5348 9.15 14.15 9.53477 14.15 10C14.15 10.4652 14.5348 10.85 15 10.85H18ZM18 14.85C18.4652 14.85 18.85 14.4652 18.85 14C18.85 13.5348 18.4652 13.15 18 13.15H15C14.5348 13.15 14.15 13.5348 14.15 14C14.15 14.4652 14.5348 14.85 15 14.85H18Z"
            class="stroke-[var(--theme-color)] fill-[var(--theme-color)]" stroke-width="0.2"
        />
    </svg>
            <input
    autocomplete="not"
    class="w-full py-[0.875rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50" id="identification_number" x-bind:placeholder="getTextIdentificationNumber()" name="identification_number" x-ref="identification_number" x-model="formIdentification.identification_number" @keyup="validation.formIdentification.identification_number.validate(context)" @blur="validation.formIdentification.identification_number.validate(context, false, true)" x-mask:dynamic="getMaskInputIdentificationNumber" maxlength="25"
>
</div>

        <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formIdentification.identification_number.isValid" x-text="validation.formIdentification.identification_number.errorMessage">
    
</p>
    </div>
    <div>
        <div class="border rounded-lg border-black/[0.16] dark:border-white/[0.16] mt-8 mb-10 xl:mx-8">
            <div class="flex items-center gap-3 p-3">
                <div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
    <path d="M7.60132 7.43059C7.60132 7.84481 7.9371 8.18059 8.35132 8.18059C8.76553 8.18059 9.10132 7.84481 9.10132 7.43059H7.60132ZM8.35132 7.12771H7.60132H8.35132ZM17.0633 7.12772H16.3133H17.0633ZM16.3133 7.4306C16.3133 7.84481 16.6491 8.1806 17.0633 8.1806C17.4775 8.1806 17.8133 7.84481 17.8133 7.4306H16.3133ZM11.5591 3.14126L11.377 2.41368L11.377 2.41368L11.5591 3.14126ZM13.8556 3.14126L14.0376 2.41368H14.0376L13.8556 3.14126ZM9.10132 7.43059V7.12771H7.60132V7.43059H9.10132ZM16.3133 7.12772V7.4306H17.8133V7.12772H16.3133ZM11.7411 3.86884C12.3745 3.71039 13.0401 3.71039 13.6736 3.86884L14.0376 2.41368C13.1651 2.19544 12.2495 2.19544 11.377 2.41368L11.7411 3.86884ZM17.8133 7.12772C17.8133 4.88982 16.2423 2.96519 14.0376 2.41368L13.6736 3.86884C15.2473 4.2625 16.3133 5.61508 16.3133 7.12772H17.8133ZM9.10132 7.12771C9.10132 5.61508 10.1674 4.2625 11.7411 3.86884L11.377 2.41368C9.17232 2.96519 7.60132 4.88982 7.60132 7.12771H9.10132Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    <path d="M5.36037 17.0261L4.66566 17.3087L4.66566 17.3087L5.36037 17.0261ZM5.01337 11.3969L5.73734 11.5928L5.01337 11.3969ZM20.4012 11.3969L19.6772 11.5928L20.4012 11.3969ZM20.0542 17.0261L20.7489 17.3087V17.3087L20.0542 17.0261ZM14.7437 20.8416L14.6278 20.1006L14.7437 20.8416ZM10.6708 20.8416L10.7867 20.1006L10.6708 20.8416ZM9.36347 7.60192L9.214 6.86697L9.36347 7.60192ZM16.0511 7.60192L16.2006 6.86697L16.2006 6.86697L16.0511 7.60192ZM9.92206 20.7245L9.80617 21.4655L9.92206 20.7245ZM5.45326 17.2544L6.14797 16.9718L6.14797 16.9718L5.45326 17.2544ZM15.4925 20.7245L15.6084 21.4655L15.4925 20.7245ZM19.9613 17.2544L19.2666 16.9718V16.9718L19.9613 17.2544ZM16.3272 7.65808L16.1777 8.39303L16.1777 8.39303L16.3272 7.65808ZM9.08736 7.65807L9.23684 8.39303L9.08736 7.65807ZM9.23684 8.39303L9.51294 8.33688L9.214 6.86697L8.93789 6.92312L9.23684 8.39303ZM15.9016 8.33688L16.1777 8.39303L16.4767 6.92312L16.2006 6.86697L15.9016 8.33688ZM15.3766 19.9835L14.6278 20.1006L14.8596 21.5826L15.6084 21.4655L15.3766 19.9835ZM10.7867 20.1006L10.038 19.9835L9.80617 21.4655L10.5549 21.5826L10.7867 20.1006ZM19.3595 16.7435L19.2666 16.9718L20.656 17.5371L20.7489 17.3087L19.3595 16.7435ZM6.14797 16.9718L6.05508 16.7435L4.66566 17.3087L4.75855 17.537L6.14797 16.9718ZM6.05508 16.7435C5.38669 15.1005 5.27585 13.2985 5.73734 11.5928L4.2894 11.201C3.74193 13.2246 3.87398 15.3627 4.66566 17.3087L6.05508 16.7435ZM19.6772 11.5928C20.1387 13.2985 20.0279 15.1005 19.3595 16.7435L20.7489 17.3087C21.5406 15.3628 21.6726 13.2246 21.1252 11.201L19.6772 11.5928ZM14.6278 20.1006C13.3559 20.2995 12.0587 20.2995 10.7867 20.1006L10.5549 21.5826C11.9805 21.8055 13.4341 21.8055 14.8596 21.5826L14.6278 20.1006ZM9.51294 8.33688C11.6191 7.90854 13.7955 7.90854 15.9016 8.33688L16.2006 6.86697C13.8972 6.39851 11.5174 6.39851 9.214 6.86697L9.51294 8.33688ZM10.038 19.9835C8.26356 19.706 6.79094 18.5522 6.14797 16.9718L4.75855 17.537C5.60803 19.6251 7.5336 21.11 9.80617 21.4655L10.038 19.9835ZM15.6084 21.4655C17.8809 21.11 19.8065 19.6251 20.656 17.5371L19.2666 16.9718C18.6236 18.5522 17.151 19.706 15.3766 19.9835L15.6084 21.4655ZM16.1777 8.39303C17.8985 8.74298 19.2441 9.9919 19.6772 11.5928L21.1252 11.201C20.5371 9.02744 18.7278 7.38094 16.4767 6.92312L16.1777 8.39303ZM8.93789 6.92312C6.68679 7.38094 4.87745 9.02745 4.2894 11.201L5.73734 11.5928C6.17045 9.99191 7.5161 8.74298 9.23684 8.39303L8.93789 6.92312Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    <path d="M12.7073 13.5L12.7073 15.5" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round"/>
</svg>
                </div>
                <p class="text-sm text-zinc-900 dark:text-neutral-50">Usamos seus dados de forma segura para garantir a sua satisfação:</p>
            </div>
            <hr class="border-black/[0.16] dark:border-white/[0.16]">
            <div class="flex items-center gap-3 p-3">
                <ul>
                    <li class="flex items-center gap-3">
                        <div>
                            <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M20.8797 10.1867C20.6603 10.0092 20.2952 9.71311 20.2495 9.57278C20.203 9.42703 20.3231 8.95806 20.3952 8.67898C20.5681 8.00534 20.7836 7.16734 20.3006 6.50766C19.82 5.85263 18.9557 5.79525 18.2611 5.74872C17.9735 5.72857 17.4913 5.69677 17.3696 5.6084C17.2464 5.51925 17.0611 5.06266 16.9502 4.78901C16.6766 4.11071 16.365 3.3417 15.6045 3.09674C14.8479 2.84946 14.1564 3.28744 13.5479 3.6727C13.2797 3.84168 12.8758 4.09752 12.7068 4.09752C12.5448 4.09752 12.1456 3.83783 11.8805 3.66574C11.2952 3.2851 10.5634 2.81378 9.7921 3.07582C9.03317 3.33397 8.72467 4.09829 8.45102 4.77116C8.34095 5.04247 8.15798 5.49518 8.03242 5.58744C7.90993 5.67812 7.41923 5.71069 7.12619 5.73007C6.39364 5.77968 5.56341 5.83552 5.09674 6.49597C4.63861 7.14481 4.844 7.94481 5.0254 8.65102C5.09674 8.93164 5.21765 9.40142 5.17423 9.54171C5.12773 9.67581 4.76648 9.97273 4.55097 10.1502C4.00593 10.5999 3.32764 11.1588 3.32764 11.9961C3.32764 12.8278 3.99278 13.3806 4.52686 13.824C4.75864 14.0162 5.10824 14.3069 5.15554 14.4511C5.20204 14.5938 5.08113 15.0573 5.00826 15.3341C4.83151 16.0139 4.61058 16.8604 5.11213 17.5256C5.60129 18.1721 6.46175 18.2294 7.154 18.2759C7.44162 18.2961 7.92301 18.3271 8.0455 18.4163C8.16798 18.5055 8.35249 18.9612 8.46333 19.2349C8.73775 19.9132 9.04859 20.6822 9.80984 20.9279C9.96255 20.9783 10.1137 21 10.261 21C10.844 21 11.3819 20.659 11.8672 20.3535C12.1346 20.1845 12.5378 19.9287 12.7068 19.9287C12.8719 19.9287 13.2688 20.1814 13.5308 20.3489C14.1122 20.7186 14.8378 21.1822 15.6075 20.9186C16.3657 20.6605 16.6742 19.8969 16.9479 19.2225C17.0579 18.952 17.2409 18.4985 17.3665 18.4062C17.4897 18.3156 17.9773 18.283 18.2688 18.2636C18.9959 18.214 19.8207 18.159 20.2944 17.5086C20.7712 16.8551 20.5665 16.0465 20.3859 15.3341C20.3154 15.0558 20.1975 14.5915 20.2402 14.4519C20.2866 14.3178 20.6479 14.0209 20.8626 13.8434C21.4084 13.3938 22.0867 12.8341 22.0867 11.9968C22.0867 11.1666 21.4169 10.6232 20.8797 10.1867ZM19.8774 12.648C19.4239 13.0209 18.9549 13.4077 18.7704 13.962C18.582 14.5263 18.7355 15.131 18.8835 15.7155C18.9556 16.0008 19.0765 16.4775 19.0603 16.5759C18.9424 16.6643 18.4564 16.6977 18.1657 16.7163C17.5897 16.755 16.937 16.7985 16.451 17.155C15.9696 17.5077 15.7362 18.0837 15.5106 18.6403C15.4006 18.9147 15.2145 19.3744 15.1378 19.4442C14.9967 19.4442 14.6021 19.1907 14.3657 19.0403C13.8781 18.7303 13.3254 18.3775 12.7075 18.3775C12.0889 18.3775 11.5315 18.731 11.0385 19.0427C10.7997 19.1931 10.3998 19.4473 10.3145 19.4659C10.1944 19.3799 10.0114 18.9256 9.90132 18.6543C9.67343 18.0907 9.43777 17.5086 8.95172 17.1589C8.46878 16.8109 7.85325 16.7698 7.25714 16.7303C6.97729 16.7117 6.4556 16.6768 6.36099 16.6124C6.31292 16.4752 6.43464 16.0063 6.50828 15.7272C6.65169 15.1744 6.81528 14.5481 6.63077 13.976C6.44548 13.4047 5.95324 12.9946 5.51834 12.6333C5.30595 12.4566 4.90981 12.1271 4.87647 12.0078C4.91135 11.862 5.31833 11.5264 5.53692 11.3473C5.99039 10.9737 6.45941 10.5868 6.64392 10.0326C6.83385 9.46433 6.67726 8.85503 6.52686 8.26588C6.45398 7.98138 6.3315 7.5054 6.34081 7.41472C6.45941 7.32946 6.94157 7.29689 7.22996 7.27751C7.83537 7.23721 8.46252 7.19456 8.94857 6.83876C9.42997 6.48604 9.66332 5.91085 9.8889 5.35427C9.99897 5.07908 10.1858 4.62014 10.2571 4.55115C10.4005 4.55346 10.799 4.81238 11.037 4.96667C11.5284 5.28605 12.0866 5.64808 12.7075 5.64808C13.3254 5.64808 13.8843 5.29459 14.3758 4.98374C14.6145 4.83257 15.0145 4.5791 15.0998 4.56049C15.2192 4.64656 15.4029 5.1008 15.513 5.37211C15.7409 5.93492 15.9765 6.51707 16.4626 6.86668C16.9455 7.21552 17.5618 7.25659 18.1587 7.29612C18.4533 7.31628 18.9471 7.34962 19.0394 7.40542C19.0867 7.54186 18.9665 8.01318 18.8936 8.2938C18.7517 8.84884 18.5905 9.47752 18.7758 10.0512C18.9626 10.6287 19.4626 11.0341 19.9037 11.3915C20.1052 11.5558 20.4766 11.8559 20.5339 12C20.4789 12.1511 20.089 12.4728 19.8774 12.648Z" class="fill-[var(--theme-color)]"/>
    <path d="M17.1421 8.25906C16.7197 7.906 16.0958 7.96352 15.7457 8.38305L11.3234 13.6702L9.44199 11.7898C9.05419 11.402 8.42738 11.402 8.03963 11.7898C7.65183 12.1776 7.65183 12.8044 8.03963 13.1922L10.6877 15.8402C10.8731 16.0277 11.1261 16.1308 11.3889 16.1308C11.4028 16.1308 11.4177 16.1308 11.4315 16.1289C11.7112 16.117 11.9701 15.988 12.1486 15.7748L17.2661 9.65547C17.6172 9.235 17.5627 8.61016 17.1421 8.25906Z" class="fill-[var(--theme-color)]"/>
</svg>
                        </div>
                        <p class="text-sm text-zinc-900 dark:text-neutral-50">Enviar o seu comprovante de compra e pagamento;</p>
                    </li>
                    <li class="flex items-center gap-3">
                        <div>
                            <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M20.8797 10.1867C20.6603 10.0092 20.2952 9.71311 20.2495 9.57278C20.203 9.42703 20.3231 8.95806 20.3952 8.67898C20.5681 8.00534 20.7836 7.16734 20.3006 6.50766C19.82 5.85263 18.9557 5.79525 18.2611 5.74872C17.9735 5.72857 17.4913 5.69677 17.3696 5.6084C17.2464 5.51925 17.0611 5.06266 16.9502 4.78901C16.6766 4.11071 16.365 3.3417 15.6045 3.09674C14.8479 2.84946 14.1564 3.28744 13.5479 3.6727C13.2797 3.84168 12.8758 4.09752 12.7068 4.09752C12.5448 4.09752 12.1456 3.83783 11.8805 3.66574C11.2952 3.2851 10.5634 2.81378 9.7921 3.07582C9.03317 3.33397 8.72467 4.09829 8.45102 4.77116C8.34095 5.04247 8.15798 5.49518 8.03242 5.58744C7.90993 5.67812 7.41923 5.71069 7.12619 5.73007C6.39364 5.77968 5.56341 5.83552 5.09674 6.49597C4.63861 7.14481 4.844 7.94481 5.0254 8.65102C5.09674 8.93164 5.21765 9.40142 5.17423 9.54171C5.12773 9.67581 4.76648 9.97273 4.55097 10.1502C4.00593 10.5999 3.32764 11.1588 3.32764 11.9961C3.32764 12.8278 3.99278 13.3806 4.52686 13.824C4.75864 14.0162 5.10824 14.3069 5.15554 14.4511C5.20204 14.5938 5.08113 15.0573 5.00826 15.3341C4.83151 16.0139 4.61058 16.8604 5.11213 17.5256C5.60129 18.1721 6.46175 18.2294 7.154 18.2759C7.44162 18.2961 7.92301 18.3271 8.0455 18.4163C8.16798 18.5055 8.35249 18.9612 8.46333 19.2349C8.73775 19.9132 9.04859 20.6822 9.80984 20.9279C9.96255 20.9783 10.1137 21 10.261 21C10.844 21 11.3819 20.659 11.8672 20.3535C12.1346 20.1845 12.5378 19.9287 12.7068 19.9287C12.8719 19.9287 13.2688 20.1814 13.5308 20.3489C14.1122 20.7186 14.8378 21.1822 15.6075 20.9186C16.3657 20.6605 16.6742 19.8969 16.9479 19.2225C17.0579 18.952 17.2409 18.4985 17.3665 18.4062C17.4897 18.3156 17.9773 18.283 18.2688 18.2636C18.9959 18.214 19.8207 18.159 20.2944 17.5086C20.7712 16.8551 20.5665 16.0465 20.3859 15.3341C20.3154 15.0558 20.1975 14.5915 20.2402 14.4519C20.2866 14.3178 20.6479 14.0209 20.8626 13.8434C21.4084 13.3938 22.0867 12.8341 22.0867 11.9968C22.0867 11.1666 21.4169 10.6232 20.8797 10.1867ZM19.8774 12.648C19.4239 13.0209 18.9549 13.4077 18.7704 13.962C18.582 14.5263 18.7355 15.131 18.8835 15.7155C18.9556 16.0008 19.0765 16.4775 19.0603 16.5759C18.9424 16.6643 18.4564 16.6977 18.1657 16.7163C17.5897 16.755 16.937 16.7985 16.451 17.155C15.9696 17.5077 15.7362 18.0837 15.5106 18.6403C15.4006 18.9147 15.2145 19.3744 15.1378 19.4442C14.9967 19.4442 14.6021 19.1907 14.3657 19.0403C13.8781 18.7303 13.3254 18.3775 12.7075 18.3775C12.0889 18.3775 11.5315 18.731 11.0385 19.0427C10.7997 19.1931 10.3998 19.4473 10.3145 19.4659C10.1944 19.3799 10.0114 18.9256 9.90132 18.6543C9.67343 18.0907 9.43777 17.5086 8.95172 17.1589C8.46878 16.8109 7.85325 16.7698 7.25714 16.7303C6.97729 16.7117 6.4556 16.6768 6.36099 16.6124C6.31292 16.4752 6.43464 16.0063 6.50828 15.7272C6.65169 15.1744 6.81528 14.5481 6.63077 13.976C6.44548 13.4047 5.95324 12.9946 5.51834 12.6333C5.30595 12.4566 4.90981 12.1271 4.87647 12.0078C4.91135 11.862 5.31833 11.5264 5.53692 11.3473C5.99039 10.9737 6.45941 10.5868 6.64392 10.0326C6.83385 9.46433 6.67726 8.85503 6.52686 8.26588C6.45398 7.98138 6.3315 7.5054 6.34081 7.41472C6.45941 7.32946 6.94157 7.29689 7.22996 7.27751C7.83537 7.23721 8.46252 7.19456 8.94857 6.83876C9.42997 6.48604 9.66332 5.91085 9.8889 5.35427C9.99897 5.07908 10.1858 4.62014 10.2571 4.55115C10.4005 4.55346 10.799 4.81238 11.037 4.96667C11.5284 5.28605 12.0866 5.64808 12.7075 5.64808C13.3254 5.64808 13.8843 5.29459 14.3758 4.98374C14.6145 4.83257 15.0145 4.5791 15.0998 4.56049C15.2192 4.64656 15.4029 5.1008 15.513 5.37211C15.7409 5.93492 15.9765 6.51707 16.4626 6.86668C16.9455 7.21552 17.5618 7.25659 18.1587 7.29612C18.4533 7.31628 18.9471 7.34962 19.0394 7.40542C19.0867 7.54186 18.9665 8.01318 18.8936 8.2938C18.7517 8.84884 18.5905 9.47752 18.7758 10.0512C18.9626 10.6287 19.4626 11.0341 19.9037 11.3915C20.1052 11.5558 20.4766 11.8559 20.5339 12C20.4789 12.1511 20.089 12.4728 19.8774 12.648Z" class="fill-[var(--theme-color)]"/>
    <path d="M17.1421 8.25906C16.7197 7.906 16.0958 7.96352 15.7457 8.38305L11.3234 13.6702L9.44199 11.7898C9.05419 11.402 8.42738 11.402 8.03963 11.7898C7.65183 12.1776 7.65183 12.8044 8.03963 13.1922L10.6877 15.8402C10.8731 16.0277 11.1261 16.1308 11.3889 16.1308C11.4028 16.1308 11.4177 16.1308 11.4315 16.1289C11.7112 16.117 11.9701 15.988 12.1486 15.7748L17.2661 9.65547C17.6172 9.235 17.5627 8.61016 17.1421 8.25906Z" class="fill-[var(--theme-color)]"/>
</svg>
                        </div>
                        <p class="text-sm text-zinc-900 dark:text-neutral-50">Ativar sua devolução caso não fique satisfeito;</p>
                    </li>
                    <li class="flex items-center gap-3">
                        <div>
                            <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M20.8797 10.1867C20.6603 10.0092 20.2952 9.71311 20.2495 9.57278C20.203 9.42703 20.3231 8.95806 20.3952 8.67898C20.5681 8.00534 20.7836 7.16734 20.3006 6.50766C19.82 5.85263 18.9557 5.79525 18.2611 5.74872C17.9735 5.72857 17.4913 5.69677 17.3696 5.6084C17.2464 5.51925 17.0611 5.06266 16.9502 4.78901C16.6766 4.11071 16.365 3.3417 15.6045 3.09674C14.8479 2.84946 14.1564 3.28744 13.5479 3.6727C13.2797 3.84168 12.8758 4.09752 12.7068 4.09752C12.5448 4.09752 12.1456 3.83783 11.8805 3.66574C11.2952 3.2851 10.5634 2.81378 9.7921 3.07582C9.03317 3.33397 8.72467 4.09829 8.45102 4.77116C8.34095 5.04247 8.15798 5.49518 8.03242 5.58744C7.90993 5.67812 7.41923 5.71069 7.12619 5.73007C6.39364 5.77968 5.56341 5.83552 5.09674 6.49597C4.63861 7.14481 4.844 7.94481 5.0254 8.65102C5.09674 8.93164 5.21765 9.40142 5.17423 9.54171C5.12773 9.67581 4.76648 9.97273 4.55097 10.1502C4.00593 10.5999 3.32764 11.1588 3.32764 11.9961C3.32764 12.8278 3.99278 13.3806 4.52686 13.824C4.75864 14.0162 5.10824 14.3069 5.15554 14.4511C5.20204 14.5938 5.08113 15.0573 5.00826 15.3341C4.83151 16.0139 4.61058 16.8604 5.11213 17.5256C5.60129 18.1721 6.46175 18.2294 7.154 18.2759C7.44162 18.2961 7.92301 18.3271 8.0455 18.4163C8.16798 18.5055 8.35249 18.9612 8.46333 19.2349C8.73775 19.9132 9.04859 20.6822 9.80984 20.9279C9.96255 20.9783 10.1137 21 10.261 21C10.844 21 11.3819 20.659 11.8672 20.3535C12.1346 20.1845 12.5378 19.9287 12.7068 19.9287C12.8719 19.9287 13.2688 20.1814 13.5308 20.3489C14.1122 20.7186 14.8378 21.1822 15.6075 20.9186C16.3657 20.6605 16.6742 19.8969 16.9479 19.2225C17.0579 18.952 17.2409 18.4985 17.3665 18.4062C17.4897 18.3156 17.9773 18.283 18.2688 18.2636C18.9959 18.214 19.8207 18.159 20.2944 17.5086C20.7712 16.8551 20.5665 16.0465 20.3859 15.3341C20.3154 15.0558 20.1975 14.5915 20.2402 14.4519C20.2866 14.3178 20.6479 14.0209 20.8626 13.8434C21.4084 13.3938 22.0867 12.8341 22.0867 11.9968C22.0867 11.1666 21.4169 10.6232 20.8797 10.1867ZM19.8774 12.648C19.4239 13.0209 18.9549 13.4077 18.7704 13.962C18.582 14.5263 18.7355 15.131 18.8835 15.7155C18.9556 16.0008 19.0765 16.4775 19.0603 16.5759C18.9424 16.6643 18.4564 16.6977 18.1657 16.7163C17.5897 16.755 16.937 16.7985 16.451 17.155C15.9696 17.5077 15.7362 18.0837 15.5106 18.6403C15.4006 18.9147 15.2145 19.3744 15.1378 19.4442C14.9967 19.4442 14.6021 19.1907 14.3657 19.0403C13.8781 18.7303 13.3254 18.3775 12.7075 18.3775C12.0889 18.3775 11.5315 18.731 11.0385 19.0427C10.7997 19.1931 10.3998 19.4473 10.3145 19.4659C10.1944 19.3799 10.0114 18.9256 9.90132 18.6543C9.67343 18.0907 9.43777 17.5086 8.95172 17.1589C8.46878 16.8109 7.85325 16.7698 7.25714 16.7303C6.97729 16.7117 6.4556 16.6768 6.36099 16.6124C6.31292 16.4752 6.43464 16.0063 6.50828 15.7272C6.65169 15.1744 6.81528 14.5481 6.63077 13.976C6.44548 13.4047 5.95324 12.9946 5.51834 12.6333C5.30595 12.4566 4.90981 12.1271 4.87647 12.0078C4.91135 11.862 5.31833 11.5264 5.53692 11.3473C5.99039 10.9737 6.45941 10.5868 6.64392 10.0326C6.83385 9.46433 6.67726 8.85503 6.52686 8.26588C6.45398 7.98138 6.3315 7.5054 6.34081 7.41472C6.45941 7.32946 6.94157 7.29689 7.22996 7.27751C7.83537 7.23721 8.46252 7.19456 8.94857 6.83876C9.42997 6.48604 9.66332 5.91085 9.8889 5.35427C9.99897 5.07908 10.1858 4.62014 10.2571 4.55115C10.4005 4.55346 10.799 4.81238 11.037 4.96667C11.5284 5.28605 12.0866 5.64808 12.7075 5.64808C13.3254 5.64808 13.8843 5.29459 14.3758 4.98374C14.6145 4.83257 15.0145 4.5791 15.0998 4.56049C15.2192 4.64656 15.4029 5.1008 15.513 5.37211C15.7409 5.93492 15.9765 6.51707 16.4626 6.86668C16.9455 7.21552 17.5618 7.25659 18.1587 7.29612C18.4533 7.31628 18.9471 7.34962 19.0394 7.40542C19.0867 7.54186 18.9665 8.01318 18.8936 8.2938C18.7517 8.84884 18.5905 9.47752 18.7758 10.0512C18.9626 10.6287 19.4626 11.0341 19.9037 11.3915C20.1052 11.5558 20.4766 11.8559 20.5339 12C20.4789 12.1511 20.089 12.4728 19.8774 12.648Z" class="fill-[var(--theme-color)]"/>
    <path d="M17.1421 8.25906C16.7197 7.906 16.0958 7.96352 15.7457 8.38305L11.3234 13.6702L9.44199 11.7898C9.05419 11.402 8.42738 11.402 8.03963 11.7898C7.65183 12.1776 7.65183 12.8044 8.03963 13.1922L10.6877 15.8402C10.8731 16.0277 11.1261 16.1308 11.3889 16.1308C11.4028 16.1308 11.4177 16.1308 11.4315 16.1289C11.7112 16.117 11.9701 15.988 12.1486 15.7748L17.2661 9.65547C17.6172 9.235 17.5627 8.61016 17.1421 8.25906Z" class="fill-[var(--theme-color)]"/>
</svg>
                        </div>
                        <p class="text-sm text-zinc-900 dark:text-neutral-50">Acompanhar o andamento do seu pedido.</p>
                    </li>
                </ul>
            </div>
        </div>
        <hr class="border-4 border-black/[0.04] dark:border-white/[0.04] my-4">
    </div>
</div>
                <!-- Card de progresso para frete grátis -->
                <div class="xl:mx-8">
                    <!-- Card de progresso para frete grátis -->
<div x-show="process_getting_free_shipping.has_free_shipping && process_getting_free_shipping.free_shipping_progress < 100" class="leading-4 mt-6 rounded-xl border border-orange-100 dark:border-orange-300/10 bg-white dark:bg-neutral-900 p-4 shadow">
    <div class="relative w-full bg-neutral-200 dark:bg-neutral-400 rounded-full h-3 overflow-visible">
    <div class="bg-[var(--theme-color)] h-3 rounded-full transition-all duration-500" :style="{ width: process_getting_free_shipping.free_shipping_progress + '%' }"></div>
    <div class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-1/4 bg-[var(--theme-color)] text-white rounded-full shadow-lg w-7 h-7 flex items-center justify-center z-10">
        <div>
    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2.5 2C2.22386 2 2 2.22386 2 2.5C2 2.77614 2.22386 3 2.5 3H2.7457C2.96894 3 3.16513 3.14799 3.22646 3.36264L4.81202 8.91208C4.996 9.55603 5.58458 10 6.2543 10H10.823C11.4363 10 11.9879 9.62657 12.2157 9.05709L13.69 5.37139C13.9527 4.71453 13.4689 4 12.7615 4H4.44858L4.18798 3.08792C4.004 2.44397 3.41542 2 2.7457 2H2.5ZM6.5 14C7.32843 14 8 13.3284 8 12.5C8 11.6716 7.32843 11 6.5 11C5.67157 11 5 11.6716 5 12.5C5 13.3284 5.67157 14 6.5 14ZM10.5 14C11.3284 14 12 13.3284 12 12.5C12 11.6716 11.3284 11 10.5 11C9.67157 11 9 11.6716 9 12.5C9 13.3284 9.67157 14 10.5 14Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    </svg>
</div>
    </div>
</div>

    <div class="mt-4 text-center">
        <span class="text-sm text-zinc-800 dark:text-neutral-200">
            <span><strong x-text="'Faltam ' + getCurrencySymbol() + formatCurrencyPrice(process_getting_free_shipping.remaining_free_shipping / 100)"></strong> para você ganhar <strong class="text-[var(--theme-color)]">FRETE GRÁTIS!</strong></span>
        </span>
    </div>
</div>
                </div>
                <div class="flex justify-end">
                    <template x-if="!checkoutConfig.hasFreight">
                        <button class="py-3 h-10 pl-4 pr-3 flex items-center gap-2 border-3 border-[var(--theme-color)] rounded-[var(--border-radius)] text-zinc-900 dark:text-neutral-50 text-sm leading-4 font-bold hover:scale-105 transition-transform" @click="validateForm(validation.formIdentification) ? stepCurrent = STEP_ENUM.PAYMENT : null">
    Pagamento
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M6.5 12H17" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M12.9116 8L17.4999 12L12.9116 16" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</button>
                    </template>
                    <template x-if="checkoutConfig.hasFreight">
                        <button class="py-3 h-10 pl-4 pr-3 flex items-center gap-2 border-3 border-[var(--theme-color)] rounded-[var(--border-radius)] text-zinc-900 dark:text-neutral-50 text-sm leading-4 font-bold hover:scale-105 transition-transform" @click="validateForm(validation.formIdentification) ? stepCurrent = STEP_ENUM.SHIPPING : null">
    Entrega
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M6.5 12H17" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M12.9116 8L17.4999 12L12.9116 16" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</button>
                    </template>
                </div>
            </div>
        </template>
        <template x-if="stepCurrent === STEP_ENUM.SHIPPING">
            <div class="w-full">
                <div id="shipping_form" class="mt-8 mx-3">
    <template x-if="checkoutConfig.form_step_enum === 1">
        <div class="mb-8 xl:mx-8">
            <div class="flex items-center justify-between ">
                <div class="flex items-center justify-center text-base leading-4 font-black rounded-lg w-8 h-8 bg-[var(--theme-color)] text-[var(--contrast-color)]">2</div>
                <div class="flex items-center gap-1.5">
                    <p class="text-lg leading-8 font-medium text-zinc-900 dark:text-neutral-50">Frete e destino</p>
                </div>
            </div>
        </div>
    </template>
    <template x-if="checkoutConfig.form_step_enum === 3">
        <div class="my-8 xl:mx-8">
            <div class="flex items-center justify-between ">
                <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Frete e destino</p>
            </div>
        </div>
    </template>
    <template x-if="checkoutConfig.form_step_enum === 2">
        <div class="my-8 xl:mx-8">
            <div class="flex items-center justify-between ">
                <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Frete e destino</p>
                <div class="flex items-center gap-1.5">
                    <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50">Ambiente seguro</p>
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.4627 4.7991C21.4265 4.54124 21.2395 4.32912 20.9866 4.2594L12.8838 2.02392C12.7683 1.99203 12.6463 1.99203 12.5307 2.02392L4.42791 4.2594C4.1751 4.32912 3.98808 4.54115 3.95188 4.7991C3.90489 5.13436 2.83274 13.0556 5.58272 16.9962C8.32945 20.9321 12.3815 21.9407 12.5526 21.9818C12.6034 21.994 12.6553 22 12.7073 22C12.7593 22 12.8111 21.9939 12.862 21.9818C13.0332 21.9407 17.0852 20.9321 19.8318 16.9962C22.5818 13.0557 21.5097 5.13444 21.4627 4.7991ZM17.9325 9.42362L12.4056 14.9066C12.277 15.0342 12.1084 15.0981 11.9398 15.0981C11.7712 15.0981 11.6025 15.0343 11.4739 14.9066L8.05669 11.5165C7.93309 11.394 7.8637 11.2277 7.8637 11.0544C7.8637 10.8811 7.93318 10.7148 8.05669 10.5923L8.7352 9.91914C8.9925 9.66397 9.40967 9.66388 9.66688 9.91914L11.9398 12.174L16.3223 7.82614C16.4459 7.70352 16.6135 7.63468 16.7882 7.63468C16.9629 7.63468 17.1305 7.70352 17.254 7.82614L17.9325 8.49926C18.1898 8.75451 18.1898 9.16837 17.9325 9.42362Z" class="fill-[var(--theme-color)]"/>
</svg>
                </div>
            </div>
        </div>
    </template>
    <div class="space-y-2 xl:mx-8">
        <div>
            <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.zip_code !== ''" x-bind:class="{ '!border-red-600 dark:!border-red-500' : formShipping.error_message }"
>
    <input
    autocomplete="not"
    class="w-full py-[0.875rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" placeholder="CEP" x-model="formShipping.zip_code" x-mask="99999-999" id="zip_code" name="zip_code" x-ref="zip_code" @keyup="validation.formShipping.zip_code.validate(context)" @blur="validation.formShipping.zip_code.validate(context, false, true)" @input="validateAndFetchFreight" @keyup.enter="getFreight(); getAddress($refs.zip_code.value)"
>
                <button type="button" class="text-sm  leading-4 font-black text-zinc-900 dark:text-neutral-50 hover:text-zinc-500 hover:dark:text-neutral-300 transition-colors ring-0" x-bind:class="'disabled:!text-zinc-600 disabled:cursor-not-allowed'" x-bind:disabled="formShipping.zip_code.length < 9" @click="getFreight(); getAddress($refs.zip_code.value)">
    <svg x-show="formShipping.is_loading" class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="fill-[var(--theme-color)]" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>
                    <p x-show="!formShipping.is_loading">Buscar</p>
</button>
</div>
            <p class="text-sm text-red-600 ml-5 font-medium" x-text="formShipping.error_message" x-show="formShipping.error_message">
    
</p>
            <a
                class="text-[0.8125rem] font-medium text-zinc-900 dark:text-neutral-50 hover:text-zinc-500 hover:dark:text-neutral-300 transition-colors ml-5 mt-1 underline"
                rel="noopener noreferrer"
                target="_blank"
                href="https://buscacepinter.correios.com.br/app/endereco/index.php?t"
            >
                Não sei meu CEP
            </a>
        </div>
        <div class="flex flex-col mt-8 gap-2" x-show="formShipping.show_form">
            <div class="flex flex-col gap-1 p-1 rounded-lg border-2 border-black/[0.16] dark:border-white/[0.16] my-8" x-data="{ selected: null }">
                <template x-if="freight_list.length === 0">
                    <button
                        type="button"
                        class="group flex items-center p-4 rounded border-2 w-full border-red-500 dark:border-rose-300"
                    >
                        <div class="flex flex-col flex-1 items-start">
                            <p class="text-[0.8125rem] font-black text-red-500 dark:text-rose-300" x-text="'Sem frete cadastrado para este CEP'"></p>
                        </div>
                    </button>
                </template>
                <template x-for="item in freight_list">
                    <button
                        type="button"
                        class="group flex items-center p-2 rounded border-2 w-full hover:!border-[var(--theme-color)] pr-4"
                        :class="freight.code === item.code ? 'border-[var(--theme-color)]' : 'border-black/[0.16] dark:border-white/[0.16] bg-transparent'"
                        @click="selected = item.code; freight = item; cart.totals.freight = item.price;"
                    >
                        <div class="w-12 h-12 flex justify-center items-center">
                        <span
                            class='w-6 h-6 border-2 rounded-full flex items-center justify-center group-hover:border-[var(--theme-color)]'
                            :class="freight.code === item.code ? 'border-[var(--theme-color)]' : 'border-black/[0.16] dark:border-white/[0.16]'"
                        >
                            <span x-cloak x-show="freight.code === item.code" class='w-4 h-4 bg-[var(--theme-color)] rounded-full'></span>
                        </span>
                        </div>
                        <div class="flex flex-col flex-1 items-start">
                            <p class="text-[0.8125rem] font-black text-zinc-900 dark:text-neutral-50" x-html="item.price === 0 ? 'Grátis' : getCurrencySymbol() + formatCurrencyPrice(item.price / 100)"></p>
                            <p class="text-[0.8125rem] font-medium text-zinc-900 dark:text-neutral-50" x-text="item.description"></p>
                        </div>
                        <p class="text-[0.8125rem] font-normal text-zinc-900 dark:text-neutral-50" x-text="item.delivery_time ? item.delivery_time+' úteis' : ''"></p>
                    </button>
                </template>
            </div>
            <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.street !== ''"
>
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g id="icon-location">
        <path id="Vector" d="M20 11.1755C20 15.6907 16.4183 21 12 21C7.58172 21 4 15.6907 4 11.1755C4 6.66029 7.58172 3 12 3C16.4183 3 20 6.66029 20 11.1755Z" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" />
        <path id="Vector_2" d="M9.5 10.5C9.5 9.11929 10.6193 8 12 8C13.3807 8 14.5 9.11929 14.5 10.5C14.5 11.8807 13.3807 13 12 13C10.6193 13 9.5 11.8807 9.5 10.5Z" class="stroke-zinc-900 dark:stroke-neutral-50" />
    </g>
</svg>
                <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" id="street" placeholder="Endereço" name="street" x-ref="street" x-model="formShipping.street" x-bind:disabled="shippingLockedStreet" @keyup="validation.formShipping.street.validate(context)" @blur="validation.formShipping.street.validate(context, false, true)" maxLength="255"
>
</div>
            <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-text="formShipping.error_message" x-show="formShipping.error_message">
    
</p>
            <div class="flex items-start gap-2 justify-between">
                <div class="w-full">
                    <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:class="formShipping.no_number ? '!border-black/[0.16] dark:border-white/[0.16]' : ''"
>
    <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 !py-[0.875rem]" id="number" placeholder="Número" type="text" x-bind:disabled="formShipping.no_number ? true : false" name="street_number" x-ref="street_number" x-model="formShipping.street_number" @keyup="validation.formShipping.street_number.validate(context)" @blur="validation.formShipping.street_number.validate(context, false, true)" maxlength="9"
>
                        <label class="flex items-center text-xs font-bold text-zinc-900 dark:text-neutral-50">
                            S/N
                            <div class="w-12 h-12 flex items-center justify-center -mr-4">
                                <input
                                    type="checkbox"
                                    class="w-4.5 h-4.5 border-2 rounded-[3px] bg-white dark:bg-neutral-800 border-[var(--theme-color)] text-[var(--theme-color)] focus:ring-0"
                                    x-bind:class="formShipping.no_number && '!bg-[var(--theme-color)]'"
                                    x-model="formShipping.no_number"
                                >
                            </div>
                        </label>
</div>
                    <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formShipping.street_number.isValid && formShipping.no_number !== true" x-text="validation.formShipping.street_number.errorMessage">
    
</p>
                </div>
                <div class="w-full">
                    <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.neighborhood !== ''"
>
    <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" id="neighborhood" placeholder="Bairro" name="neighborhood" x-ref="neighborhood" x-model="formShipping.neighborhood" x-bind:disabled="shippingLockedNeighborhood" @keyup="validation.formShipping.neighborhood.validate(context)" @blur="validation.formShipping.neighborhood.validate(context, false, true)" maxLength="255"
>
</div>
                    <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formShipping.neighborhood.isValid" x-text="validation.formShipping.neighborhood.errorMessage">
    
</p>
                </div>
            </div>
            <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.complement !== ''"
>
    <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" placeholder="Complemento" name="complement" x-ref="complement" x-model="formShipping.complement" @keyup="validation.formShipping.complement.validate(context)" @blur="validation.formShipping.complement.validate(context, false, true)" maxLength="255"
>
</div>
            <p class="text-sm text-red-600 ml-5 font-medium" x-cloak="x-cloak" x-show="!validation.formShipping.complement.isValid" x-text="validation.formShipping.complement.errorMessage">
    
</p>
            <div class="flex items-center gap-2 justify-between">
                <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.city !== ''"
>
    <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" id="city" placeholder="Cidade" name="city" x-ref="city" x-model="formShipping.city" x-bind:disabled="shippingLockedCity" maxLength="255"
>
</div>
                <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.state !== ''"
>
    <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" id="state" placeholder="Estado" name="state" x-ref="state" x-model="formShipping.state" x-bind:disabled="shippingLockedState" x-on:input="formShipping.state = formShipping.state.toUpperCase().replace(/[^A-Z]/g, '').substring(0, 2)" maxlength="2" pattern="[A-Z]{2}" title="Insira exatamente 2 letras maiúsculas."
>
</div>
            </div>
            <div>
                <span class="flex items-center gap-2 mb-5 mt-4 text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50 ml-4">
                    Outra pessoa vai receber?
                    <button @click="formShipping.receiver_flag = true" class="font-bold underline">
                        Clique aqui
                    </button>
                </span>
                <div class="flex items-center gap-4 justify-between" x-cloak x-show="formShipping.receiver_flag" x-collapse>
                    <div
    class="group g w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 flex items-center gap-3 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]" x-bind:data-filled="formShipping.receiver !== ''"
>
    <input
    autocomplete="off"
    class="w-full form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50 py-[0.875rem]" placeholder="Nome do recebedor" name="receiver" x-ref="receiver" x-model="formShipping.receiver" @keyup="validation.formShipping.receiver.validate(context)" @blur="validation.formShipping.receiver.validate(context, false, true)"
>
</div>
                    <button
                        class="w-10 h-10 flex items-center justify-center"
                        @click="clearReceiver"
                    >
                        <svg width="24" height="24" class="fill-black dark:fill-white" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path id="Vector" d="M19 6H5C4.73478 6 4.48043 6.10536 4.29289 6.29289C4.10536 6.48043 4 6.73478 4 7C4 7.26522 4.10536 7.51957 4.29289 7.70711C4.48043 7.89464 4.73478 8 5 8V17.591C5.00106 18.4948 5.36056 19.3613 5.99964 20.0004C6.63872 20.6394 7.5052 20.9989 8.409 21H15.591C16.4948 20.9989 17.3613 20.6394 18.0004 20.0004C18.6394 19.3613 18.9989 18.4948 19 17.591V8C19.2652 8 19.5196 7.89464 19.7071 7.70711C19.8946 7.51957 20 7.26522 20 7C20 6.73478 19.8946 6.48043 19.7071 6.29289C19.5196 6.10536 19.2652 6 19 6ZM17 17.591C16.9997 17.9646 16.8512 18.3228 16.587 18.587C16.3228 18.8512 15.9646 18.9997 15.591 19H8.409C8.03539 18.9997 7.67716 18.8512 7.41298 18.587C7.1488 18.3228 7.00026 17.9646 7 17.591V8H17V17.591Z" class="fill-black dark:fill-white" />
    <path id="Vector_2" d="M10 5H14C14.2652 5 14.5196 4.89464 14.7071 4.70711C14.8946 4.51957 15 4.26522 15 4C15 3.73478 14.8946 3.48043 14.7071 3.29289C14.5196 3.10536 14.2652 3 14 3H10C9.73478 3 9.48043 3.10536 9.29289 3.29289C9.10536 3.48043 9 3.73478 9 4C9 4.26522 9.10536 4.51957 9.29289 4.70711C9.48043 4.89464 9.73478 5 10 5Z" class="fill-black dark:fill-white" fill-opacity="0.64" />
    <path id="Vector_3" d="M10 16C10.2652 16 10.5196 15.8946 10.7071 15.7071C10.8946 15.5196 11 15.2652 11 15V12C11 11.7348 10.8946 11.4804 10.7071 11.2929C10.5196 11.1054 10.2652 11 10 11C9.73478 11 9.48043 11.1054 9.29289 11.2929C9.10536 11.4804 9 11.7348 9 12V15C9 15.2652 9.10536 15.5196 9.29289 15.7071C9.48043 15.8946 9.73478 16 10 16Z" class="fill-black dark:fill-white" fill-opacity="0.64" />
    <path id="Vector_4" d="M14 16C14.2652 16 14.5196 15.8946 14.7071 15.7071C14.8946 15.5196 15 15.2652 15 15V12C15 11.7348 14.8946 11.4804 14.7071 11.2929C14.5196 11.1054 14.2652 11 14 11C13.7348 11 13.4804 11.1054 13.2929 11.2929C13.1054 11.4804 13 11.7348 13 12V15C13 15.2652 13.1054 15.5196 13.2929 15.7071C13.4804 15.8946 13.7348 16 14 16Z" class="fill-black dark:fill-white" fill-opacity="0.64" />
</svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
                <!-- Card de progresso para frete grátis -->
                <div class="xl:mx-8">
                    <!-- Card de progresso para frete grátis -->
<div x-show="process_getting_free_shipping.has_free_shipping && process_getting_free_shipping.free_shipping_progress < 100" class="leading-4 mt-6 rounded-xl border border-orange-100 dark:border-orange-300/10 bg-white dark:bg-neutral-900 p-4 shadow">
    <div class="relative w-full bg-neutral-200 dark:bg-neutral-400 rounded-full h-3 overflow-visible">
    <div class="bg-[var(--theme-color)] h-3 rounded-full transition-all duration-500" :style="{ width: process_getting_free_shipping.free_shipping_progress + '%' }"></div>
    <div class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-1/4 bg-[var(--theme-color)] text-white rounded-full shadow-lg w-7 h-7 flex items-center justify-center z-10">
        <div>
    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2.5 2C2.22386 2 2 2.22386 2 2.5C2 2.77614 2.22386 3 2.5 3H2.7457C2.96894 3 3.16513 3.14799 3.22646 3.36264L4.81202 8.91208C4.996 9.55603 5.58458 10 6.2543 10H10.823C11.4363 10 11.9879 9.62657 12.2157 9.05709L13.69 5.37139C13.9527 4.71453 13.4689 4 12.7615 4H4.44858L4.18798 3.08792C4.004 2.44397 3.41542 2 2.7457 2H2.5ZM6.5 14C7.32843 14 8 13.3284 8 12.5C8 11.6716 7.32843 11 6.5 11C5.67157 11 5 11.6716 5 12.5C5 13.3284 5.67157 14 6.5 14ZM10.5 14C11.3284 14 12 13.3284 12 12.5C12 11.6716 11.3284 11 10.5 11C9.67157 11 9 11.6716 9 12.5C9 13.3284 9.67157 14 10.5 14Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    </svg>
</div>
    </div>
</div>

    <div class="mt-4 text-center">
        <span class="text-sm text-zinc-800 dark:text-neutral-200">
            <span><strong x-text="'Faltam ' + getCurrencySymbol() + formatCurrencyPrice(process_getting_free_shipping.remaining_free_shipping / 100)"></strong> para você ganhar <strong class="text-[var(--theme-color)]">FRETE GRÁTIS!</strong></span>
        </span>
    </div>
</div>
                </div>
                <div class="flex justify-between my-10">
                    <button class="pl-3 pr-4 flex items-center gap-2 text-zinc-900 dark:text-neutral-50 text-sm leading-4 font-bold" @click="stepCurrent = STEP_ENUM.IDENTIFICATION">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M17.5 12L7 12" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M11.0884 16L6.50014 12L11.0884 8" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
                        Voltar
</button>
                    <button class="py-3 h-10 pl-4 pr-3 flex items-center gap-2 border-3 border-[var(--theme-color)] rounded-[var(--border-radius)] text-zinc-900 dark:text-neutral-50 text-sm leading-4 font-bold hover:scale-105 transition-transform" @click="validateForm(validation.formShipping) ? stepCurrent = STEP_ENUM.PAYMENT : null">
    Pagamento
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M6.5 12H17" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M12.9116 8L17.4999 12L12.9116 16" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
</button>
                </div>
            </div>
        </template>
        <div x-show="stepCurrent === STEP_ENUM.PAYMENT">
            <!-- Payment Form -->
            <div id="payment_form" class="mt-8 mx-3" x-cloak>
    <template x-if="checkoutConfig.form_step_enum === 1">
        <div class="mb-8 xl:mx-8">
            <div class="flex items-center justify-between ">
                <div class="flex items-center justify-center text-base leading-4 font-black rounded-lg w-8 h-8 bg-[var(--theme-color)] text-[var(--contrast-color)]">
                    2
                </div>
                <div class="flex items-center gap-1.5">
                    <p class="text-lg leading-8 font-medium text-zinc-900 dark:text-neutral-50">Opções de pagamento</p>
                </div>
            </div>
        </div>
    </template>
    <template x-if="checkoutConfig.form_step_enum === 2">
        <div class="my-8 xl:mx-8">
            <div class="flex items-center justify-between ">
                <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Opções de pagamento</p>
                <div class="flex items-center gap-1.5">
                    <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50">Ambiente seguro</p>
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.4627 4.7991C21.4265 4.54124 21.2395 4.32912 20.9866 4.2594L12.8838 2.02392C12.7683 1.99203 12.6463 1.99203 12.5307 2.02392L4.42791 4.2594C4.1751 4.32912 3.98808 4.54115 3.95188 4.7991C3.90489 5.13436 2.83274 13.0556 5.58272 16.9962C8.32945 20.9321 12.3815 21.9407 12.5526 21.9818C12.6034 21.994 12.6553 22 12.7073 22C12.7593 22 12.8111 21.9939 12.862 21.9818C13.0332 21.9407 17.0852 20.9321 19.8318 16.9962C22.5818 13.0557 21.5097 5.13444 21.4627 4.7991ZM17.9325 9.42362L12.4056 14.9066C12.277 15.0342 12.1084 15.0981 11.9398 15.0981C11.7712 15.0981 11.6025 15.0343 11.4739 14.9066L8.05669 11.5165C7.93309 11.394 7.8637 11.2277 7.8637 11.0544C7.8637 10.8811 7.93318 10.7148 8.05669 10.5923L8.7352 9.91914C8.9925 9.66397 9.40967 9.66388 9.66688 9.91914L11.9398 12.174L16.3223 7.82614C16.4459 7.70352 16.6135 7.63468 16.7882 7.63468C16.9629 7.63468 17.1305 7.70352 17.254 7.82614L17.9325 8.49926C18.1898 8.75451 18.1898 9.16837 17.9325 9.42362Z" class="fill-[var(--theme-color)]"/>
</svg>
                </div>
            </div>
        </div>
    </template>
    <div class="flex items-center justify-between gap-2 xl:mx-8">
        <template x-if="checkoutConfig.credit_card_flag">
            <button
                class="relative flex w-full justify-center items-center gap-1 h-14 border-[0.1875rem] rounded-[var(--border-radius)] border-black/[0.16] hover:border-black/[0.08] dark:border-white/[0.16] dark:hover:border-white/[0.08] transition-colors"
                x-bind:class="{ '!border-[var(--theme-color)]  cursor-default' : formPayment.payment_method === 2 }"
                @click="formPayment.payment_method = 2; totalDiscountAutomatic()"
            >
                <svg x-bind:data-active="formPayment.payment_method === 2" class="group" width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M4.8335 9H21.8335" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M7.0835 16.7539H8.8335" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M11.021 16.7539H14.521" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
    <path d="M7.8295 4H17.8285C21.0325 4 21.8335 4.82872 21.8335 8.13418V15.8657C21.8335 19.1712 21.0325 19.9999 17.8375 19.9999H7.8295C4.6345 20.0093 3.8335 19.1806 3.8335 15.8752V8.13418C3.8335 4.82872 4.6345 4 7.8295 4Z" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
</svg>
                <p
                    class="text-black/[0.64] dark:text-white/[0.64] text-sm font-black"
                    x-bind:class="{ '!text-zinc-900 dark:!text-neutral-50' : formPayment.payment_method === 2 }"
                >Cartão</p>
                <div x-text="formPayment.credit_card_automatic_discount+'% '" x-show="formPayment.credit_card_automatic_discount > 0" class="absolute -bottom-[50%] left-[50%] -translate-x-[50%] -translate-y-[50%] rounded-[var(--border-radius)] bg-[var(--theme-color)] text-[var(--contrast-color)] py-1 px-2 text-xs font-bold">
    <p ></p>
</div>
            </button>
        </template>
        <template x-if="checkoutConfig.pix_flag">
            <button
                class="relative flex w-full justify-center items-center gap-1 h-14 border-[0.1875rem] rounded-[var(--border-radius)] border-black/[0.16] hover:border-black/[0.08] dark:border-white/[0.16] dark:hover:border-white/[0.08] transition-colors"
                x-bind:class="{ '!border-[var(--theme-color)]  cursor-default': formPayment.payment_method === 3 }"
                @click="formPayment.payment_method = 3; totalDiscountAutomatic()"
            >
                <svg x-bind:data-active="formPayment.payment_method === 3" class="group" width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_1918_13812)">
            <mask id="mask0_1918_13812" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="2" y="2" width="21" height="20">
                <path d="M22.5391 2H2.5V22H22.5391V2Z" fill="white" />
            </mask>
            <g mask="url(#mask0_1918_13812)">
                <path d="M7.91257 17.7935C8.47903 17.6276 8.99946 17.3214 9.42834 16.8925L12.3532 13.9677C12.3685 13.9524 12.3933 13.9524 12.4085 13.9677L15.3451 16.9042C15.8191 17.3782 16.4049 17.7024 17.0411 17.8529L14.2171 20.6769C13.275 21.5912 11.7409 21.5911 10.7989 20.6768L7.91257 17.7935ZM10.9332 11.647L10.9489 11.6607C11.0943 11.7879 11.2633 11.9061 11.4501 12.002C11.2562 12.0973 11.0759 12.2243 10.9179 12.3832C10.9175 12.3836 10.9172 12.3839 10.9169 12.3842L7.92592 15.3713C7.61128 15.659 7.26416 15.8 6.90729 15.8H5.92119L3.83376 13.7132L3.83349 13.713C2.89079 12.7717 2.89079 11.2431 3.83349 10.3018L3.83414 10.3012L5.92151 8.21095H6.90729C7.26408 8.21095 7.61116 8.35185 7.92576 8.63952L10.9332 11.647ZM13.8432 12.3787C13.686 12.2215 13.5065 12.0956 13.3137 12.0011C13.4996 11.9053 13.668 11.7874 13.8128 11.6607L13.8285 11.647L16.8546 8.62082C16.855 8.62046 16.8553 8.62015 16.8557 8.6198C17.1229 8.35581 17.4929 8.20312 17.8662 8.20312H19.0823L21.1807 10.3015C22.122 11.2429 22.122 12.772 21.1807 13.7133L19.0823 15.8117H17.8662C17.4928 15.8117 17.1235 15.6589 16.8569 15.3924L13.8432 12.3787Z" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.25245" />
                <path d="M9.42837 7.11072C8.99949 6.68184 8.47906 6.37561 7.9126 6.20974L10.7989 3.32642C11.741 2.41209 13.275 2.41201 14.2171 3.32626L17.0412 6.15033C16.405 6.30078 15.8191 6.62497 15.3451 7.09898L12.4086 10.0356C12.3933 10.0508 12.3685 10.0508 12.3532 10.0356L9.42837 7.11072Z" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.25245" />
            </g>
        </g>
        <defs>
            <clipPath id="clip0_1918_13812">
                <rect width="20.0391" height="20" class="fill-black/[0.64] dark:fill-white/[0.64] group-data-[active=true]:fill-zinc-900 dark:group-data-[active=true]:fill-neutral-50" transform="translate(2.5 2)" />
            </clipPath>
        </defs>
    </svg>

                <p
                    class="text-black/[0.64] dark:text-white/[0.64] text-sm font-black"
                    x-bind:class="{ '!text-zinc-900 dark:!text-neutral-50' : formPayment.payment_method === 3 }"
                >Pix</p>
                <div x-text="checkoutConfig.pix_automatic_discount+'%'" x-show="checkoutConfig.pix_automatic_discount > 0" class="absolute -bottom-[50%] left-[50%] -translate-x-[50%] -translate-y-[50%] rounded-[var(--border-radius)] bg-[var(--theme-color)] text-[var(--contrast-color)] py-1 px-2 text-xs font-bold">
    <p ></p>
</div>
            </button>
        </template>
        <template x-if="checkoutConfig.billet_flag">
            <button
                class="relative flex w-full justify-center items-center gap-1 h-14 border-[0.1875rem] rounded-[var(--border-radius)] border-black/[0.16] hover:border-black/[0.08] dark:border-white/[0.16] dark:hover:border-white/[0.08] transition-colors"
                x-bind:class="{ '!border-[var(--theme-color)] cursor-default' : formPayment.payment_method === 1 }"
                @click="formPayment.payment_method = 1; totalDiscountAutomatic()"
            >
                <svg x-bind:data-active="formPayment.payment_method === 1" class="group" width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M6.41699 19.7076V4.29238L8.79489 5.65118L9.16699 5.86381L9.5391 5.65118L12.667 3.86381L15.7949 5.65118L16.167 5.86381L16.5391 5.65118L18.917 4.29238V19.7076L16.5391 18.3488L16.167 18.1362L15.7949 18.3488L12.667 20.1362L9.5391 18.3488L9.16699 18.1362L8.79489 18.3488L6.41699 19.7076Z" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.5" />
    <line x1="9.66699" y1="9.25" x2="15.667" y2="9.25" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.5" />
    <line x1="9.66699" y1="12.25" x2="15.667" y2="12.25" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.5" />
    <line x1="9.66699" y1="15.25" x2="15.667" y2="15.25" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.5" />
</svg>
                <p
                    class="text-black/[0.64] dark:text-white/[0.64] text-sm font-black"
                    x-bind:class="{ '!text-zinc-900 dark:!text-neutral-50' : formPayment.payment_method === 1 }"
                >Boleto</p>
                <div x-text="checkoutConfig.billet_automatic_discount+'%'" x-show="checkoutConfig.billet_automatic_discount > 0" class="absolute -bottom-[50%] left-[50%] -translate-x-[50%] -translate-y-[50%] rounded-[var(--border-radius)] bg-[var(--theme-color)] text-[var(--contrast-color)] py-1 px-2 text-xs font-bold">
    <p ></p>
</div>
            </button>
        </template>
    </div>
    <template x-if="formPayment.payment_method === 2">
        <div id="payment-credit-card-container" class="mt-8 xl:mx-8">
    <template x-if="checkoutConfig.form_step_enum === 3">
        <div class="my-8">
            <div class="flex items-center justify-between ">
                <p class="text-lg leading-8 text-zinc-900 dark:text-neutral-50">Opções de pagamento</p>
                <div class="flex items-center gap-1.5">
                    <p class="text-sm leading-4 font-medium text-zinc-900 dark:text-neutral-50">Ambiente seguro</p>
                    <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.4627 4.7991C21.4265 4.54124 21.2395 4.32912 20.9866 4.2594L12.8838 2.02392C12.7683 1.99203 12.6463 1.99203 12.5307 2.02392L4.42791 4.2594C4.1751 4.32912 3.98808 4.54115 3.95188 4.7991C3.90489 5.13436 2.83274 13.0556 5.58272 16.9962C8.32945 20.9321 12.3815 21.9407 12.5526 21.9818C12.6034 21.994 12.6553 22 12.7073 22C12.7593 22 12.8111 21.9939 12.862 21.9818C13.0332 21.9407 17.0852 20.9321 19.8318 16.9962C22.5818 13.0557 21.5097 5.13444 21.4627 4.7991ZM17.9325 9.42362L12.4056 14.9066C12.277 15.0342 12.1084 15.0981 11.9398 15.0981C11.7712 15.0981 11.6025 15.0343 11.4739 14.9066L8.05669 11.5165C7.93309 11.394 7.8637 11.2277 7.8637 11.0544C7.8637 10.8811 7.93318 10.7148 8.05669 10.5923L8.7352 9.91914C8.9925 9.66397 9.40967 9.66388 9.66688 9.91914L11.9398 12.174L16.3223 7.82614C16.4459 7.70352 16.6135 7.63468 16.7882 7.63468C16.9629 7.63468 17.1305 7.70352 17.254 7.82614L17.9325 8.49926C18.1898 8.75451 18.1898 9.16837 17.9325 9.42362Z" class="fill-[var(--theme-color)]"/>
</svg>
                </div>
            </div>
        </div>
    </template>
        <div class="credit-card-container">
            <div class="credit-card-preview my-10">
                <section
        class='w-67.5 h-42 bg-transparent perspective mx-auto'
>
    <div
            class="relative preserve-3d w-full h-full duration-1000"
            x-on:flip.window="$event.detail == 0 ? formPayment.credit_cards[0].flip_credit_card = !formPayment.credit_cards[0].flip_credit_card : '' "
            x-bind:class="formPayment.credit_cards[0].flip_credit_card ? 'flip-credit-card' : ''"
    >
        <div class='absolute backface-hidden bg-[var(--theme-color)] w-full h-full  px-4 py-6 rounded-2xl bg-credit-card flex flex-col justify-between'>
            <div class='flex justify-between items-start'>
                <div class='w-full flex justify-end'>
                    <img class="flag-credit-card" src="https://checkout.ligafacil.online/images/flags/fake-card.svg" alt="ícone bandeira de cartão">
                </div>
            </div>
            <input
                    class='text-[var(--contrast-color)] font-bold uppercase text-sm border-none bg-transparent w-full'
                    type='text'
                    x-model="formPayment.credit_cards[0].full_name.length === 0 ? 'Nome impresso no cartão' : formPayment.credit_cards[0].full_name"
                    x-on:card-name.window="$event.detail[0] == 0 ? formPayment.credit_cards[0].full_name = $event.detail[1] : ''"
                    disabled
            >
            <div class='font-bold text-base'>
                <input
                        id="card-number"
                        class='p-0 w-full border-none bg-transparent text-center text-lg text-[var(--contrast-color)]'
                        x-mask="9999 9999 9999 9999"
                        type='text'
                        x-model="formPayment.credit_cards[0].number.length === 0 ? '0000 0000 0000 0000' : formPayment.credit_cards[0].number"
                        x-on:card-number.window="$event.detail[0] == 0 ? formPayment.credit_cards[0].number = $event.detail[1] : ''"
                        disabled
                >
            </div>
            <p class='text-xs'>
                <input
                        class='border-none bg-transparent text-xs text-[var(--contrast-color)]'
                        type='text'
                        x-model="formPayment.credit_cards[0].expiration.length === 0 ? 'MM / AA' : formPayment.credit_cards[0].expiration"
                        x-on:card-expiration.window="$event.detail[0] == 0 ? formPayment.credit_cards[0].expiration = $event.detail[1] : ''"
                        disabled
                >
            </p>
        </div>
        <div class='absolute flip-credit-card backface-hidden bg-[var(--theme-color)] w-full h-full mx-auto rounded-2xl bg-credit-card flex flex-col'>
            <div class='w-full h-8 bg-black mt-3.5 mb-2.5'></div>
            <div class='mx-8 text-right'>
                <p class='text-[8px] text-[var(--contrast-color)] leading-[8px] tracking-[0.02rem] pr-2'>Código de
                    <br /> segurança:</p>
                <div class='bg-white pr-2 mt-1 h-6 flex items-center justify-end'>
                    <input
                            class='border-none text-base font-black text-right w-full p-0 text-secondary'
                            x-mask="000"
                            type='text'
                            x-model="formPayment.credit_cards[0].cvv.length === 0 ? '000' : formPayment.credit_cards[0].cvv"
                            x-on:cod-sec.window="formPayment.credit_cards[0].cvv = $event.detail"
                            disabled
                    >
                </div>
                <p class='text-[4px] text-[var(--contrast-color)] font-medium text-left mt-4'>O código de segurança do cartão (CVV) é um número de três dígitos impresso na maioria dos cartões de crédito e débito. Quando você insere os dados do seu cartão, como medida de segurança adicional, solicitamos que também forneça o código de segurança do cartão (CVV).</p>
            </div>
        </div>
    </div>
</section>
            </div>
            <div class="flex flex-col gap-2">
                <div
    x-ref="creditCardNumber" x-bind:data-filled="formPayment.credit_cards[0].number !== ''" id="input-card-number-0" index="0" placeholder="0000 0000 0000 0000" x-mask="9999 9999 9999 9999" x-model="formPayment.credit_cards[0].number" x-on:keyup="getFlagCreditCard($el)"
    class="flex flex-col w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]"
>
            <label for="input-card-number-0" class="text-[0.8125rem] font-bold leading-5 text-black/[0.64] dark:text-white/[0.64] flex-1 pt-2">
            Número do cartão
        </label>
        <div class="w-full flex items-center">
                        <input
            x-ref="creditCardNumber" x-bind:data-filled="formPayment.credit_cards[0].number !== ''" id="input-card-number-0" index="0" placeholder="0000 0000 0000 0000" x-mask="9999 9999 9999 9999" x-model="formPayment.credit_cards[0].number" x-on:keyup="getFlagCreditCard($el)"
            type="text"
            class="w-full h-[3.25rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50"
        >
            
        
    </div>
</div>
                <div class="flex items-center gap-2 justify-between">
                    <div class="w-7/12">
                        <div
    x-bind:data-filled="formPayment.credit_cards[0].expiration !== ''" id="credit_card_expiration-0" index="0" name="credit_card_expiration-0" placeholder="10/28" x-mask="99/99" x-model="formPayment.credit_cards[0].expiration" x-on:keyup="$dispatch('card-expiration', [0,formPayment.credit_cards[0].expiration])"
    class="flex flex-col w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]"
>
            <label for="credit_card_expiration-0" class="text-[0.8125rem] font-bold leading-5 text-black/[0.64] dark:text-white/[0.64] flex-1 pt-2">
            Expiração
        </label>
        <div class="w-full flex items-center">
                        <input
            x-bind:data-filled="formPayment.credit_cards[0].expiration !== ''" id="credit_card_expiration-0" index="0" name="credit_card_expiration-0" placeholder="10/28" x-mask="99/99" x-model="formPayment.credit_cards[0].expiration" x-on:keyup="$dispatch('card-expiration', [0,formPayment.credit_cards[0].expiration])"
            type="text"
            class="w-full h-[3.25rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50"
        >
            
        
    </div>
</div>
                    </div>
                    <div class="w-5/12">
                        <div
    x-bind:data-filled="formPayment.credit_cards[0].cvv !== ''" id="cardCvv-0" index="0" placeholder="000" x-mask="9999" x-model="formPayment.credit_cards[0].cvv" x-on:keyup="$dispatch('formPayment.credit_cards[0].cvv', formPayment.credit_cards[0].cvv)" x-on:focus="$dispatch('flip',0)" x-on:blur="$dispatch('flip',0)"
    class="flex flex-col w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]"
>
            <label for="cardCvv-0" class="text-[0.8125rem] font-bold leading-5 text-black/[0.64] dark:text-white/[0.64] flex-1 pt-2">
            CVV
        </label>
        <div class="w-full flex items-center">
                        <input
            x-bind:data-filled="formPayment.credit_cards[0].cvv !== ''" id="cardCvv-0" index="0" placeholder="000" x-mask="9999" x-model="formPayment.credit_cards[0].cvv" x-on:keyup="$dispatch('formPayment.credit_cards[0].cvv', formPayment.credit_cards[0].cvv)" x-on:focus="$dispatch('flip',0)" x-on:blur="$dispatch('flip',0)"
            type="text"
            class="w-full h-[3.25rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50"
        >
            
                        <div
        class="flex items-center gap-4 relative cursor-pointer z-20"
        x-data="{ tooltip: false }"
        x-on:mouseover="tooltip = true"
        x-on:mouseleave="tooltip = false"
>
            <div class="w-6 h-6" stroke="stroke-gray-600 dark:stroke-zinc-400">
    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_139_8790)">
            <path d="M12 3C7.03747 3 3 7.03747 3 12C3 16.9626 7.03747 21 12 21C16.9626 21 21 16.9626 21 12C21 7.03747 16.9625 3 12 3ZM12.5854 17.3399C12.1579 17.4112 11.3071 17.5893 10.875 17.625C10.5093 17.6553 10.1642 17.446 9.95381 17.1455C9.74289 16.845 9.69235 16.4605 9.81757 16.1155L11.5188 11.4375H9.75C9.74848 10.4628 10.4796 9.74605 11.4148 9.47098C11.861 9.33968 12.6925 9.16 13.125 9.18754C13.3841 9.20402 13.8358 9.3666 14.0462 9.66711C14.2571 9.96758 14.3077 10.3521 14.1824 10.6971L12.4812 15.375H14.2495C14.2498 16.3487 13.5459 17.1799 12.5854 17.3399ZM13.125 8.62502C12.5037 8.62502 12 8.12128 12 7.50001C12 6.87867 12.5037 6.375 13.125 6.375C13.7463 6.375 14.25 6.87867 14.25 7.50001C14.25 8.12131 13.7464 8.62502 13.125 8.62502Z" class="fill-gray-600 dark:fill-zinc-400"/>
        </g>
        <defs>
            <clipPath id="clip0_139_8790">
                <rect width="18" height="18" fill="white" transform="translate(3 3)"/>
            </clipPath>
        </defs>
    </svg>
</div>
        <div
            x-cloak x-show="tooltip"
            class="absolute w-[200px] right-10"
    >
        <div
                class="p-4 text-sm rounded-xl font-medium relative flex items-center flex-wrap '<?php echo bg-gray-600 dark:bg-zinc-400 text-white dark:text-zinc-900; ?>'"
        >
            <div
                    class="absolute rounded-sm rotate-45 h-6 w-6 '<?php echo bg-gray-600 dark:bg-zinc-400 text-white dark:text-zinc-900; ?>' -right-1"
            ></div>
            <p class="relative z-50" x-html="'Código de segurança de 3 ou 4 dígitos presente na parte de trás do cartão.'"></p>
        </div>
    </div>
</div>

        
    </div>
</div>
                    </div>
                </div>
                <div
    x-bind:data-filled="formPayment.credit_cards[0].full_name !== ''" id="credit_card_full_name-0" index="0" placeholder="Nome impresso no cartão" x-on:keyup="$dispatch('card-name', [0,formPayment.credit_cards[0].full_name])" x-model="formPayment.credit_cards[0].full_name"
    class="flex flex-col w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]"
>
            <label for="credit_card_full_name-0" class="text-[0.8125rem] font-bold leading-5 text-black/[0.64] dark:text-white/[0.64] flex-1 pt-2">
            Nome impresso no cartão
        </label>
        <div class="w-full flex items-center">
                        <input
            x-bind:data-filled="formPayment.credit_cards[0].full_name !== ''" id="credit_card_full_name-0" index="0" placeholder="Nome impresso no cartão" x-on:keyup="$dispatch('card-name', [0,formPayment.credit_cards[0].full_name])" x-model="formPayment.credit_cards[0].full_name"
            type="text"
            class="w-full h-[3.25rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50"
        >
            
        
    </div>
</div>
                <div
    x-show="formPayment.multi_credit_card == 1" id="input-card-total-0" index="0" x-model="formPayment.credit_cards[0].amount" placeholder="1200,00" @blur="setCardValue($el)" @input="formPayment.credit_cards[0].amount = maskCurrency($event.target.value)"
    class="flex flex-col w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 focus-within:border-[var(--theme-color)] dark:focus-within:border-[var(--theme-color)] transition-colors hover:!border-[var(--theme-color)] data-[filled=true]:border-[var(--theme-color)]"
>
            <label for="input-card-total-0" class="text-[0.8125rem] font-bold leading-5 text-black/[0.64] dark:text-white/[0.64] flex-1 pt-2">
            Valor
        </label>
        <div class="w-full flex items-center">
                            <span  class="text-base text-zinc-900 dark:text-neutral-50 font-bold" x-html="'R$'">  </span>
                <input
            x-show="formPayment.multi_credit_card == 1" id="input-card-total-0" index="0" x-model="formPayment.credit_cards[0].amount" placeholder="1200,00" @blur="setCardValue($el)" @input="formPayment.credit_cards[0].amount = maskCurrency($event.target.value)"
            type="text"
            class="w-full h-[3.25rem] form-input border-none disabled:cursor-not-allowed bg-transparent text-base focus:ring-0 outline-0 font-bold placeholder-slate-400 dark:placeholder-neutral-500 text-zinc-900 dark:text-neutral-50"
        >
            
                        <div
        class="flex items-center gap-4 relative cursor-pointer z-20"
        x-data="{ tooltip: false }"
        x-on:mouseover="tooltip = true"
        x-on:mouseleave="tooltip = false"
>
            <div class="w-6 h-6" stroke="stroke-gray-600 dark:stroke-zinc-400">
    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_139_8790)">
            <path d="M12 3C7.03747 3 3 7.03747 3 12C3 16.9626 7.03747 21 12 21C16.9626 21 21 16.9626 21 12C21 7.03747 16.9625 3 12 3ZM12.5854 17.3399C12.1579 17.4112 11.3071 17.5893 10.875 17.625C10.5093 17.6553 10.1642 17.446 9.95381 17.1455C9.74289 16.845 9.69235 16.4605 9.81757 16.1155L11.5188 11.4375H9.75C9.74848 10.4628 10.4796 9.74605 11.4148 9.47098C11.861 9.33968 12.6925 9.16 13.125 9.18754C13.3841 9.20402 13.8358 9.3666 14.0462 9.66711C14.2571 9.96758 14.3077 10.3521 14.1824 10.6971L12.4812 15.375H14.2495C14.2498 16.3487 13.5459 17.1799 12.5854 17.3399ZM13.125 8.62502C12.5037 8.62502 12 8.12128 12 7.50001C12 6.87867 12.5037 6.375 13.125 6.375C13.7463 6.375 14.25 6.87867 14.25 7.50001C14.25 8.12131 13.7464 8.62502 13.125 8.62502Z" class="fill-gray-600 dark:fill-zinc-400"/>
        </g>
        <defs>
            <clipPath id="clip0_139_8790">
                <rect width="18" height="18" fill="white" transform="translate(3 3)"/>
            </clipPath>
        </defs>
    </svg>
</div>
        <div
            x-cloak x-show="tooltip"
            class="absolute w-[200px] right-10"
    >
        <div
                class="p-4 text-sm rounded-xl font-medium relative flex items-center flex-wrap '<?php echo bg-gray-600 dark:bg-zinc-400 text-white dark:text-zinc-900; ?>'"
        >
            <div
                    class="absolute rounded-sm rotate-45 h-6 w-6 '<?php echo bg-gray-600 dark:bg-zinc-400 text-white dark:text-zinc-900; ?>' -right-1"
            ></div>
            <p class="relative z-50" x-html="'Valor mínimo de  R$ 5,00.'"></p>
        </div>
    </div>
</div>

        
    </div>
</div>
                <div x-show="businessCurrency === 'brl'">
                    <div class="relative">
    <div
        class="relative flex flex-col w-full bg-white dark:bg-neutral-800 rounded-t-lg border-b-4 border-black/[0.16] dark:border-white/[0.16] px-4 hover:border-[var(--theme-color)] dark:hover:border-[var(--theme-color)] transition-colors"
    >
                    <div class="text-[0.8125rem] font-bold leading-5 text-black/[0.64] dark:text-white/[0.64] flex-1 pt-2">
                Parcelamento
            </div>
                <button
            type="button"
            class="w-full flex items-center justify-between py-[0.875rem]"
            @click="installmentsOpen[0] = !installmentsOpen[0]"
            @click.outside="installmentsOpen[0] = false"
        >
            <div class="flex items-center gap-1 text-base font-bold text-zinc-900 dark:text-neutral-50">
                <p x-text="installmentIndex[0] + 'x'"></p>
                <p>de</p>
                <p x-text="installmentsData[0][(installmentIndex[0] - 1)]?.value+'*'"></p>
                <p x-show="installmentIndex[0] <= formPayment.credit_card.interest_free_installments" x-text="'Sem juros'"></p>
            </div>
            <div >
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M14.5 11L12 13.5L9.5 11" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5"
                  stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
    </div>

        </button>
    </div>
    <div x-cloak x-show="installmentsOpen[0]" class="absolute left-0 flex flex-col w-full z-10 bg-white dark:bg-neutral-800 px-1 py-2 rounded-b-lg h-60 overflow-auto">
        <template x-for="(installment, index) in getInstallments(0)" :key="index">
            <label @click="installmentIndex[0] = installment.amount">
                <input class="hidden" type="radio" name="installments" x-model="installments[0]" x-bind:value="installment.amount">
                <div class="flex items-center gap-1 px-4 py-3 cursor-pointer hover:bg-gray-100 dark:hover:bg-zinc-900 rounded label-checked:bg-gray-100 dark:label-checked:bg-zinc-900">
                    <span class="text-base font-medium text-zinc-900 dark:text-neutral-50" x-text="installment.amount + 'x'"></span>
                    <span class="text-base font-medium text-zinc-900 dark:text-neutral-50">de</span>
                    <p class="text-base font-medium text-zinc-900 dark:text-neutral-50" x-text="installment.value"></p>
                    <p class="text-base font-medium text-zinc-900 dark:text-neutral-50" x-show="installment.amount <= formPayment.credit_card.interest_free_installments" x-text="'Sem juros'"></p>
                </div>
            </label>
        </template>
    </div>
    <span
        class="font-medium text-[0.8125rem] text-black/[0.64] dark:text-white/[0.64] leading-4 mx-5"
        x-text="displayTaxOnCreditCard(formPayment.credit_cards[0].gateway_installment_tax)"
    ></span>
</div>
                </div>
            </div>
        </div>

        </div>
    </template>
</div>
            <!-- Card de progresso para frete grátis -->
            <div class="xl:mx-8">
                <!-- Card de progresso para frete grátis -->
<div x-show="process_getting_free_shipping.has_free_shipping && process_getting_free_shipping.free_shipping_progress < 100" class="leading-4 mt-6 rounded-xl border border-orange-100 dark:border-orange-300/10 bg-white dark:bg-neutral-900 p-4 shadow">
    <div class="relative w-full bg-neutral-200 dark:bg-neutral-400 rounded-full h-3 overflow-visible">
    <div class="bg-[var(--theme-color)] h-3 rounded-full transition-all duration-500" :style="{ width: process_getting_free_shipping.free_shipping_progress + '%' }"></div>
    <div class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-1/4 bg-[var(--theme-color)] text-white rounded-full shadow-lg w-7 h-7 flex items-center justify-center z-10">
        <div>
    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M2.5 2C2.22386 2 2 2.22386 2 2.5C2 2.77614 2.22386 3 2.5 3H2.7457C2.96894 3 3.16513 3.14799 3.22646 3.36264L4.81202 8.91208C4.996 9.55603 5.58458 10 6.2543 10H10.823C11.4363 10 11.9879 9.62657 12.2157 9.05709L13.69 5.37139C13.9527 4.71453 13.4689 4 12.7615 4H4.44858L4.18798 3.08792C4.004 2.44397 3.41542 2 2.7457 2H2.5ZM6.5 14C7.32843 14 8 13.3284 8 12.5C8 11.6716 7.32843 11 6.5 11C5.67157 11 5 11.6716 5 12.5C5 13.3284 5.67157 14 6.5 14ZM10.5 14C11.3284 14 12 13.3284 12 12.5C12 11.6716 11.3284 11 10.5 11C9.67157 11 9 11.6716 9 12.5C9 13.3284 9.67157 14 10.5 14Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    </svg>
</div>
    </div>
</div>

    <div class="mt-4 text-center">
        <span class="text-sm text-zinc-800 dark:text-neutral-200">
            <span><strong x-text="'Faltam ' + getCurrencySymbol() + formatCurrencyPrice(process_getting_free_shipping.remaining_free_shipping / 100)"></strong> para você ganhar <strong class="text-[var(--theme-color)]">FRETE GRÁTIS!</strong></span>
        </span>
    </div>
</div>
            </div>
            <!-- Order Bump -->
            <template x-if="orderBumps.length > 0">
    <div class="pt-10 mx-3 md:px-6">
        <div
            class="bg-white dark:bg-neutral-800 rounded-2xl border border-dashed border-[var(--theme-color)] pt-6 relative flex flex-col min-h-[413px] overflow-x-hidden"
            x-bind:class="{ 'px-6': checkoutConfig.order_bump_position_enum === 1, 'px-2': checkoutConfig.order_bump_position_enum === 2}"
            id="default-carousel"
            data-carousel="static"
        >
            <div x-bind:class="{ 'px-4': checkoutConfig.order_bump_position_enum === 2}">
                <div>
    <div class="flex justify-center md:justify-between gap-2 py-4 px-3 bg-[var(--theme-color)] rounded-lg">
        <div class="flex items-center justify-center gap-2">
            <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M21.156 14.0517C20.8811 10.4723 19.2146 8.22933 17.7444 6.24998C16.383 4.41754 15.2073 2.83514 15.2073 0.500856C15.2073 0.313356 15.1023 0.141981 14.9358 0.0560595C14.7688 -0.030378 14.5681 -0.0162217 14.4163 0.094122C12.2083 1.67409 10.366 4.33701 9.72243 6.87783C9.27567 8.64675 9.21656 10.6354 9.20826 11.9488C7.1692 11.5132 6.70729 8.46319 6.70242 8.42995C6.67945 8.27175 6.58279 8.13408 6.44217 8.05889C6.30009 7.98468 6.13307 7.97929 5.98903 8.05059C5.8821 8.10234 3.36449 9.38156 3.21801 14.4891C3.20774 14.659 3.20728 14.8295 3.20728 14.9999C3.20728 19.9619 7.24485 23.9992 12.2073 23.9992C12.2141 23.9997 12.2214 24.0007 12.2273 23.9992C12.2293 23.9992 12.2312 23.9992 12.2336 23.9992C17.1839 23.985 21.2073 19.9531 21.2073 14.9999C21.2073 14.7503 21.156 14.0517 21.156 14.0517ZM12.2073 22.9993C10.553 22.9993 9.20728 21.5658 9.20728 19.8037C9.20728 19.7437 9.20681 19.6831 9.21117 19.6089C9.23118 18.8658 9.37232 18.3585 9.5271 18.0211C9.81717 18.6442 10.3357 19.2169 11.178 19.2169C11.4544 19.2169 11.678 18.9932 11.678 18.7169C11.678 18.0051 11.6927 17.1838 11.8699 16.4426C12.0276 15.7854 12.4046 15.0862 12.8821 14.5258C13.0945 15.2533 13.5086 15.8421 13.9129 16.4167C14.4915 17.2389 15.0897 18.089 15.1947 19.5386C15.201 19.6245 15.2074 19.711 15.2074 19.8037C15.2073 21.5658 13.8616 22.9993 12.2073 22.9993Z" class="fill-[var(--contrast-color)]" />
</svg>
            <p class="text-[var(--contrast-color)] text-xl leading-6 font-black">0 oferta exclusiva</p>
        </div>
        <template x-if="checkoutConfig.order_bump_position_enum === 2">
            <div class="items-center hidden md:flex">
                <button type="button"
                        class="flex items-center justify-center h-full cursor-pointer group focus:outline-none"
                        data-carousel-prev>
                    <span
                        class="inline-flex items-center justify-center w-10 h-10">
                        <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M14.7073 17L12.2073 14.5L9.70728 12L14.7073 7" stroke="white" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round"/>
    <path d="M14.7354 7L9.73535 12L12.2354 14.5" stroke="white" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round"/>
</svg>
                        <span class="sr-only">Anterior</span>
                    </span>
                </button>
                <button type="button"
                        class="flex items-center justify-center h-full cursor-pointer group focus:outline-none"
                        data-carousel-next>
                    <span
                        class="inline-flex items-center justify-center w-10 h-10">
                        <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M9.70728 17L12.2073 14.5L14.7073 12L9.70728 7" stroke="white" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round"/>
    <path d="M9.73535 7.00024L14.7354 12.0002L12.2354 14.5002" stroke="white" stroke-width="1.5" stroke-linecap="round"
          stroke-linejoin="round"/>
</svg>
                        <span class="sr-only">Próximo</span>
                    </span>
                </button>
            </div>
        </template>
    </div>
</div>            </div>
            <div class="my-6">
                <p class="text-zinc-900 dark:text-neutral-50 text-lg leading-6 px-4 text-center" x-html="checkoutConfig.order_bump_text"></p>
            </div>
            <template x-if="checkoutConfig.order_bump_position_enum === 2">
                <div class="relative rounded-lg min-h-[338px] md:min-h-[338px] z-10">
                    <!-- MOBILE: scroll lateral -->
                    <div class="md:hidden">
                        <div class="flex gap-4 overflow-x-auto snap-x snap-mandatory scroll-smooth no-scrollbar px-2">
                            <template x-for="(order_bump, index_of_order_bump) in orderBumps" :key="index_of_order_bump" >
                                <div class="snap-center shrink-0 w-[calc(100%_-_0px)]">
                                    <div
    x-data="{
        selectedVariant() {
            return order_bump.product.primaryVariants?.find(variant => variant.selected_flag);
        },
        selectedCode() {
            return this.selectedVariant()?.code || order_bump.product.product_code;
        }
    }"
    class="rounded-2xl border-[var(--theme-color)] px-2 py-2 bg-gray-100 dark:bg-zinc-900"
    x-bind:class="{
        'border-4': hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code),
        'border': !hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code),
        'mr-4': checkoutConfig.order_bump_position_enum === 2
    }"
>
    <div class="bg-white dark:bg-neutral-800 rounded-xl p-4 shadow-md">
        <div
            class="flex flex-col md:flex-row"
            x-bind:class="{
                'md:gap-4 items-start': order_bump.product.image_url,
            }"
        >
            <div class="flex items-center gap-2">
                <template x-if="order_bump.product.image_url">
                    <div class="w-10 h-10">
                        <img x-bind:src="order_bump.product.image_url" x-bind:alt="order_bump.product.title"
                            class="rounded overflow-hidden">
                    </div>
                </template>
                <p class="text-zinc-900 dark:text-neutral-50 text-lg block md:hidden leading-6 font-bold" x-text="order_bump.product.title"></p>
            </div>
            <div class="w-full space-y-3">
                <p class="text-zinc-900 dark:text-neutral-50 text-lg hidden md:block leading-6 font-bold" x-text="order_bump.product.title"></p>

                <!-- Variantes Primárias -->
                <template x-if="order_bump.product.primaryVariants && order_bump.product.primaryVariants.length > 0">
                    <div class="flex gap-2 flex-wrap mt-2">
                        <template x-for="variant in order_bump.product.primaryVariants" :key="variant.code">
                            <!-- Botão de Variante -->
                            <button
                                :class="{
                                    'w-20 h-20 p-2 -ml-2.5': variant.image_url,
                                    'w-auto h-auto px-4 py-2 -ml-4.5': !variant.image_url,
                                    'flex items-center justify-center rounded-lg': true
                                }"
                                @click="hasSelectedOffer(order_bump.product.product_code, variant.code)
                                    ? removePickUpOffer(order_bump.product.product_code, variant.code)
                                    : pickUpOffer(order_bump.product, order_bump.order_bump_code)"
                            >
                                <!-- Exibe a imagem, se disponível -->
                                <template x-if="variant.image_url">
                                    <img x-bind:src="variant.image_url" x-bind:alt="variant.title" class="w-full h-full object-contain rounded-lg border-2"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(order_bump.product.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(order_bump.product.product_code, variant.code)
                                        }">
                                </template>

                                <!-- Exibe o texto, se não houver imagem -->
                                <template x-if="!variant.image_url">
                                    <span class="text-sm font-semibold text-center whitespace-nowrap overflow-hidden text-ellipsis border-2 flex items-center justify-center w-auto h-auto rounded-lg py-2 px-2.5"
                                        x-text="variant.tag"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(order_bump.product.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(order_bump.product.product_code, variant.code)
                                        }">
                                    </span>
                                </template>
                            </button>
                        </template>
                    </div>
                </template>

                <!-- Opções de tamanho, preço e botões -->
                <div class="flex xl:flex-col xl:!justify-start xl:!items-start gap-2 items-center justify-between">
                    <span class="flex items-center gap-2" x-show="order_bump.product.discount_value > 0">
                        <div class="text-xs leading-5 px-1.5 py-0.5 m-0 font-black text-[var(--contrast-color)] bg-[var(--theme-color)] uppercase rounded">De</div>
                        <div class="flex items-center text-base font-bold">
                        <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50 line-through" x-text="order_bump.product.primaryVariants && order_bump.product.primaryVariants.length > 0
                                    ? formatCurrencyPrice((order_bump.product.primaryVariants.find(v => v.selected_flag)?.amount ?? order_bump.product.amount) / 100)
                                    : formatCurrencyPrice((order_bump.product.amount ?? 0) / 100)"></p>
                        </div>
                    </span>

                    <span class="flex items-center gap-2">
                        <div class="text-xs leading-5 px-1.5 py-0.5 m-0 font-black text-[var(--contrast-color)] bg-[var(--theme-color)] uppercase rounded">Por</div>
                        <div class="flex items-center text-xl font-black">
                            <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50" x-text="(() => {
                                        const selectedVariant = order_bump.product.primaryVariants?.find(v => v.selected_flag);
                                        const discountValue = (order_bump.product.discount_value ?? 0) / 100;
                                        const discountTypeEnum = order_bump.product.discount_type_enum;

                                        // Primeiro verifica se existe uma variante selecionada e se ela tem o preço (amount).
                                        if (selectedVariant && selectedVariant.amount) {
                                            return formatCurrencyPrice(applyDiscountAmount(discountValue, selectedVariant.amount / 100, discountTypeEnum));
                                        }

                                        // Caso não exista um preço específico na variante, utiliza o preço do produto principal.
                                        const productAmount = (order_bump.product.amount ?? 0) / 100;
                                        return formatCurrencyPrice(applyDiscountAmount(discountValue, productAmount, discountTypeEnum));
                                    })()"></p>
                        </div>
                    </span>
                </div>
            </div>
        </div>
        <div class="flex justify-end pt-2 mt-3 overflow-x-hidden w-full">
            <button
                :disabled="order_bump.product.primaryVariants.length > 0 && !selectedVariant()"
                class="px-14 flex items-center gap-2 border-[var(--theme-color)] rounded-[var(--border-radius)] text-zinc-900 uppercase dark:text-neutral-50 text-sm leading-4 font-bold pl-3 pr-4 !py-2 border-2 disabled:opacity-50"
                x-bind:class="{
                    'bg-[var(--theme-color)] !text-[var(--contrast-color)]': hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)
                }"
                @click="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)
                    ? removePickUpOffer(order_bump.product.product_code, selectedVariant()?.code)
                    : pickUpOffer(order_bump.product, order_bump.order_bump_code)"
            >
                <div
                    class="flex items-center justify-center w-4.5 h-4.5 border-2 border-[var(--theme-color)] bg-white rounded-[3px]">
                    <svg class="stroke-[var(--theme-color)] stroke-[3]" x-show="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)" width="13" height="10" viewBox="0 0 13 10" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1.70728 4.73333L5.34364 9L11.7073 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </svg>


                </div>
                <p x-text="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code) ? `Oferta adicionada` : `Pegar oferta`"></p>
            </button>
        </div>
    </div>
    <div
        class="px-4 mt-4"
        x-bind:class="{
            'min-h-[94px]': checkoutConfig.order_bump_position_enum === 2,
            'mb-3': order_bump.description?.length < 100
        }"
        x-show="order_bump.description?.length > 0"
    >
        <p class="text-zinc-900 dark:text-neutral-50 text-lg leading-6" x-html="orderBumps[index_of_order_bump].description" x-collapse.min.50px="x-collapse.min.50px" x-show="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded"></p>
        <button
            class="my-3 text-sm font-bold text-zinc-900 dark:text-neutral-50"
            @click="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded = ! orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded"
            x-show="order_bump.description?.length > 58"
        >
            <span
                class="text-zinc-900 dark:text-neutral-50"
                x-text="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded ? 'Ver menos' : 'Ver mais'"></span>
        </button>
    </div>
</div>
                                </div>
                            </template>
                        </div>
                    </div>
                    <!-- DESKTOP: carousel -->
                    <div class="hidden md:block">
                        <template x-for="(order_bump, index_of_order_bump) in orderBumps">
                            <div class="hidden duration-700 ease-in-out h-full md:w-[104%]" data-carousel-item>
                                <div
    x-data="{
        selectedVariant() {
            return order_bump.product.primaryVariants?.find(variant => variant.selected_flag);
        },
        selectedCode() {
            return this.selectedVariant()?.code || order_bump.product.product_code;
        }
    }"
    class="rounded-2xl border-[var(--theme-color)] px-2 py-2 bg-gray-100 dark:bg-zinc-900"
    x-bind:class="{
        'border-4': hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code),
        'border': !hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code),
        'mr-4': checkoutConfig.order_bump_position_enum === 2
    }"
>
    <div class="bg-white dark:bg-neutral-800 rounded-xl p-4 shadow-md">
        <div
            class="flex flex-col md:flex-row"
            x-bind:class="{
                'md:gap-4 items-start': order_bump.product.image_url,
            }"
        >
            <div class="flex items-center gap-2">
                <template x-if="order_bump.product.image_url">
                    <div class="w-10 h-10">
                        <img x-bind:src="order_bump.product.image_url" x-bind:alt="order_bump.product.title"
                            class="rounded overflow-hidden">
                    </div>
                </template>
                <p class="text-zinc-900 dark:text-neutral-50 text-lg block md:hidden leading-6 font-bold" x-text="order_bump.product.title"></p>
            </div>
            <div class="w-full space-y-3">
                <p class="text-zinc-900 dark:text-neutral-50 text-lg hidden md:block leading-6 font-bold" x-text="order_bump.product.title"></p>

                <!-- Variantes Primárias -->
                <template x-if="order_bump.product.primaryVariants && order_bump.product.primaryVariants.length > 0">
                    <div class="flex gap-2 flex-wrap mt-2">
                        <template x-for="variant in order_bump.product.primaryVariants" :key="variant.code">
                            <!-- Botão de Variante -->
                            <button
                                :class="{
                                    'w-20 h-20 p-2 -ml-2.5': variant.image_url,
                                    'w-auto h-auto px-4 py-2 -ml-4.5': !variant.image_url,
                                    'flex items-center justify-center rounded-lg': true
                                }"
                                @click="hasSelectedOffer(order_bump.product.product_code, variant.code)
                                    ? removePickUpOffer(order_bump.product.product_code, variant.code)
                                    : pickUpOffer(order_bump.product, order_bump.order_bump_code)"
                            >
                                <!-- Exibe a imagem, se disponível -->
                                <template x-if="variant.image_url">
                                    <img x-bind:src="variant.image_url" x-bind:alt="variant.title" class="w-full h-full object-contain rounded-lg border-2"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(order_bump.product.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(order_bump.product.product_code, variant.code)
                                        }">
                                </template>

                                <!-- Exibe o texto, se não houver imagem -->
                                <template x-if="!variant.image_url">
                                    <span class="text-sm font-semibold text-center whitespace-nowrap overflow-hidden text-ellipsis border-2 flex items-center justify-center w-auto h-auto rounded-lg py-2 px-2.5"
                                        x-text="variant.tag"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(order_bump.product.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(order_bump.product.product_code, variant.code)
                                        }">
                                    </span>
                                </template>
                            </button>
                        </template>
                    </div>
                </template>

                <!-- Opções de tamanho, preço e botões -->
                <div class="flex xl:flex-col xl:!justify-start xl:!items-start gap-2 items-center justify-between">
                    <span class="flex items-center gap-2" x-show="order_bump.product.discount_value > 0">
                        <div class="text-xs leading-5 px-1.5 py-0.5 m-0 font-black text-[var(--contrast-color)] bg-[var(--theme-color)] uppercase rounded">De</div>
                        <div class="flex items-center text-base font-bold">
                        <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50 line-through" x-text="order_bump.product.primaryVariants && order_bump.product.primaryVariants.length > 0
                                    ? formatCurrencyPrice((order_bump.product.primaryVariants.find(v => v.selected_flag)?.amount ?? order_bump.product.amount) / 100)
                                    : formatCurrencyPrice((order_bump.product.amount ?? 0) / 100)"></p>
                        </div>
                    </span>

                    <span class="flex items-center gap-2">
                        <div class="text-xs leading-5 px-1.5 py-0.5 m-0 font-black text-[var(--contrast-color)] bg-[var(--theme-color)] uppercase rounded">Por</div>
                        <div class="flex items-center text-xl font-black">
                            <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50" x-text="(() => {
                                        const selectedVariant = order_bump.product.primaryVariants?.find(v => v.selected_flag);
                                        const discountValue = (order_bump.product.discount_value ?? 0) / 100;
                                        const discountTypeEnum = order_bump.product.discount_type_enum;

                                        // Primeiro verifica se existe uma variante selecionada e se ela tem o preço (amount).
                                        if (selectedVariant && selectedVariant.amount) {
                                            return formatCurrencyPrice(applyDiscountAmount(discountValue, selectedVariant.amount / 100, discountTypeEnum));
                                        }

                                        // Caso não exista um preço específico na variante, utiliza o preço do produto principal.
                                        const productAmount = (order_bump.product.amount ?? 0) / 100;
                                        return formatCurrencyPrice(applyDiscountAmount(discountValue, productAmount, discountTypeEnum));
                                    })()"></p>
                        </div>
                    </span>
                </div>
            </div>
        </div>
        <div class="flex justify-end pt-2 mt-3 overflow-x-hidden w-full">
            <button
                :disabled="order_bump.product.primaryVariants.length > 0 && !selectedVariant()"
                class="px-14 flex items-center gap-2 border-[var(--theme-color)] rounded-[var(--border-radius)] text-zinc-900 uppercase dark:text-neutral-50 text-sm leading-4 font-bold pl-3 pr-4 !py-2 border-2 disabled:opacity-50"
                x-bind:class="{
                    'bg-[var(--theme-color)] !text-[var(--contrast-color)]': hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)
                }"
                @click="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)
                    ? removePickUpOffer(order_bump.product.product_code, selectedVariant()?.code)
                    : pickUpOffer(order_bump.product, order_bump.order_bump_code)"
            >
                <div
                    class="flex items-center justify-center w-4.5 h-4.5 border-2 border-[var(--theme-color)] bg-white rounded-[3px]">
                    <svg class="stroke-[var(--theme-color)] stroke-[3]" x-show="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)" width="13" height="10" viewBox="0 0 13 10" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1.70728 4.73333L5.34364 9L11.7073 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </svg>


                </div>
                <p x-text="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code) ? `Oferta adicionada` : `Pegar oferta`"></p>
            </button>
        </div>
    </div>
    <div
        class="px-4 mt-4"
        x-bind:class="{
            'min-h-[94px]': checkoutConfig.order_bump_position_enum === 2,
            'mb-3': order_bump.description?.length < 100
        }"
        x-show="order_bump.description?.length > 0"
    >
        <p class="text-zinc-900 dark:text-neutral-50 text-lg leading-6" x-html="orderBumps[index_of_order_bump].description" x-collapse.min.50px="x-collapse.min.50px" x-show="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded"></p>
        <button
            class="my-3 text-sm font-bold text-zinc-900 dark:text-neutral-50"
            @click="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded = ! orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded"
            x-show="order_bump.description?.length > 58"
        >
            <span
                class="text-zinc-900 dark:text-neutral-50"
                x-text="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded ? 'Ver menos' : 'Ver mais'"></span>
        </button>
    </div>
</div>
                            </div>
                        </template>
                    </div>
                </div>
            </template>
            <template x-if="checkoutConfig.order_bump_position_enum === 1">
                <div x-bind:class="{ 'space-y-6': checkoutConfig.order_bump_position_enum === 1 }">
                    <template x-for="(order_bump, index_of_order_bump) in orderBumps">
                        <div
    x-data="{
        selectedVariant() {
            return order_bump.product.primaryVariants?.find(variant => variant.selected_flag);
        },
        selectedCode() {
            return this.selectedVariant()?.code || order_bump.product.product_code;
        }
    }"
    class="rounded-2xl border-[var(--theme-color)] px-2 py-2 bg-gray-100 dark:bg-zinc-900"
    x-bind:class="{
        'border-4': hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code),
        'border': !hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code),
        'mr-4': checkoutConfig.order_bump_position_enum === 2
    }"
>
    <div class="bg-white dark:bg-neutral-800 rounded-xl p-4 shadow-md">
        <div
            class="flex flex-col md:flex-row"
            x-bind:class="{
                'md:gap-4 items-start': order_bump.product.image_url,
            }"
        >
            <div class="flex items-center gap-2">
                <template x-if="order_bump.product.image_url">
                    <div class="w-10 h-10">
                        <img x-bind:src="order_bump.product.image_url" x-bind:alt="order_bump.product.title"
                            class="rounded overflow-hidden">
                    </div>
                </template>
                <p class="text-zinc-900 dark:text-neutral-50 text-lg block md:hidden leading-6 font-bold" x-text="order_bump.product.title"></p>
            </div>
            <div class="w-full space-y-3">
                <p class="text-zinc-900 dark:text-neutral-50 text-lg hidden md:block leading-6 font-bold" x-text="order_bump.product.title"></p>

                <!-- Variantes Primárias -->
                <template x-if="order_bump.product.primaryVariants && order_bump.product.primaryVariants.length > 0">
                    <div class="flex gap-2 flex-wrap mt-2">
                        <template x-for="variant in order_bump.product.primaryVariants" :key="variant.code">
                            <!-- Botão de Variante -->
                            <button
                                :class="{
                                    'w-20 h-20 p-2 -ml-2.5': variant.image_url,
                                    'w-auto h-auto px-4 py-2 -ml-4.5': !variant.image_url,
                                    'flex items-center justify-center rounded-lg': true
                                }"
                                @click="hasSelectedOffer(order_bump.product.product_code, variant.code)
                                    ? removePickUpOffer(order_bump.product.product_code, variant.code)
                                    : pickUpOffer(order_bump.product, order_bump.order_bump_code)"
                            >
                                <!-- Exibe a imagem, se disponível -->
                                <template x-if="variant.image_url">
                                    <img x-bind:src="variant.image_url" x-bind:alt="variant.title" class="w-full h-full object-contain rounded-lg border-2"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(order_bump.product.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(order_bump.product.product_code, variant.code)
                                        }">
                                </template>

                                <!-- Exibe o texto, se não houver imagem -->
                                <template x-if="!variant.image_url">
                                    <span class="text-sm font-semibold text-center whitespace-nowrap overflow-hidden text-ellipsis border-2 flex items-center justify-center w-auto h-auto rounded-lg py-2 px-2.5"
                                        x-text="variant.tag"
                                        x-bind:class="{
                                            'border-[var(--theme-color)]': hasSelectedOffer(order_bump.product.product_code, variant.code),
                                            'border-gray-300': !hasSelectedOffer(order_bump.product.product_code, variant.code)
                                        }">
                                    </span>
                                </template>
                            </button>
                        </template>
                    </div>
                </template>

                <!-- Opções de tamanho, preço e botões -->
                <div class="flex xl:flex-col xl:!justify-start xl:!items-start gap-2 items-center justify-between">
                    <span class="flex items-center gap-2" x-show="order_bump.product.discount_value > 0">
                        <div class="text-xs leading-5 px-1.5 py-0.5 m-0 font-black text-[var(--contrast-color)] bg-[var(--theme-color)] uppercase rounded">De</div>
                        <div class="flex items-center text-base font-bold">
                        <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50 line-through" x-text="order_bump.product.primaryVariants && order_bump.product.primaryVariants.length > 0
                                    ? formatCurrencyPrice((order_bump.product.primaryVariants.find(v => v.selected_flag)?.amount ?? order_bump.product.amount) / 100)
                                    : formatCurrencyPrice((order_bump.product.amount ?? 0) / 100)"></p>
                        </div>
                    </span>

                    <span class="flex items-center gap-2">
                        <div class="text-xs leading-5 px-1.5 py-0.5 m-0 font-black text-[var(--contrast-color)] bg-[var(--theme-color)] uppercase rounded">Por</div>
                        <div class="flex items-center text-xl font-black">
                            <p class="text-[var(--theme-color)]" x-html="getCurrencySymbol()"></p>
                            <p class="text-zinc-900 dark:text-neutral-50" x-text="(() => {
                                        const selectedVariant = order_bump.product.primaryVariants?.find(v => v.selected_flag);
                                        const discountValue = (order_bump.product.discount_value ?? 0) / 100;
                                        const discountTypeEnum = order_bump.product.discount_type_enum;

                                        // Primeiro verifica se existe uma variante selecionada e se ela tem o preço (amount).
                                        if (selectedVariant && selectedVariant.amount) {
                                            return formatCurrencyPrice(applyDiscountAmount(discountValue, selectedVariant.amount / 100, discountTypeEnum));
                                        }

                                        // Caso não exista um preço específico na variante, utiliza o preço do produto principal.
                                        const productAmount = (order_bump.product.amount ?? 0) / 100;
                                        return formatCurrencyPrice(applyDiscountAmount(discountValue, productAmount, discountTypeEnum));
                                    })()"></p>
                        </div>
                    </span>
                </div>
            </div>
        </div>
        <div class="flex justify-end pt-2 mt-3 overflow-x-hidden w-full">
            <button
                :disabled="order_bump.product.primaryVariants.length > 0 && !selectedVariant()"
                class="px-14 flex items-center gap-2 border-[var(--theme-color)] rounded-[var(--border-radius)] text-zinc-900 uppercase dark:text-neutral-50 text-sm leading-4 font-bold pl-3 pr-4 !py-2 border-2 disabled:opacity-50"
                x-bind:class="{
                    'bg-[var(--theme-color)] !text-[var(--contrast-color)]': hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)
                }"
                @click="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)
                    ? removePickUpOffer(order_bump.product.product_code, selectedVariant()?.code)
                    : pickUpOffer(order_bump.product, order_bump.order_bump_code)"
            >
                <div
                    class="flex items-center justify-center w-4.5 h-4.5 border-2 border-[var(--theme-color)] bg-white rounded-[3px]">
                    <svg class="stroke-[var(--theme-color)] stroke-[3]" x-show="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code)" width="13" height="10" viewBox="0 0 13 10" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M1.70728 4.73333L5.34364 9L11.7073 1" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
    </svg>


                </div>
                <p x-text="hasSelectedOffer(order_bump.product.product_code, selectedVariant()?.code) ? `Oferta adicionada` : `Pegar oferta`"></p>
            </button>
        </div>
    </div>
    <div
        class="px-4 mt-4"
        x-bind:class="{
            'min-h-[94px]': checkoutConfig.order_bump_position_enum === 2,
            'mb-3': order_bump.description?.length < 100
        }"
        x-show="order_bump.description?.length > 0"
    >
        <p class="text-zinc-900 dark:text-neutral-50 text-lg leading-6" x-html="orderBumps[index_of_order_bump].description" x-collapse.min.50px="x-collapse.min.50px" x-show="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded"></p>
        <button
            class="my-3 text-sm font-bold text-zinc-900 dark:text-neutral-50"
            @click="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded = ! orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded"
            x-show="order_bump.description?.length > 58"
        >
            <span
                class="text-zinc-900 dark:text-neutral-50"
                x-text="orderBumps[index_of_order_bump].product.orderBumpDescriptionExpanded ? 'Ver menos' : 'Ver mais'"></span>
        </button>
    </div>
</div>
                    </template>
                </div>
            </template>
            <template x-if="checkoutConfig.order_bump_position_enum === 2">
                <div
                    class="flex flex-col md:flex-row items-center justify-between"
                    x-bind:class="{
                        'px-6': checkoutConfig.order_bump_position_enum === 1,
                        'px-4': checkoutConfig.order_bump_position_enum === 2 }
                    "
                >
                    <p class="text-zinc-900 dark:text-neutral-50 text-lg mb-4 md:mb-0 md:py-6 leading-6">Somente<b>para este pedido</b></p>
                    <div class="flex gap-2 order-first md:order-none py-4 rtl:space-x-reverse">
                        <template x-for="(order_bump, index_of_order_bump) in orderBumps" :key="index_of_order_bump">
                            <button
                                type="button"
                                class="w-3 h-3 rounded-full aria-[current=true]:bg-[var(--theme-color)] aria-[current=false]:bg-black/[0.16] hover:aria-[current=false]:bg-black/[0.25]"
                                x-bind:aria-label="`Slide ${index_of_order_bump + 1}`"
                                x-bind:data-carousel-slide-to="index_of_order_bump"
                                @click="scrollToMobileSlide(index_of_order_bump)"
                            ></button>
                        </template>
                    </div>
                </div>
            </template>
            <template x-if="checkoutConfig.order_bump_position_enum === 1">
                <p class="text-zinc-900 dark:text-neutral-50 text-lg md:mb-0 py-6 leading-6 text-center">Somente
                    <b>para este pedido</b></p>
            </template>
        </div>
    </div>
</template>
            <div class="flex justify-between items-center py-8">
                <button class="pl-3 pr-4 flex items-center gap-2 text-zinc-900 dark:text-neutral-50 text-sm leading-4 font-bold" @click="stepCurrent = 1" x-cloak="x-cloak">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M17.5 12L7 12" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
    <path d="M11.0884 16L6.50014 12L11.0884 8" class="stroke-zinc-900 dark:stroke-neutral-50" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
</svg>
                    Voltar
</button>
                <button
    class="py-4 px-14 h-14 flex items-center gap-2 bg-[var(--theme-color)] rounded-[var(--border-radius)] text-[var(--contrast-color)] text-xl leading-6 font-black disabled:cursor-not-allowed hover:scale-105 transition-transform !gap-4" @click="sendPayment()" x-bind:disabled="loading_payment_button"
>
    <p x-show="formPayment.payment_method === 2" x-text="'Pagar'"></p>
                    <p x-show="formPayment.payment_method === 3">Gerar Pix</p>
                    <p x-show="formPayment.payment_method === 1">Gerar boleto</p>
                    <svg x-show="loading_payment_button" class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
    <path class="fill-[var(--theme-color)]" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
</svg>
</button>
            </div>
            <template x-if="formPayment.payment_method === 3">
                <div class="my-8 px-6">
    <div class="flex flex-col gap-2">
        <ul class="space-y-1">
            <li class="flex items-center gap-4 bg-white dark:bg-neutral-800 rounded py-2 px-4 text-base text-zinc-900 dark:text-neutral-50 leading-5">
                <div>
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="10" height="6" rx="3" class="stroke-[var(--theme-color)]" stroke-width="2" />
</svg>
                </div>
                Pagamento somente à vista
            </li>
            <li class="flex items-center gap-4 bg-white dark:bg-neutral-800 rounded py-2 px-4 text-base text-zinc-900 dark:text-neutral-50 leading-5">
                <div>
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="10" height="6" rx="3" class="stroke-[var(--theme-color)]" stroke-width="2" />
</svg>
                </div>
                A liberação da compra ocorre após a confirmação do pagamento
            </li>
            <li class="flex items-center gap-4 bg-white dark:bg-neutral-800 rounded py-2 px-4 text-base text-zinc-900 dark:text-neutral-50 leading-5">
                <div>
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="10" height="6" rx="3" class="stroke-[var(--theme-color)]" stroke-width="2" />
</svg>
                </div>
                Ao gerar o código atente para a data de expiração
            </li>
        </ul>
    </div>
</div>')
            </template>
            <template x-if="formPayment.payment_method === 1">
                <div class="my-8 px-6">
    <div class="flex flex-col gap-2">
        <ul class="space-y-1">
            <li class="flex items-center gap-4 bg-white dark:bg-neutral-800 rounded py-2 px-4 text-base text-zinc-900 dark:text-neutral-50 leading-5">
                <div>
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="10" height="6" rx="3" class="stroke-[var(--theme-color)]" stroke-width="2" />
</svg>
                </div>
                Pagamento somente à vista
            </li>
            <li class="flex items-center gap-4 bg-white dark:bg-neutral-800 rounded py-2 px-4 text-base text-zinc-900 dark:text-neutral-50 leading-5">
                <div>
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="10" height="6" rx="3" class="stroke-[var(--theme-color)]" stroke-width="2" />
</svg>
                </div>
                <p>A liberação da compra ocorre após a confirmação do pagamento, que pode levar até  <b>3 dias úteis</b></p>
            </li>
            <li class="flex items-center gap-4 bg-white dark:bg-neutral-800 rounded py-2 px-4 text-base text-zinc-900 dark:text-neutral-50 leading-5">
                <div>
                    <svg width="12" height="8" viewBox="0 0 12 8" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect x="1" y="1" width="10" height="6" rx="3" class="stroke-[var(--theme-color)]" stroke-width="2" />
</svg>
                </div>
                Pagável em qualquer banco ou casa lotérica até o vencimento
            </li>
        </ul>
    </div>
</div>
    ')
            </template>
        </div>
    </div>
</template>

    <div class="xl:hidden">
                    </div>
    <template x-if="checkoutConfig.display_address_flag || checkoutConfig.display_identification_number || checkoutConfig.display_number || checkoutConfig.display_email || checkoutConfig.display_whatsapp || checkoutConfig.display_other_information_flag">
    <div class="flex flex-col gap-2 mx-3 mt-10 mb-10 ">
        <footer class="flex flex-col items-center text-center">
                        
                        <div class="flex items-center gap-6">
                                            </div>
                    </footer>
    </div>
</template>

</aside>
        </div>
    </div>
    <!-- Timer bottom -->
    <template x-if="checkoutConfig.timer_position_enum === 2 && checkoutConfig.timer_width_enum === 1">
    <div
        class="relative w-full z-30 xl:hidden"
        x-bind:class="{
            'sticky bottom-0': checkoutConfig.timer_position_enum === 2
        }"
    >
            </div>
</template>
    <!-- JavaScript -->
        <div class="relative z-50 transition-all" x-data="" x-on:credit-card-refused.window="showModal = !showModal" x-show="showModal" @click.outside="showModal = false" role="dialog"
     x-transition:enter="ease-out duration-300" x-transition:enter-start="opacity-0"
     x-transition:enter-end="opacity-100" x-transition:leave="ease-in duration-300"
     x-transition:leave-start="opacity-100" x-transition:leave-end="opacity-0"
     x-cloak
>
    <div class='fixed inset-0 bg-black opacity-50 dark:opacity-60 z-[48]'></div>
    <div
        class="mx-auto my-auto fixed z-[49] overflow-hidden bg-white dark:bg-neutral-800 rounded-[var(--border-radius)] border-2 border-[var(--theme-color)] w-[calc(100%-1rem)] lg:w-[37.5rem] top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%]"
        style="box-shadow: 0 0 20px 0 #39393926;"
    >
        <!-- Body -->
        <div class="scrollable-content max-h-full overflow-y-auto z-[99]">
            <div class="flex items-center justify-end w-full pr-6 pt-6">
            <button class="hover:opacity-75 transition-all" @click="$dispatch('credit-card-refused')">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g id="icon-close">
        <path id="Vector" d="M11.9996 10.738L12 10.7376L12.0004 10.7373L12.5005 10.2375L17.4884 5.24606C17.659 5.07567 17.8926 5.0005 18.1161 5.0005C18.3395 5.0005 18.5732 5.07567 18.7438 5.24606C19.0847 5.58774 19.0847 6.161 18.7438 6.50269L13.2556 11.9946L12.7458 11.4852L13.2556 11.9953L18.7438 17.4873C19.0847 17.8289 19.0847 18.4022 18.7438 18.7439C18.4027 19.0847 17.8295 19.0847 17.4884 18.7439L12.0004 13.252L12 13.2523L11.9996 13.2527L11.4995 13.7524L6.51161 18.7439C6.17052 19.0847 5.59733 19.0847 5.25625 18.7439C4.91525 18.4022 4.91525 17.8289 5.25625 17.4873L10.7444 11.9953L11.254 12.5046L10.7444 11.9946L5.25625 6.50269C4.91525 6.161 4.91525 5.58774 5.25625 5.24606L5.25625 5.24606C5.42677 5.07567 5.66044 5.0005 5.88393 5.0005C6.10741 5.0005 6.34108 5.07567 6.5116 5.24606L11.9996 10.738Z" class="fill-zinc-900 dark:fill-neutral-50" stroke="#FFB727" stroke-width="0.001" />
    </g>
</svg>
            </button>
        </div>
        <div class="px-4 sm:px-8 md:px-10 lg:px-12">
            <div class="flex flex-col gap-8 pb-10">
                <div class="flex flex-col lg:items-start items-center gap-3.5">
                    <svg width="80" height="81" viewBox="0 0 80 81" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
        d="M40 80.5C62.0914 80.5 80 62.5914 80 40.5C80 18.4086 62.0914 0.5 40 0.5C17.9086 0.5 0 18.4086 0 40.5C0 62.5914 17.9086 80.5 40 80.5Z"
        class="fill-[var(--theme-color)]"
    />
    <path
        d="M22.4396 35.1536C22.4396 37.5637 20.4863 39.517 18.0763 39.517C15.6662 39.517 13.7139 37.5637 13.7139 35.1536C13.7139 32.7446 15.6672 30.7903 18.0763 30.7903C20.4863 30.7913 22.4396 32.7446 22.4396 35.1536Z"
        class="fill-[var(--contrast-color)]"/>
    <path
        d="M66.2873 35.1536C66.2873 37.5637 64.3339 39.517 61.9239 39.517C59.5139 39.517 57.5605 37.5637 57.5605 35.1536C57.5605 32.7446 59.5139 30.7903 61.9239 30.7903C64.3339 30.7913 66.2873 32.7446 66.2873 35.1536Z"
        class="fill-[var(--contrast-color)]"/>
    <path
        d="M63.8112 42.6811H16.1903C15.9192 42.6811 15.6992 42.4611 15.6992 42.19C15.6992 41.919 15.9192 41.699 16.1903 41.699H63.8112C64.0822 41.699 64.3022 41.919 64.3022 42.19C64.3022 42.462 64.0822 42.6811 63.8112 42.6811Z"
        class="fill-[var(--contrast-color)]"/>
    <path
        d="M56.7875 24.2938C58.3638 24.0404 59.7642 24.1082 61.2167 24.3272C62.6446 24.5609 64.048 24.9518 65.3522 25.5597C66.6456 26.1764 67.8997 26.8884 68.983 27.8106C69.5604 28.227 70.0377 28.7554 70.5592 29.2307C71.0552 29.7315 71.4961 30.2825 71.9636 30.804C72.1443 31.0053 72.1266 31.3146 71.9253 31.4954C71.7318 31.6682 71.4401 31.6604 71.2575 31.4816L71.2142 31.4394C70.736 30.9709 70.2872 30.475 69.7922 30.0321C69.2727 29.6176 68.7983 29.1472 68.2366 28.7966C67.1799 28.0002 65.9847 27.4246 64.7797 26.9366C63.5658 26.4563 62.2813 26.1882 60.9987 26.0586C59.7367 25.9329 58.3628 25.9879 57.2442 26.2413L57.1696 26.258C56.6304 26.3807 56.0932 26.0419 55.9714 25.5027C55.8487 24.9636 56.1875 24.4274 56.7266 24.3046C56.7453 24.3016 56.7679 24.2977 56.7875 24.2938Z"
        class="fill-[var(--contrast-color)]"/>
    <path
        d="M26.9201 14.0381C25.8015 13.7838 24.4276 13.7298 23.1656 13.8555C21.883 13.9851 20.5985 14.2532 19.3846 14.7334C18.1796 15.2215 16.9854 15.797 15.9277 16.5935C15.365 16.9451 14.8916 17.4145 14.3721 17.8289C13.8761 18.2719 13.4273 18.7678 12.95 19.2363L12.9088 19.2775C12.7153 19.4671 12.406 19.4641 12.2164 19.2706C12.0348 19.085 12.0318 18.7914 12.2017 18.6009C12.6692 18.0794 13.1111 17.5284 13.6061 17.0276C14.1266 16.5532 14.6049 16.0239 15.1823 15.6075C16.2655 14.6843 17.5197 13.9723 18.813 13.3566C20.1163 12.7477 21.5197 12.3568 22.9486 12.1241C24.4001 11.9051 25.8015 11.8373 27.3778 12.0907C27.9238 12.1781 28.295 12.6927 28.2076 13.2387C28.1202 13.7847 27.6056 14.156 27.0596 14.0686C27.0389 14.0656 27.0193 14.0617 26.9996 14.0568L26.9201 14.0381Z"
        class="fill-[var(--contrast-color)]"/>
</svg>
                    <span class="text-4xl font-normal text-zinc-900 dark:text-neutral-50">
                        Seu cartão de crédito foi recusado.
                    </span>
                    <span
                        x-show="checkoutConfig.billet_flag || checkoutConfig.pix_flag"
                        class="text-zinc-900 dark:text-neutral-50 text-xl font-normal mt-5">
                        Que tal finalizar sua compra por <span class="font-bold border-b-4 border-[var(--theme-color)]">outro método</span>?
                    </span>
                </div>
            </div>
            <div class="py-5 border-t border-dashed border-black/[0.64] dark:border-white/[0.64]">
                <div class="flex items-center gap-2 py-4">
                    <span class="text-sm font-medium text-zinc-900 dark:text-neutral-50">
                        Total com entrega
                    </span>
                    <div class="flex items-center">
                        <p class="text-xl font-black text-[var(--theme-color)]">R$</p>
                        <p class="text-xl font-black text-zinc-900 dark:text-neutral-50" x-text="cart.totals.totalValueFormatted"></p>
                    </div>
                </div>
                <div class="flex flex-col lg:flex-row gap-5 py-2.5 justify-center">
                    <template x-if="checkoutConfig.pix_flag">
                        <button
                            @click="sendPaymentPix"
                            class="w-full lg:w-1/2 py-3 pr-5 border border-black/[0.16] dark:border-white/[0.16] rounded-[0.625rem]">
                            <p class="text-left pl-3 text-base font-black text-zinc-900 dark:text-neutral-50">Pix</p>
                            <div class="flex items-center pl-2 justify-between">
                                <svg width="42" height="43" viewBox="0 0 42 43" fill="none" xmlns="http://www.w3.org/2000/svg" class="size-14 px-2 flex items-center justify-center">
    <g clip-path="url(#clip0_4152_21883)">
        <path d="M12.3525 0.5V12.8529H-0.000404358V0.5H12.3525ZM2.47018 10.3824H9.88195V2.97059H2.47018V10.3824Z"
              class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M7.41211 5.44116H4.94152V7.91175H7.41211V5.44116Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M12.3525 42.4999H-0.000404358V30.147H12.3525V42.4999ZM9.88195 32.6176H2.47018V40.0293H9.88195V32.6176Z"
              class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M7.41211 35.0881H4.94152V37.5587H7.41211V35.0881Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M42 42.4999H29.6471V30.147H42V42.4999ZM39.5294 32.6176H32.1176V40.0293H39.5294V32.6176Z"
              class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M37.0586 35.0881H34.588V37.5587H37.0586V35.0881Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M27.1768 40.0293H21.0003V42.4999H27.1768V40.0293Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M27.1768 35.0881H23.4709V37.5587H27.1768V35.0881Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M34.5879 25.2058H32.1173V27.6764H34.5879V25.2058Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M37.0588 25.2058H39.5294V20.2646H42V27.6764H37.0588V25.2058Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M2.47082 25.2058H4.94141V27.6764H0.000229359V20.2646H2.47082V25.2058Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M12.3525 25.2058H7.41136V27.6764H12.3525V25.2058Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M21 25.2058H14.8235V27.6764H21V25.2058Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M18.5293 40.0293H14.8234V42.4999H18.5293V40.0293Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M17.2941 35.0881H21V37.5587H14.8235V30.147H17.2941V35.0881Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M27.177 32.6176H21.0005V30.147H24.7064V25.2058H29.6475V27.6764H27.177V32.6176Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M18.5293 5.44116H14.8234V7.91175H18.5293V5.44116Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M12.3525 15.3235H9.88195V17.7941H12.3525V15.3235Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M12.3525 20.2646H9.88195V22.7352H12.3525V20.2646Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M7.41211 22.7353H4.94152V17.7941H0.000344276V15.3235H7.41211V22.7353Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M21 12.8529H17.2941V22.7353H14.8235V10.3823H21V12.8529Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M32.1172 22.7354H20.9995V20.2648H29.6466V17.7942H32.1172V22.7354Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M37.0588 22.7353H34.5882V15.3235H42V17.7941H37.0588V22.7353Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M32.1172 10.3823H29.6466V15.3235H32.1172V10.3823Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M27.1768 15.3235H21.0003V17.7941H27.1768V15.3235Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M24.7062 7.91175H21.0003V5.44116H27.1768V12.8529H24.7062V7.91175Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M21 0.5H14.8235V2.97059H21V0.5Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M39.5294 2.97059H34.5882V0.5H42V7.91177H39.5294V2.97059Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M27.1768 0.5H23.4709V2.97059H27.1768V0.5Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M37.0586 7.91177H29.6468V0.5H32.1174V5.44118H37.0586V7.91177Z" class="fill-zinc-900 dark:fill-neutral-50"/>
        <path d="M42 10.3823H34.5882V12.8529H42V10.3823Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    </g>
    <defs>
        <clipPath id="clip0_4152_21883">
            <rect width="42" height="42" fill="white" transform="matrix(-1 0 0 1 42 0.5)"/>
        </clipPath>
    </defs>
</svg>
                                <svg width="36" height="19" viewBox="0 0 36 19" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
        d="M35.5875 8.50459L35.5863 8.50325L28.2383 1.19075C27.6879 0.642946 26.7975 0.644984 26.2496 1.19553C25.7017 1.74601 25.7038 2.63637 26.2543 3.18425L31.1877 8.09375L1.40625 8.09374C0.629577 8.09374 -1.38864e-06 8.72332 -1.52443e-06 9.49999C-1.66023e-06 10.2767 0.629576 10.9062 1.40625 10.9062L31.1876 10.9062L26.2543 15.8157C25.7039 16.3636 25.7017 17.254 26.2496 17.8045C26.7976 18.3551 27.688 18.357 28.2384 17.8092L35.5864 10.4967L35.5876 10.4954C36.1384 9.94571 36.1366 9.05246 35.5875 8.50459Z"
        class="fill-black/30 dark:fill-white/30" fill-opacity="0.3"/>
</svg>
                            </div>
                            <div class="flex items-center gap-2 justify-end">
                                <div class="flex items-center gap-0.5 border border-[var(--theme-color)] px-1 rounded">
                                    <p class="text-sm font-bold text-zinc-900 dark:text-neutral-50" x-text="checkoutConfig.pix_automatic_discount+'%'"></p>
                                    <svg width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g clip-path="url(#clip0_4173_17951)">
        <path
            d="M6.33181 12.3625C6.33195 12.3624 6.33211 12.3623 6.33225 12.3621L8.76975 9.91278C8.95235 9.72929 8.95167 9.4325 8.76816 9.24985C8.58467 9.06723 8.28788 9.06793 8.10525 9.25142L6.46875 10.8959L6.46875 0.96875C6.46875 0.709859 6.25889 0.5 6 0.5C5.74111 0.5 5.53125 0.709859 5.53125 0.96875L5.53125 10.8959L3.89475 9.25145C3.71213 9.06795 3.41534 9.06725 3.23185 9.24988C3.04831 9.43253 3.04767 9.72934 3.23025 9.91281L5.66775 12.3621C5.66789 12.3623 5.66806 12.3624 5.6682 12.3625C5.85143 12.5461 6.14918 12.5455 6.33181 12.3625Z"
            class="fill-zinc-900 dark:fill-neutral-50"/>
    </g>
    <defs>
        <clipPath id="clip0_4173_17951">
            <rect width="12" height="12" fill="white" transform="translate(12 0.5) rotate(90)"/>
        </clipPath>
    </defs>
</svg>
                                </div>
                                <div class="flex">
                                    <p class="text-base font-medium text-zinc-900 dark:text-neutral-50" x-html="getCurrencySymbol()"></p>
                                    <p class="text-base font-medium text-zinc-900 dark:text-neutral-50" x-text="cart.totals.pixTotalFormatted"></p>
                                </div>
                            </div>
                        </button>
                    </template>
                    <template x-if="checkoutConfig.billet_flag">
                        <button
                            @click="sendPaymentBillet"
                            class="w-full lg:w-1/2 py-3 pr-5 border border-black/[0.16] dark:border-white/[0.16] rounded-[0.625rem]">
                            <p class="text-left pl-3 text-base font-black text-zinc-900 dark:text-neutral-50">Boleto</p>
                            <div class="flex items-center pl-2 justify-between">
                                <svg width="42" height="43" viewBox="0 0 42 43" fill="none" xmlns="http://www.w3.org/2000/svg" class="size-14 px-2 flex items-center justify-center">
    <path d="M4.73372 7.80347H0V35.1965H4.73372V7.80347Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    <path d="M35.6352 7.80347H30.8955V35.1965H35.6352V7.80347Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    <path d="M10.0638 7.80347H7.69922V35.1965H10.0638V7.80347Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    <path d="M24.8237 7.80347H22.4561V35.1965H24.8237V7.80347Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    <path d="M28.9656 7.80347H26.6055V35.1965H28.9656V7.80347Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    <path d="M39.041 7.80347H36.6689V35.1965H39.041V7.80347Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    <path d="M42 7.80347H40.8154V35.1965H42V7.80347Z" class="fill-zinc-900 dark:fill-neutral-50"/>
    <path d="M20.2333 7.80347H13.126V35.1965H20.2333V7.80347Z" class="fill-zinc-900 dark:fill-neutral-50"/>
</svg>
                                <svg width="36" height="19" viewBox="0 0 36 19" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path
        d="M35.5875 8.50459L35.5863 8.50325L28.2383 1.19075C27.6879 0.642946 26.7975 0.644984 26.2496 1.19553C25.7017 1.74601 25.7038 2.63637 26.2543 3.18425L31.1877 8.09375L1.40625 8.09374C0.629577 8.09374 -1.38864e-06 8.72332 -1.52443e-06 9.49999C-1.66023e-06 10.2767 0.629576 10.9062 1.40625 10.9062L31.1876 10.9062L26.2543 15.8157C25.7039 16.3636 25.7017 17.254 26.2496 17.8045C26.7976 18.3551 27.688 18.357 28.2384 17.8092L35.5864 10.4967L35.5876 10.4954C36.1384 9.94571 36.1366 9.05246 35.5875 8.50459Z"
        class="fill-black/30 dark:fill-white/30" fill-opacity="0.3"/>
</svg>
                            </div>
                            <div class="flex items-center gap-2 justify-end">
                                <div
                                    x-show="checkoutConfig.billet_automatic_discount > 0"
                                    class="flex items-center gap-0.5 border border-[var(--theme-color)] px-1 rounded">
                                    <p class="text-sm font-bold text-zinc-900 dark:text-neutral-50" x-text="checkoutConfig.billet_automatic_discount+'%'"></p>
                                    <svg width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g clip-path="url(#clip0_4173_17951)">
        <path
            d="M6.33181 12.3625C6.33195 12.3624 6.33211 12.3623 6.33225 12.3621L8.76975 9.91278C8.95235 9.72929 8.95167 9.4325 8.76816 9.24985C8.58467 9.06723 8.28788 9.06793 8.10525 9.25142L6.46875 10.8959L6.46875 0.96875C6.46875 0.709859 6.25889 0.5 6 0.5C5.74111 0.5 5.53125 0.709859 5.53125 0.96875L5.53125 10.8959L3.89475 9.25145C3.71213 9.06795 3.41534 9.06725 3.23185 9.24988C3.04831 9.43253 3.04767 9.72934 3.23025 9.91281L5.66775 12.3621C5.66789 12.3623 5.66806 12.3624 5.6682 12.3625C5.85143 12.5461 6.14918 12.5455 6.33181 12.3625Z"
            class="fill-zinc-900 dark:fill-neutral-50"/>
    </g>
    <defs>
        <clipPath id="clip0_4173_17951">
            <rect width="12" height="12" fill="white" transform="translate(12 0.5) rotate(90)"/>
        </clipPath>
    </defs>
</svg>
                                </div>
                                <div class="flex">
                                    <p class="text-base font-medium text-zinc-900 dark:text-neutral-50" x-html="getCurrencySymbol()"></p>
                                    <p class="text-base font-medium text-zinc-900 dark:text-neutral-50" x-text="cart.totals.billetTotalFormatted"></p>
                                </div>
                            </div>
                        </button>
                    </template>
                </div>
                <div class="py-5 text-center">
                    <button @click="trySendPaymentOtherCard()">
                        <p class="text-xl text-zinc-900 dark:text-neutral-50 underline">Tentar outro cartão</p>
                    </button>
                </div>
            </div>
        </div>
        </div>
    </div>
</div>
</main>
<teamplate x-data="toast()">
    <div
        class="fixed inset-0 mx-auto mt-auto mb-20 w-96 h-fit flex flex-col justify-center bg-white dark:bg-zinc-900 rounded-lg border border-1 border-b-4 border-secondary dark:border-orange-50 px-4 py-3.5 box-shadow-toast"
        x-show='show' x-cloak
        x-on:show-toast.window="config($event)"
        x-transition:enter.duration.500ms
        x-transition:leave.duration.400ms
    >
        <div class='flex items-center justify-between'>
            <div class='flex items-center'>
                <svg x-cloak="x-cloak" x-show="type === 'error'" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g id="icon-danger">
        <path id="Union" fill-rule="evenodd" clip-rule="evenodd" d="M12.0004 3.85002C7.49927 3.85002 3.85039 7.4989 3.85039 12C3.85039 16.5011 7.49927 20.15 12.0004 20.15C16.5015 20.15 20.1504 16.5011 20.1504 12C20.1504 7.4989 16.5015 3.85002 12.0004 3.85002ZM2.15039 12C2.15039 6.56002 6.56039 2.15002 12.0004 2.15002C17.4404 2.15002 21.8504 6.56002 21.8504 12C21.8504 17.44 17.4404 21.85 12.0004 21.85C6.56039 21.85 2.15039 17.44 2.15039 12ZM12.0004 10.15C12.4698 10.15 12.8504 10.5306 12.8504 11V16C12.8504 16.4695 12.4698 16.85 12.0004 16.85C11.5309 16.85 11.1504 16.4695 11.1504 16V11C11.1504 10.5306 11.5309 10.15 12.0004 10.15ZM12.0004 9.00002C12.5527 9.00002 13.0004 8.55231 13.0004 8.00002C13.0004 7.44774 12.5527 7.00002 12.0004 7.00002C11.4481 7.00002 11.0004 7.44774 11.0004 8.00002C11.0004 8.55231 11.4481 9.00002 12.0004 9.00002Z" fill="#EF4444"/>
    </g>
</svg>
                <svg height="24" width="24" x-cloak="x-cloak" x-show="type === 'billet'" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M6.85727 5.87501C6.85727 4.83947 7.72072 4 8.78584 4H15.2144C16.2795 4 17.143 4.83947 17.143 5.87501V6.49996H18.4286C19.8487 6.49996 21 7.61925 21 8.99997V14.625C21 15.6605 20.1365 16.5 19.0714 16.5H17.2714V17.125C17.2714 18.1605 16.408 19 15.3429 19H8.78584C7.72072 19 6.85727 18.1605 6.85727 17.125V16.5H4.92857C3.86345 16.5 3 15.6605 3 14.625V8.99997C3 7.61925 4.15127 6.49996 5.57143 6.49996H6.85727V5.87501ZM15.8573 6.49996V5.87501C15.8573 5.52983 15.5695 5.25 15.2144 5.25H8.78584C8.4308 5.25 8.14298 5.52983 8.14298 5.87501V6.49996H15.8573ZM5.57143 7.74997C4.86135 7.74997 4.28571 8.30961 4.28571 8.99997V14.625C4.28571 14.9702 4.57353 15.25 4.92857 15.25H6.85727V14.625C6.85727 13.5894 7.72072 12.75 8.78584 12.75H15.3429C16.408 12.75 17.2714 13.5894 17.2714 14.625V15.25H19.0714C19.4265 15.25 19.7143 14.9702 19.7143 14.625V8.99997C19.7143 8.30961 19.1387 7.74997 18.4286 7.74997H5.57143ZM8.78584 14C8.4308 14 8.14298 14.2798 8.14298 14.625V17.125C8.14298 17.4702 8.4308 17.75 8.78584 17.75H15.3429C15.6979 17.75 15.9857 17.4702 15.9857 17.125V14.625C15.9857 14.2798 15.6979 14 15.3429 14H8.78584Z" class="fill-zinc-900 dark:fill-neutral-50" />
    </svg>

                <svg x-cloak="x-cloak" x-show="type === 'pix'" class="group" width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_1918_13812)">
            <mask id="mask0_1918_13812" style="mask-type:luminance" maskUnits="userSpaceOnUse" x="2" y="2" width="21" height="20">
                <path d="M22.5391 2H2.5V22H22.5391V2Z" fill="white" />
            </mask>
            <g mask="url(#mask0_1918_13812)">
                <path d="M7.91257 17.7935C8.47903 17.6276 8.99946 17.3214 9.42834 16.8925L12.3532 13.9677C12.3685 13.9524 12.3933 13.9524 12.4085 13.9677L15.3451 16.9042C15.8191 17.3782 16.4049 17.7024 17.0411 17.8529L14.2171 20.6769C13.275 21.5912 11.7409 21.5911 10.7989 20.6768L7.91257 17.7935ZM10.9332 11.647L10.9489 11.6607C11.0943 11.7879 11.2633 11.9061 11.4501 12.002C11.2562 12.0973 11.0759 12.2243 10.9179 12.3832C10.9175 12.3836 10.9172 12.3839 10.9169 12.3842L7.92592 15.3713C7.61128 15.659 7.26416 15.8 6.90729 15.8H5.92119L3.83376 13.7132L3.83349 13.713C2.89079 12.7717 2.89079 11.2431 3.83349 10.3018L3.83414 10.3012L5.92151 8.21095H6.90729C7.26408 8.21095 7.61116 8.35185 7.92576 8.63952L10.9332 11.647ZM13.8432 12.3787C13.686 12.2215 13.5065 12.0956 13.3137 12.0011C13.4996 11.9053 13.668 11.7874 13.8128 11.6607L13.8285 11.647L16.8546 8.62082C16.855 8.62046 16.8553 8.62015 16.8557 8.6198C17.1229 8.35581 17.4929 8.20312 17.8662 8.20312H19.0823L21.1807 10.3015C22.122 11.2429 22.122 12.772 21.1807 13.7133L19.0823 15.8117H17.8662C17.4928 15.8117 17.1235 15.6589 16.8569 15.3924L13.8432 12.3787Z" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.25245" />
                <path d="M9.42837 7.11072C8.99949 6.68184 8.47906 6.37561 7.9126 6.20974L10.7989 3.32642C11.741 2.41209 13.275 2.41201 14.2171 3.32626L17.0412 6.15033C16.405 6.30078 15.8191 6.62497 15.3451 7.09898L12.4086 10.0356C12.3933 10.0508 12.3685 10.0508 12.3532 10.0356L9.42837 7.11072Z" class="stroke-black/[0.64] dark:stroke-white/[0.64] group-data-[active=true]:stroke-zinc-900 dark:group-data-[active=true]:stroke-neutral-50" stroke-opacity="0.64" stroke-width="1.25245" />
            </g>
        </g>
        <defs>
            <clipPath id="clip0_1918_13812">
                <rect width="20.0391" height="20" class="fill-black/[0.64] dark:fill-white/[0.64] group-data-[active=true]:fill-zinc-900 dark:group-data-[active=true]:fill-neutral-50" transform="translate(2.5 2)" />
            </clipPath>
        </defs>
    </svg>

                <div class="w-6 h-6" x-cloak="x-cloak" x-show="type === 'info'" outline="outline">
    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <g clip-path="url(#clip0_139_8790)">
            <path d="M12 3C7.03747 3 3 7.03747 3 12C3 16.9626 7.03747 21 12 21C16.9626 21 21 16.9626 21 12C21 7.03747 16.9625 3 12 3ZM12.5854 17.3399C12.1579 17.4112 11.3071 17.5893 10.875 17.625C10.5093 17.6553 10.1642 17.446 9.95381 17.1455C9.74289 16.845 9.69235 16.4605 9.81757 16.1155L11.5188 11.4375H9.75C9.74848 10.4628 10.4796 9.74605 11.4148 9.47098C11.861 9.33968 12.6925 9.16 13.125 9.18754C13.3841 9.20402 13.8358 9.3666 14.0462 9.66711C14.2571 9.96758 14.3077 10.3521 14.1824 10.6971L12.4812 15.375H14.2495C14.2498 16.3487 13.5459 17.1799 12.5854 17.3399ZM13.125 8.62502C12.5037 8.62502 12 8.12128 12 7.50001C12 6.87867 12.5037 6.375 13.125 6.375C13.7463 6.375 14.25 6.87867 14.25 7.50001C14.25 8.12131 13.7464 8.62502 13.125 8.62502Z" class="fill-gray-600 dark:fill-zinc-400"/>
        </g>
        <defs>
            <clipPath id="clip0_139_8790">
                <rect width="18" height="18" fill="white" transform="translate(3 3)"/>
            </clipPath>
        </defs>
    </svg>
</div>
                <svg x-cloak="x-cloak" x-show="type === 'success'" outline="outline" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
    <g id="icon-check">
        <path id="Vector" fill-rule="evenodd" clip-rule="evenodd"
              d="M9.02975 3.3437C10.9834 2.88543 13.0166 2.88543 14.9703 3.3437C17.7916 4.00549 19.9945 6.20842 20.6563 9.02975C21.1146 10.9834 21.1146 13.0166 20.6563 14.9703C19.9945 17.7916 17.7916 19.9945 14.9703 20.6563C13.0166 21.1146 10.9834 21.1146 9.02975 20.6563C6.20842 19.9945 4.0055 17.7916 3.3437 14.9703C2.88543 13.0166 2.88543 10.9834 3.3437 9.02974C4.0055 6.20841 6.20842 4.00549 9.02975 3.3437ZM15.0524 10.4773C15.2689 10.2454 15.2563 9.88195 15.0244 9.6655C14.7925 9.44906 14.4291 9.46159 14.2126 9.6935L11.2678 12.8487L9.77358 11.3545C9.54927 11.1302 9.1856 11.1302 8.9613 11.3545C8.73699 11.5788 8.73699 11.9425 8.9613 12.1668L10.8759 14.0814C10.986 14.1915 11.1362 14.2522 11.2919 14.2495C11.4477 14.2468 11.5956 14.181 11.7019 14.0671L15.0524 10.4773Z"
              fill="#34D399"/>
    </g>
</svg>
                <span class='text-base text-secondary dark:text-orange-50 font-medium leading-7 ml-4' x-html='title'></span>
            </div>
            <button class="pl-3 pr-4 flex items-center gap-2 text-zinc-900 dark:text-neutral-50 text-sm leading-4 font-bold" icon="close" size="small" @click="show = false">
    
</button>
        </div>
        <div class='ml-10 mt-2 mr-10' x-show="message !== ''" x-cloak>
            <p class='break-words text-gray-600 dark:text-zinc-400 text-base leading-6 font-normal' x-html='message' />
        </div>
    </div>
</teamplate>

    <script>
        function countdown() {
            return {
                hours: 0, // Defina as horas desejadas
                minutes: 15, // Defina os minutos desejados
                seconds: 0, // Defina os segundos desejados
                message: "",
                show_message: false,
                init() {
                    setInterval(() => {
                        this.updateCountdown();
                    }, 1000);
                },
                updateCountdown() {
                    if (this.hours === 0 && this.minutes === 0 && this.seconds === 0) {
                        // Contador atingiu zero, você pode adicionar ações aqui
                        this.show_message = true;
                        this.message = "Tempo expirado...";
                    } else {
                        if (this.seconds > 0) {
                            this.seconds--;
                        } else {
                            if (this.minutes > 0) {
                                this.minutes--;
                                this.seconds = 59;
                            } else {
                                if (this.hours > 0) {
                                    this.hours--;
                                    this.minutes = 59;
                                    this.seconds = 59;
                                }
                            }
                        }
                    }
                },
                formatNumber(value) {
                    // Adiciona um zero à esquerda se o valor for menor que 10
                    return value < 10 ? "0" + value : value;
                },
            };
        }
    </script>
    <script>
        const checkoutData = () => {
            return {
                showModal: false,
                checkoutConfig: null,
                checkoutTypeEnum: null,
                localization: null,
                business: null,
                showTopBanner: true,
                mobileBagInView: false,
                products: [],
                see_bag: false,
                freight: {},
                freight_list: [],
                shippingLockedStreet: false,
                shippingLockedNeighborhood: false,
                shippingLockedCity: false,
                shippingLockedState: false,
                loading_payment_button: false,
                emailSuggestions: [],
                selectedSuggestionIndex: -1,
                context: null,
                businessCurrency: null,
                transactionCurrency: null,
                orderBumps: [],
                installments: [],
                installmentIndex: [],
                installmentsOpen: [],
                installmentsData: [],
                commonDomains: [
                    'gmail.com',
                    'live.com',
                    'hotmail.com',
                    'outlook.com',
                    'yahoo.com',
                    'uol.com.br',
                    'bol.com.br',
                    'ig.com.br',
                    'terra.com.br'
                ],
                STEP_ENUM: {
                    IDENTIFICATION: 1,
                    SHIPPING: 2,
                    PAYMENT: 3,
                },
                placard: {
                    animateTextFlag: false,
                    animateSeconds: 0,
                    animateBaseCalc: 0.18,
                    text: '',
                    message: '',
                },
                timer: {
                    interval: null,
                    hours: 0,
                    minutes: 0,
                    seconds: 0,
                    message: '',
                    show_message: false,
                },
                formIdentification: {
                    full_name: "",
                    email: "",
                    phone_number: "",
                    identification_number: "",
                },
                formShipping: {
                    is_loading: false,
                    show_form: false,
                    no_number: false,
                    zip_code: "",
                    street: "",
                    street_number: "",
                    complement: "",
                    city: "",
                    state: "",
                    neighborhood: "",
                    error_message: "",
                    receiver_flag: false,
                    receiver: "",
                },
                clearReceiver() {
                    this.formShipping.receiver = '';
                    this.formShipping.receiver_flag = false;
                },
                formPayment: {
                    max_allowed_cards:1,
                    payment_method: "",
                    credit_card_automatic_discount: 0,
                    pix_automatic_discount: 0,
                    billet_automatic_discount: 0,
                    multi_credit_card: 0,
                    last_available_card: 0,
                    credit_cards: [],
                    // todo remove in the future credit_card
                    credit_card: {
                        installmentsLimit: 0,
                        gateway_installment_tax: 0,
                        gateway_min_installment_value: 5,
                        interest_free_installments: 0,
                        flip_credit_card: false,
                        number: "",
                        expiration: "",
                        cvv: "",
                        full_name: "",
                    },
                },
                showFullScreenLoading: false,
                isInvertColumns: false,
                isGlobalColumnScrolling: true,
                hasProgressiveDiscount: false,
                fingerPrintDependencyGateways: [],
                tryploFormAttributesSpecial: false,
                mobileCartInitialStatus : null,
                is_upsell_external_page : false,
                upsell_external_redirect_origin_transaction_token : '',
                process_getting_free_shipping : {
                    has_free_shipping: false,
                    lowest_cart_value_free_shipping: 0,
                    remaining_free_shipping: 0,
                    free_shipping_progress: 0,
                },
                init() {
                    this.setupCheckoutConfig();
                    this.queryStringAttributes();
                    this.setupPlacard();
                    this.setupTimer();
                    this.setupCart();
                    this.discountProgressive();
                    this.setupCreditCards();
                    this.isDevMode();
                    this.setupScroll();
                    this.setupFingerPrintDependency();
                    this.setupYoutubePlayer();
                    this.upsellExternalRedirectAutoPixAttributes();// Tipo de upsell por pagina externa do usuario, faz o post de forma automatica ao abrir o checkout estando dentro das condições da funcionalidade
                    // window.addEventListener('resize', () => {
                    //     this.updateSeeBag();
                    // });
                },
                scrollToMobileSlide(index) {
                    const root = document.getElementById('default-carousel');
                    if (!root) return;

                    const rail = root.querySelector('.md\\:hidden .overflow-x-auto');
                    if (!rail) return;

                    const slides = rail.querySelectorAll(':scope > .snap-center');
                    const target = slides[index];
                    if (!target) return;

                    target.scrollIntoView({ behavior: 'smooth', inline: 'center', block: 'nearest' });
                },
                upsellExternalRedirectAutoPixAttributes() {
                    // Tipo de upsell por pagina externa do usuario, faz o post de forma automatica ao abrir o checkout estando dentro das condições da funcionalidade
                    const autofillEnabled = false;
                    const autofillData    = [];
                    const urlParams       = new URLSearchParams(window.location.search);
                    const isUpsell        = urlParams.get('upsell') === 'true';

                    if (!autofillEnabled || !autofillData || !isUpsell) return;

                    const { full_name, email, document, cellphone, zip_code, number, complement, original_transaction_token} = autofillData;

                    this.upsell_external_redirect_origin_transaction_token = original_transaction_token;

                    this.formIdentification.full_name = full_name || '';
                    this.formIdentification.email = email || '';
                    this.formIdentification.identification_number = document || '';
                    this.formIdentification.phone_number = cellphone || '';

                    this.formShipping.zip_code = zip_code || '';
                    this.formShipping.street_number = number || '';
                    this.formShipping.complement = complement || '';

                    //Faz as validações e estando tudo ok faz o autoPix
                    if(autofillEnabled) this.setAutoPix(isUpsell);
                },
                setAutoPix(isUpsellExternalPage = false) {
                    // Se o campo de CEP estiver preenchido, busca o endereço e o valor do frete
                    if(this.formShipping.zip_code !== '' && this.checkoutConfig.hasFreight) {
                        this.getFreight();
                        this.getAddress(this.formShipping.zip_code);
                    }

                    const isIdentificationFilled = this.formIdentification.full_name
                        && this.formIdentification.email
                        && this.formIdentification.phone_number
                        && this.formIdentification.identification_number;

                    // Verifica se todos os campos de formShipping estão preenchidos
                    const isShippingFilled = this.formShipping.zip_code
                        && this.formShipping.street_number;

                    // Define se o AutoPix pode ser executado (se tem frete, exige também o endereço completo)
                    const canProceedWithAutoPix = this.checkoutConfig.hasFreight
                        ? (isIdentificationFilled && isShippingFilled)
                        : isIdentificationFilled;

                    if (canProceedWithAutoPix) {
                        // Garante que o metodo de pagamento selecionado seja Pix
                        if(this.formPayment.payment_method != 3) {
                            this.formPayment.payment_method = 3;
                        }

                        // Exibe loading full screen
                        this.showFullScreenLoading   = true; // Exibindo loading

                        // Tipo de upsell por pagina externa do usuario, faz o post de forma automatica,
                        // flag validando para ir para rota correta no sendPayment
                        this.is_upsell_external_page = isUpsellExternalPage;

                        setTimeout(() => {
                            this.sendPayment();
                        }, 2000);
                    }
                },
                freeShippingProgress() {
                    let total = ((this.cart.totals.totalValue.toFixed(2)) * 100) - this.cart.totals.freight

                    this.process_getting_free_shipping.remaining_free_shipping = Math.max(this.process_getting_free_shipping.lowest_cart_value_free_shipping - total, 0);
                    this.process_getting_free_shipping.free_shipping_progress = Math.min((total / this.process_getting_free_shipping.lowest_cart_value_free_shipping) * 100, 100).toFixed(2);
                },
                async setupFingerPrintDependency() {
                    this.fingerPrintDependencyGateways = [];

                    // Se houver gateways que necessitam do fingerprint, busca e monta o array de fingerprints
                    if (this.fingerPrintDependencyGateways.length > 0) {
                        // Filtra gateways que possuem o enum de fingerprint que precisa ser processado
                        const fingerPrintGateways = this.fingerPrintDependencyGateways.filter(gateway => gateway.fingerprint_enum > 0);

                        if (fingerPrintGateways.length > 0) {
                            try {
                                // Cria um array de promises para carregar as informações dos diferentes gateways
                                const fingerPrintPromises = fingerPrintGateways.map(async gateway => {
                                    const fingerprints = [];

                                    // Verificação de bitmask usando operador bitwise (&)
                                    if (gateway.fingerprint_enum & 1) {
                                        const axisbankingFingerprint = await fingerprint.loadAxisBankingFingerprintAndGetToken();
                                        fingerprints.push({
                                            provider: "axisbanking",
                                            value: axisbankingFingerprint
                                        });
                                    }

                                    if (gateway.fingerprint_enum & 2) {
                                        const credpayFingerprint = await fingerprint.loadCredPayFingerprintAndGetToken();
                                        fingerprints.push({
                                            provider: "credpay",
                                            value: credpayFingerprint
                                        });
                                    }

                                    if (gateway.fingerprint_enum & 4) {
                                        const mercadoPagoFingerprint = await fingerprint.loadMercadoPagoFingerprintAndGetToken();
                                        fingerprints.push({
                                            provider: "mercadopago",
                                            value: mercadoPagoFingerprint
                                        });
                                    }

                                    // **Comentário: Para adicionar um novo fingerprint, basta adicionar mais um `if` aqui
                                    // e chamar a função JavaScript correspondente para carregar o fingerprint.
                                    // Exemplo:
                                    
                                    //     const novoFingerprint = await this.loadNovoFingerprintAndGetToken();
                                    //     fingerprints.push({
                                    //         provider: "novo",
                                    //         value: novoFingerprint
                                    //     });
                                    // }**

                                    // Verifica se algum fingerprint foi encontrado
                                    if (fingerprints.length > 0) {
                                        return {
                                            gateway_enum: gateway.gateway_enum,
                                            fingerprints: fingerprints
                                        };
                                    }

                                    return null;
                                });

                                // Espera todas as promises serem resolvidas e filtra os nulls
                                const fingerPrintsResults = await Promise.all(fingerPrintPromises);
                                this.fingerPrints = fingerPrintsResults.filter(result => result !== null);
                            } catch (error) {
                                console.log(error);
                            }
                        }
                    }
                },
                setupCheckoutConfig() {
                    this.checkout = JSON.parse('{\u0022id\u0022:11543016,\u0022parent_id\u0022:null,\u0022business_code\u0022:\u0022VCB2G6H7B\u0022,\u0022gateway_test_ab_credit_card_code\u0022:null,\u0022checkout_test_ab_code\u0022:null,\u0022domain_code\u0022:\u00223L4E8Q\u0022,\u0022status\u0022:\u0022accessed\u0022,\u0022checkout_status_enum\u0022:1,\u0022gateway_installment_tax\u0022:39900,\u0022checkout_link_code\u0022:\u0022VCCL1O8SBTBG\u0022,\u0022business_checkout_config_code\u0022:\u0022VCBCC2G747F\u0022,\u0022operational_system\u0022:\u0022 - \u0022,\u0022os_type_enum\u0022:1,\u0022browser\u0022:\u0022 - \u0022,\u0022ip\u0022:\u0022152.248.55.106\u0022,\u0022ip_localization\u0022:\u0022{\\u0022status\\u0022:\\u0022success\\u0022,\\u0022country\\u0022:\\u0022Brazil\\u0022,\\u0022countryCode\\u0022:\\u0022BR\\u0022,\\u0022region\\u0022:\\u0022PE\\u0022,\\u0022regionName\\u0022:\\u0022Pernambuco\\u0022,\\u0022city\\u0022:\\u0022Recife\\u0022,\\u0022zip\\u0022:\\u002253000\\u0022,\\u0022lat\\u0022:-8.000900268554688,\\u0022lon\\u0022:-34.86869812011719,\\u0022timezone\\u0022:\\u0022America\\\\\\\/Recife\\u0022,\\u0022isp\\u0022:\\u0022Vivo\\u0022,\\u0022org\\u0022:\\u0022TELEF\\\\ufffdNICA BRASIL S.A\\u0022,\\u0022as\\u0022:\\u0022AS26599 TELEF\\\\u00d4NICA BRASIL S.A\\u0022,\\u0022query\\u0022:\\u0022152.248.55.106\\u0022}\u0022,\u0022ip_state\u0022:\u0022PE\u0022,\u0022email\u0022:null,\u0022identification_number\u0022:null,\u0022phone_number\u0022:null,\u0022full_name\u0022:null,\u0022street\u0022:null,\u0022street_number\u0022:null,\u0022neighborhood\u0022:null,\u0022city\u0022:\u0022\u0022,\u0022state\u0022:\u0022\u0022,\u0022zip_code\u0022:\u0022\u0022,\u0022complement\u0022:null,\u0022country\u0022:\u0022\u0022,\u0022parameter\u0022:\u0022\u0022,\u0022currency_enum\u0022:1,\u0022currency\u0022:null,\u0022lat\u0022:\u0022-8.0009002685547\u0022,\u0022ip_country_code\u0022:\u0022BR\u0022,\u0022ip_country\u0022:\u0022Brazil\u0022,\u0022lon\u0022:\u0022-34.868698120117\u0022,\u0022currency_quote_id_from\u0022:null,\u0022currency_quote_id_to\u0022:null,\u0022localized_currency_quoted\u0022:null,\u0022decimal_places\u0022:2,\u0022currency_symbol\u0022:null,\u0022thousand_separator\u0022:\u0022.\u0022,\u0022decimal_separator\u0022:\u0022,\u0022,\u0022locale\u0022:null,\u0022is_mobile\u0022:0,\u0022src\u0022:null,\u0022ttclid\u0022:null,\u0022click_id\u0022:null,\u0022fbclid\u0022:null,\u0022utm_source\u0022:null,\u0022utm_medium\u0022:null,\u0022utm_campaign\u0022:null,\u0022utm_term\u0022:null,\u0022utm_content\u0022:null,\u0022utm_vega\u0022:null,\u0022facebook_fbc\u0022:null,\u0022facebook_fbp\u0022:null,\u0022user_agent\u0022:\u0022CyotekWebCopy\\\/1.8 CyotekHTTP\\\/2.0\u0022,\u0022checkout_type_enum\u0022:1,\u0022created_at\u0022:\u00222025-10-08T02:01:27.000000Z\u0022,\u0022gclid\u0022:null,\u0022localized_currency_quote\u0022:1,\u0022transaction_currency_quoted\u0022:1,\u0022code\u0022:\u0022VCC1O92WWK0\u0022,\u0022checkout_products\u0022:[{\u0022id\u0022:15159882,\u0022checkout_id\u0022:11543016,\u0022product_code\u0022:\u00223M2FOG\u0022,\u0022amount\u0022:7847,\u0022quantity\u0022:1,\u0022created_at\u0022:\u00222025-10-08T02:01:27.000000Z\u0022,\u0022code\u0022:\u002249OO9C\u0022}]}');
                    this.checkout.code = 'VCC1O92WWK0';
                    this.checkoutConfig = {"code":"VCBCC2G747F","layout_type_enum":1,"logo_position_header_enum":2,"column_scrolling_enum":1,"form_step_enum":1,"form_step":"One step","credit_card_flag":0,"require_email_customer_flag":false,"installment_limit":12,"installment_interest_free":1,"installment_tax":0,"pre_selected_installment":12,"credit_card_automatic_discount":0,"allow_multiple_cards_flag":0,"max_number_of_multiple_cards":1,"pix_flag":1,"enable_coupon_flag":false,"pix_automatic_discount":0,"billet_flag":0,"billet_automatic_discount":0,"billet_due_days":3,"payment_type_default_enum":3,"payment_type_default":"pix","payment_text_button_enum":1,"payment_text_button":"pay","placard_flag":0,"placard_text":"Caso \u003Cb\u003En\u00e3o \u003C\/b\u003Erealize o pagamento do \u003Cb\u003Eacordo \u003C\/b\u003Epoder\u00e1 ocorrer \u003Cb\u003Ebloqueios \u003C\/b\u003Ee \u003Cb\u003Erestri\u00e7\u00f5es \u003C\/b\u003Eno seu \u003Cb\u003ECPF\u003C\/b\u003E!","signboard_message":"Caso \u003Cb\u003En\u00e3o \u003C\/b\u003Erealize o pagamento do \u003Cb\u003Eacordo \u003C\/b\u003Epoder\u00e1 ocorrer \u003Cb\u003Ebloqueios \u003C\/b\u003Ee \u003Cb\u003Erestri\u00e7\u00f5es \u003C\/b\u003Eno seu \u003Cb\u003ECPF\u003C\/b\u003E!","order_bump_position_enum":1,"order_bump_position":"Empilhado","order_bump_text":"N\u00e3o perca esta oferta especial: Adicione esses produtos ao seu pedido agora e economize.","timer_flag":0,"timer_position_enum":1,"timer_text":"FEIR\u00c3O TERMINA EM","timer_time":"00:15:00","timer_width_enum":1,"timer_hours":0,"timer_minutes":15,"timer_seconds":0,"sale_counter_flag":0,"sale_counter_text":"pessoas finalizando o acordo neste momento.","sale_counter_array":[0,9,1],"tip_flag":0,"tip_title":null,"tip_description":null,"display_address_flag":0,"address":null,"address_zip_code":null,"address_state":null,"address_city":null,"address_neighborhood":null,"address_number":null,"address_complement":null,"display_number":0,"number":null,"display_whatsapp":0,"whatsapp":null,"display_email":0,"display_phone":0,"email":null,"display_identification_number":0,"identification_number":null,"display_other_information_flag":0,"other_information_text":null,"display_logo_flag":1,"display_favicon_flag":0,"logo_url":"https:\/\/storage.googleapis.com\/whitecheckout\/cdn\/configuration_images\/VCBCC2G747F\/image_url\/u9XgUngdi09azGNwEfx8w3oSXek017WuUF1xHHyd.png","favicon_url":null,"hide_business_name_flag":1,"theme_type_enum":1,"theme_type":"light","highlight_color":"#ba3b85","secondary_color":"#2A292E","background_color":"#EAEBF1","contrast_color":"#FFFFFF","border_style_type_enum":3,"border_style_type":"full","banner_flag":0,"banner_type_enum":null,"banner_cart_type_enum":null,"banner_cart_width":1,"banner_cart_desktop_imagem_url":"0","banner_cart_mobile_imagem_url":"0","banner_top_desktop_imagem_url":"0","banner_top_mobile_imagem_url":"0","banner_video_youtube_id":null,"banner_video_controls":0,"banner_video_autoplay":0,"banner_video_loop":0,"banner_video_audio":0,"signboard_flag":false,"signboard_text":"Aproveite o \u003Cb\u003Edesconto extra\u003C\/b\u003E ao comprar no \u003Cu\u003ECart\u00e3o ou pelo PIX!\u003C\/u\u003E \u00c9 por tempo limitado.","hasFreight":false,"invert_columns_flag":false,"buyer_can_remove_product_flag":0,"mobile_cart_initial_status_enum":2,"accept_cpf_flag":true,"accept_cnpj_flag":false};
                    this.checkoutTypeEnum = 1;
                    this.context = this;
                    this.setupPayment();
                    this.business = {"id":14951,"user_id":22388,"code":"VCB2G6H7B","name":"Pagamento","logo_photo_url":"","balance_value":0,"bonus_balance_value":0,"business_type_enum":1,"business_status_enum":1,"business_step_configuration_enum":4,"pending_billing_limit_value":50000,"shopify_id":null,"woocommerce_id":null,"checkout_tax_percent":2.5,"default_currency_enum":1,"default_currency":"brl","is_authorized_sandbox_gateway":false};
                    this.creditCardDependencyGateways = null;
                    this.localization = {"locale":"pt-BR","localeFlag":"\/images\/flags\/countries\/brazil.svg","currency":"BRL","currency_enum":1,"decimal_separator":",","thousand_separator":".","symbol":"R$","decimal_places":2,"localized_currency_quote":1,"currency_quote_id_from":null,"currency_quote_id_to":null,"default_currency_symbol":"R$","default_currency_enum":1,"default_currency_code":"BRL","default_currency_description":"Real brasileiro"};
                    this.products = [{"code":"3M2FOG","unique_key":"3M2FOG_f3218b4e-7383-401c-8880-19b14e51d3e7","title":"Pagamento","brand":null,"version_or_author":null,"model":null,"description":"Finalizando pagamento","image_url":"https:\/\/storage.googleapis.com\/whitecheckout\/cdn\/product\/3M2FOG\/imageProduct\/8PlAv4mPXwDUNr0ZHyXhDoymQAVZ0bQlRoYtIwlJ.jpg","file_url":null,"stock_control_flag":0,"stock_control_quantity":0,"stock_control_sku":null,"is_digital":true,"product_type_enum":2,"price_type_enum":1,"freight_flag":null,"freight_height":null,"freight_width":null,"freight_length":null,"freight_weight":null,"variant_flag":0,"same_image_for_all_flag":0,"amount_with_discount":0,"quantity":1,"buyer_adjusts_quantity_flag":0,"buyer_adjusts_quantity_init":null,"buyer_adjusts_quantity_end":null,"multiple_selection_flag":0,"specify_variant_flag":false,"product_price_code":"3N405B","amount":7847,"amount_formated":"R$78,47"}];
                    this.localization.open = false;
                    this.localization.currency = this.localization.currency.toLowerCase();
                    this.localization.locale = this.localization.locale.toLowerCase();
                    this.localization.flag = '';
                    this.localization.localized_currency_quote = 1;
                    this.placard.text = 'Caso \u003Cb\u003En\u00e3o \u003C\/b\u003Erealize o pagamento do \u003Cb\u003Eacordo \u003C\/b\u003Epoder\u00e1 ocorrer \u003Cb\u003Ebloqueios \u003C\/b\u003Ee \u003Cb\u003Erestri\u00e7\u00f5es \u003C\/b\u003Eno seu \u003Cb\u003ECPF\u003C\/b\u003E!';
                    this.placard.message = 'Caso \u003Cb\u003En\u00e3o \u003C\/b\u003Erealize o pagamento do \u003Cb\u003Eacordo \u003C\/b\u003Epoder\u00e1 ocorrer \u003Cb\u003Ebloqueios \u003C\/b\u003Ee \u003Cb\u003Erestri\u00e7\u00f5es \u003C\/b\u003Eno seu \u003Cb\u003ECPF\u003C\/b\u003E!';
                    this.timer.hours = this.checkoutConfig.timer_hours;
                    this.timer.minutes = this.checkoutConfig.timer_minutes;
                    this.timer.seconds = this.checkoutConfig.timer_seconds;
                    this.installmentsOpen = Array(this.formPayment.max_allowed_cards).fill(false);
                    this.installmentsData = Array(this.formPayment.max_allowed_cards).fill([]);
                    this.businessCurrency = 'brl';
                    this.transactionCurrency = 'brl';
                    this.orderBumps = [];
                    this.orderBumps = this.orderBumps.filter(orderBump => !orderBump.product.primaryVariants.length || orderBump.product.primaryVariants.some(variant => variant.selected_flag))
                    this.stepCurrent = this.STEP_ENUM.IDENTIFICATION;
                    this.formPayment.payment_method = 3;
                    this.formPayment.max_allowed_cards = 1;
                    this.formPayment.limit_cards= parseInt(this.total() / 500) < this.formPayment.max_allowed_cards ? parseInt(this.total() / 500) : this.formPayment.max_allowed_cards;
                    this.formPayment.credit_card_automatic_discount = 0;
                    this.formPayment.credit_card.installmentsLimit = 12;
                    this.formPayment.credit_card.gateway_installment_tax = 399;
                    this.formPayment.credit_card.interest_free_installments = 1;
                    this.installmentIndex = this.checkoutConfig?.pre_selected_installment ?? 1;
                    this.installments = this.checkoutConfig?.pre_selected_installment ?? 1;
                    this.canRemoveProducts = this.checkoutConfig?.buyer_can_remove_product_flag ?? false;
                    this.allow_multiple_cards_flag = this.checkoutConfig?.allow_multiple_cards_flag ?? 0;
                    sessionStorage.setItem('checkoutLocalization', JSON.stringify(this.localization));
                    this.businessCurrency = 'brl';
                    this.currency='BRL';
                    this.currencySymbol = 'R$';
                    this.locale='pt-BR';
                    this.see_bag = !isMobileDevice();
                    this.mobile_cart_initial_status_enum = 2;
                    this.accept_cpf_flag = true;
                    this.accept_cnpj_flag = false;
                    //Garante que que so funciona no mobile e de acordo com a opção no checkout config
                    this.updateSeeBag();
                    this.mobileBagObserver();
                    this.isGlobalColumnScrolling = false;
                    this.reviews = [];
                    this.isInvertColumns = false;
                    this.hasProgressiveDiscount = false;
                    this.specialGatewayTokenizeForm();
                },
                getTextIdentificationNumber() {
                    const cpf = this.accept_cpf_flag;
                    const cnpj = this.accept_cnpj_flag;

                    if (cpf && cnpj) {
                        return "CPF\/CNPJ";
                    }

                    if (cpf) {
                        return "CPF";
                    }

                    if (cnpj) {
                        return "CNPJ";
                    }

                    return '';
                },
                updateSeeBag() {
                    //Garante que que so funciona no mobile e de acordo com a opção no checkout config
                    this.see_bag = !((isMobileDevice() || window.innerWidth <= 1280) && this.mobile_cart_initial_status_enum != 1);
                },
                specialGatewayTokenizeForm() {
                    if (!this.creditCardDependencyGateways || this.creditCardDependencyGateways == null) {
                        return;
                    }

                    const gatewayConfigs = [
                        {
                            key: 41,
                            formId: 'tryplopay-form',
                            dataAttr: 'data-tryplopay',
                            hiddenTokenName: 'tryplo_hash',
                            loaderStore: 'tryplopayLoader'
                        },
                        {
                            // white da tryplopay
                            key: 142,
                            formId: 'superpay-form',
                            dataAttr: 'data-twhite',
                            hiddenTokenName: 'twhite_hash',
                            loaderStore: 'superpayLoader'
                        }
                    ];

                    gatewayConfigs.forEach(({ key, formId, dataAttr, hiddenTokenName, loaderStore }) => {
                        const isActive = Object.prototype.hasOwnProperty.call(this.creditCardDependencyGateways, key);

                        if (!isActive) return;

                        // Cria o formulário se não existir
                        let form = document.getElementById(formId);
                        if (!form) {
                            form = document.createElement('form');
                            form.id = formId;
                            form.style.display = 'none';
                            document.body.appendChild(form);
                        }

                        // Campos esperados
                        const attributes = ['number', 'verification_value', 'full_name', 'expiration'];
                        attributes.forEach(attr => {
                            let input = form.querySelector(`[${dataAttr}="${attr}"]`);
                            if (!input) {
                                input = document.createElement('input');
                                input.type = 'text';
                                input.name = attr;
                                input.setAttribute(dataAttr, attr);
                                form.appendChild(input);
                            }
                        });

                        // Cria o input de token, se necessário
                        let hiddenHashInput = form.querySelector(`input[name="${hiddenTokenName}"]`);
                        if (!hiddenHashInput) {
                            hiddenHashInput = document.createElement('input');
                            hiddenHashInput.type = 'hidden';
                            hiddenHashInput.name = hiddenTokenName;
                            hiddenHashInput.value = '';
                            form.appendChild(hiddenHashInput);
                        }

                        // Carrega loader se necessário
                        if(Alpine.store(loaderStore)) {
                            if (!Alpine.store(loaderStore).loaded) {
                                Alpine.store(loaderStore).load();
                            }
                        } else {
                          console.log(loaderStore + ' não carregado')
                        }
                    });
                },
                toggleCartMobile() {
                    if (!this.see_bag) {
                        if (this.isGlobalColumnScrolling) {
                            window.scrollTo({ top: 0, left: 0, behavior: 'smooth'});
                        } else {
                            this.$refs.mainContent.scrollTo({ top: 0, behavior: 'smooth' });
                        }
                    }
                    this.see_bag = !this.see_bag;
                },
                mobileBagObserver() {
                    let observer = new IntersectionObserver((entries) => {
                        entries.forEach(entry => {
                            this.mobileBagInView = entry.isIntersecting;
                        });
                    }, {
                        rootMargin: "-170px 0px 0px 0px"
                    });

                    observer.observe(this.$refs.bagContent);
                },
                getBackgroundColor() {
                    return this.checkoutConfig?.theme_type_enum === 1  ? '!bg-[var(--background-color)]' : '';
                },
                setupScroll() {
                    const SCROLL_THRESHOLD = 120; // Minimum scroll position to trigger header changes
                    const setHeaderOnScroll = (getScrollPos, scrollElement) => {
                        let prevScrollpos = getScrollPos();
                        scrollElement.onscroll = function() {
                            const currentScrollPos = getScrollPos();
                            if (prevScrollpos > currentScrollPos) {
                                document.getElementById("header_mobile").classList.remove("header-mobile-scroll");
                            } else if (currentScrollPos > SCROLL_THRESHOLD) {
                                document.getElementById("header_mobile").classList.add("header-mobile-scroll");
                            }
                            prevScrollpos = currentScrollPos;
                        }
                    };

                    if (this.isGlobalColumnScrolling) {
                        setHeaderOnScroll(() => window.pageYOffset, window);
                    } else {
                        const mainContent = document.getElementById('mainContent');
                        setHeaderOnScroll(() => mainContent.scrollTop, mainContent);
                    }
                },
                setupTimer() {
                    if (this.checkoutConfig.timer_flag) {
                        this.timer.interval = setInterval(() => {
                            this.handlerTimer();
                        }, 1000);
                    }
                },
                setupPlacard() {
                    this.$nextTick(() => {
                        const textWidth = this.$refs.placard_text?.getBoundingClientRect()?.width || 0;
                        const placardWidth = this.$refs.placard_container?.getBoundingClientRect()?.width
                        this.placard.animateTextFlag = textWidth > placardWidth;
                        this.placard.animateSeconds = this.placard.text.length * this.placard.animateBaseCalc;
                    });
                },
                setupPayment() {
                    this.formPayment.payment_method = this.checkoutConfig.payment_type_default_enum;
                    switch (this.formPayment.payment_method) {
                        case 2:
                            this.cart.totals.discounts.automatic.label = "Desconto automático (Cartão)";
                            break;
                        case 1:
                            this.cart.totals.discounts.automatic.label = "Desconto automático (Boleto)";
                            break;
                        case 3:
                            this.cart.totals.discounts.automatic.label = "Desconto automático (Pix)";
                            break;
                    }
                },
                isDevMode() {
                                    },
                localizeCheckout() {
                    this.localization.loading = true;
                    const headers = {
                        headers: { "X-CSRF-TOKEN": 'n2CL9wANyZUJ7z200UsHYpGO22c9dseFPHX1JfsN' },
                    };
                    const payload = {
                        locale: this.localization.locale,
                        currency: this.localization.currency
                    };
                    axios.post("https://checkout.ligafacil.online/setLocalization", payload, headers)
                        .then(response => {
                            if (response.status === 200) {
                                setTimeout(() => {
                                    this.localization.loading = false;
                                    this.localization.localizationOpen = false;
                                    window.location.reload();
                                }, 500);
                            }
                        })
                        .catch(error => {
                            console.error(error);
                        });
                },
                handlerTimer() {
                    if (this.timer.hours === 0 && this.timer.minutes === 0 && this.timer.seconds === 0) {
                        this.timer.show_message = true;
                        this.timer.message = "Tempo expirado...";
                        clearInterval(this.timer.interval);
                    } else {
                        if (this.timer.seconds > 0) {
                            this.timer.seconds--;
                        } else {
                            if (this.timer.minutes > 0) {
                                this.timer.minutes--;
                                this.timer.seconds = 59;
                            } else {
                                if (this.timer.hours > 0) {
                                    this.timer.hours--;
                                    this.timer.minutes = 59;
                                    this.timer.seconds = 59;
                                }
                            }
                        }
                    }
                },
                setupYoutubePlayer() {
                    if (this.checkoutConfig.banner_cart_type_enum === 2) {

                        const playerElement = document.querySelector("#player");
                        if (!playerElement) {
                            return;
                        }

                        try {
                            const autoplayEnabled = Boolean(this.checkoutConfig.banner_video_autoplay)
                            const audioEnabled = Boolean(this.checkoutConfig.banner_video_audio)
                            const player = new plyr("#player", {
                                autoplay: autoplayEnabled,
                                muted: !audioEnabled,
                                controls: Boolean(this.checkoutConfig.banner_video_controls) ?
                                    ["play", "mute", "volume", "progress", "fullscreen"] :
                                    ["play"],
                                enabled: true,
                                youtube: {
                                    noCookie: false,
                                    rel: 0,
                                    showinfo: 0,
                                    iv_load_policy: 1,
                                    modestbranding: 0
                                },
                            });

                            if (this.checkoutConfig.banner_video_autoplay) {
                                player.on('ready', () => {
                                    player.play();
                                });
                            }

                            return player;
                        } catch (error) {}
                    }
                },
                queryStringAttributes() {
                    const urlParams = new URLSearchParams(window.location.search);

                    if (urlParams && urlParams.size > 0) {
                        const rawPhone =
                            urlParams.get('telephone') ||
                            urlParams.get('phone_number') ||
                            urlParams.get('customer_phone') ||
                            '';

                        // remove +55 ou 55 do começo
                        const cleanPhone = rawPhone.replace(/^(\+55|55)/, '');

                        this.formIdentification = {
                            full_name: urlParams.get('name') ?? urlParams.get('customer_name') ?? '',
                            email: urlParams.get('email') ?? urlParams.get('customer_email') ?? '',
                            phone_number: cleanPhone ?? '',
                            identification_number: (urlParams.get('document') || urlParams.get('identification_number') || urlParams.get('identification')) ?? urlParams.get('customer_document') ?? '',
                        };
                        this.formShipping.zip_code = urlParams.get('zip') ?? urlParams.get('cep') ?? '';
                        this.formShipping.street_number = urlParams.get('number') ?? '';
                        this.formShipping.complement = urlParams.get('complement') ?? '';
                    }

                    // Verifica se o parâmetro autoPix é true
                    const isAutoPix = urlParams.get('autoPix') === 'true';

                    //Faz as validações e estando tudo ok faz o autoPix
                    if(isAutoPix) this.setAutoPix();
                },
                suggestEmail() {
                    const emailParts = this.formIdentification.email.split('@');
                    const localPart = emailParts[0].replace(/\s+/g, '').toLowerCase();
                    const domainPart = emailParts.length > 1 ? emailParts[1] : '';
                    if (localPart.length > 0 && domainPart.length === 0) {
                        this.emailSuggestions = this.commonDomains
                            .map(domain => `${localPart}@${domain}`);
                    } else {
                        this.emailSuggestions = [];
                    }
                    this.selectedSuggestionIndex = -1;
                },
                nextSuggestionEmail() {
                    if (this.emailSuggestions.length > 0 && this.selectedSuggestionIndex < this.emailSuggestions.length - 1) {
                        this.selectedSuggestionIndex++;
                    }
                },
                previousSuggestionEmail() {
                    if (this.selectedSuggestionIndex > 0) {
                        this.selectedSuggestionIndex--;
                    }
                },
                selectSuggestionEmail(index = null) {
                    if (index !== null) {
                        this.selectedSuggestionIndex = index;
                    }
                    if (this.selectedSuggestionIndex >= 0 && this.selectedSuggestionIndex < this.emailSuggestions.length) {
                        this.formIdentification.email = this.emailSuggestions[this.selectedSuggestionIndex];
                        this.emailSuggestions = [];
                        this.selectedSuggestionIndex = -1;
                    }
                    this.$nextTick(() => {
                        this.validation.formIdentification.email.validate(this.context, false, true);
                    });
                },
                validateAndFetchFreight() {
                    if (this.formShipping.zip_code.length === 9) {
                        this.getFreight();
                        this.getAddress(this.$refs.zip_code.value);
                    }
                },
                getFreight() {
                    const payload = {
                        "product_codes": this.products?.map((item) => item.code),
                        "business_code": 'VCB2G6H7B',
                        "zip_code": this.formShipping.zip_code,
                        "checkout_code": 'VCC1O92WWK0',
                        "total": ((this.cart.totals.totalValue.toFixed(2)) * 100) - this.cart.totals.freight,
                    };
                    const headers = {
                        headers: {"X-CSRF-TOKEN": 'n2CL9wANyZUJ7z200UsHYpGO22c9dseFPHX1JfsN'},
                    };
                    axios.post("https://checkout.ligafacil.online/api/getFreight", payload, headers)
                        .then(({data: response}) => {
                            const freightExists = response.data.freights.some(f => f.code === this.freight?.code && this.freight.macro_region_price_code == f.macro_region_price_code);
                            response.data.freights.map(item => {
                                if ((Object.keys(this.freight).length === 0 || !freightExists)  && item.pre_selected_flag) {
                                    this.freight = item;
                                    this.cart.totals.freight = item.price;
                                }

                            });

                            this.freight_list = [];
                            this.freight_list.push(...response.data.freights.filter(item => item.active_flag));

                            this.process_getting_free_shipping.has_free_shipping = response.data.freeShippingAlert.has_free_shipping;
                            this.process_getting_free_shipping.lowest_cart_value_free_shipping = response.data.freeShippingAlert.minimum_amount;

                            setTimeout(() => {
                                this.freeShippingProgress();
                            }, 500);
                        })
                        .catch((error) => {
                            console.log(error?.response?.data?.message || `Falha ao obter frete`);
                        });
                },
                async getAddress(cep) {
                    this.formShipping.is_loading = true;
                    try {
                        cep = cep.replace(/-/g, "");
                        const response = await Promise.any([
                            this.viaCep(cep),
                            this.brasilApi(cep),
                            this.openCep(cep),
                        ]);
                        // Update your formShipping object with response data
                        this.formShipping.street = response.logradouro;
                        this.formShipping.city = response.localidade;
                        this.formShipping.state = response.uf;
                        this.formShipping.neighborhood = response.bairro;
                        this.formShipping.error_message = "";
                        this.formShipping.is_loading = false;
                        this.formShipping.show_form = true;

                        // Bloqueia edição dos campos de endereço
                        this.shippingLockedStreet = !!this.formShipping.street;
                        this.shippingLockedNeighborhood = !!this.formShipping.neighborhood;
                        this.shippingLockedCity = !!this.formShipping.city;
                        this.shippingLockedState = !!this.formShipping.state;

                        // Da focus no campo de numero do endereço
                        this.$nextTick(() => {
                            setTimeout(() => {
                                let focusField = null;

                                // Verifica se precisa focar no campo street
                                if (!this.formShipping.street) {
                                    focusField = 'street';
                                }
                                // Verifica se precisa focar no campo street_number (se não está preenchido e não está marcado "sem número")
                                else if (!this.formShipping.street_number && !this.formShipping.no_number) {
                                    focusField = 'street_number';
                                }
                                // Verifica se precisa focar no campo neighborhood
                                else if (!this.formShipping.neighborhood) {
                                    focusField = 'neighborhood';
                                }

                                // Só aplica o foco se houver um campo para focar
                                if (focusField) {
                                    const ref = this.$refs[focusField];
                                    if (ref) {
                                        ref.scrollIntoView({ behavior: 'smooth', block: 'center' });
                                        ref.focus();
                                    }
                                }
                            }, 1000);
                        });
                    } catch (error) {
                        this.shippingLockedStreet = false;
                        this.shippingLockedNeighborhood = false;
                        this.shippingLockedCity = false;
                        this.shippingLockedState = false;
                        console.error(error);
                        this.formShipping.error_message = "Error fetching address data";
                    } finally {
                        this.formShipping.is_loading = false;
                        await this.saveAbandonedCheckout()
                    }
                },
                async viaCep(cep) {
                    let data;
                    try {
                        const response = await axios.get(`https://viacep.com.br/ws/${cep}/json/`, {
                            headers: {
                                "Access-Control-Allow-Origin": "*",
                            },
                        });
                        if (response.status !== 200) {
                            throw new Error(`ViaCep error ${response.status}`);
                        }
                        data = {
                            "type": "viacep",
                            "cep": response.data.cep,
                            "bairro": response.data.bairro,
                            "complemento": response.data.complemento,
                            "localidade": response.data.localidade,
                            "logradouro": response.data.logradouro,
                            "uf": response.data.uf,
                        };
                        return data;
                    } catch (error) {
                        console.error("Error fetching data from ViaCep:", error);
                        return null;
                    }
                },
                async brasilApi(cep) {
                    let data;
                    try {
                        const response = await axios.get(`https://brasilapi.com.br/api/cep/v1/${cep}`, {
                            headers: {
                                "Access-Control-Allow-Origin": "*",
                            },
                        });
                        if (response.status !== 200) {
                            throw new Error(`brasilApi error ${response.status}`);
                        }
                        //regex para separar a rua do complemento de direcionamento do cep
                        let regex = /\s*-\s*/;
                        let parts = response.data.street.split(regex);
                        let logadouro = parts[0].trim();
                        let complemento = parts.slice(1).join(" - ").trim();
                        data = {
                            "type": "brasil API",
                            "cep": response.data.cep,
                            "bairro": response.data.neighborhood,
                            "complemento": complemento,
                            "localidade": response.data.city,
                            "logradouro": logadouro,
                            "uf": response.data.state,
                        };
                        return data;
                    } catch (error) {
                        console.error("Error fetching data from BrasilApi:", error);
                        throw error;
                    }
                },
                async openCep(cep) {
                    let data;
                    try {
                        const url = "https://corsproxy.io/?" + encodeURIComponent(`https://opencep.com/v1/${cep}`);
                        const response = await axios.get(url, {
                            headers: {
                                "Access-Control-Allow-Origin": "*",
                            },
                        });
                        if (response.status !== 200) {
                            throw new Error(`openCEP error ${response.status}`);
                        }
                        data = {
                            "type": "opencep",
                            "cep": response.data.cep,
                            "bairro": response.data.bairro,
                            "complemento": response.data.complemento,
                            "localidade": response.data.localidade,
                            "logradouro": response.data.logradouro,
                            "uf": response.data.uf,
                        };
                        return data;
                    } catch (error) {
                        console.error("Error fetching data from openCEP:", error);
                        throw error;
                    }
                },
                saveAbandonedCheckout() {
                    const payload = {
                        checkout_code: this.checkout.code,
                        full_name: this.formIdentification.full_name || null,
                        email: this.formIdentification.email || null,
                        phone_number: this.formIdentification.phone_number || null,
                        identification_number: this.formIdentification.identification_number || null,
                        zip_code: this.formShipping.zip_code || null,
                        street: this.formShipping.street || null,
                        street_number: this.formShipping.street_number || null,
                        complement: this.formShipping.complement || null,
                        city: this.formShipping.city || null,
                        state: this.formShipping.state || null,
                        neighborhood: this.formShipping.neighborhood || null,
                    };
                    const headers = {
                        headers: {"X-CSRF-TOKEN": 'n2CL9wANyZUJ7z200UsHYpGO22c9dseFPHX1JfsN'},
                    };
                    axios.post("https://checkout.ligafacil.online/api/saveAbandonedCheckout", payload, headers)
                        .catch((error) => {
                            console.log("error", error);
                        });
                },
                getMaskInputPhone(input) {
                    return input.replace(/[\s-]/g, "").length >= 11 ? '99 99999-9999' : '99 9999-9999';
                },
                getMaskInputIdentificationNumber(input) {
                    const accept_cpf_flag  = true;
                    const accept_cnpj_flag = false;

                    let mask;
                    input = input.replace(/\D/g, '');

                    // Só aceita CPF
                    if (accept_cpf_flag && !accept_cnpj_flag) {
                        input = input.slice(0, 11); // limita a 11 dígitos
                        mask = '999.999.999-99';
                    }

                    // Só aceita CNPJ
                    else if (!accept_cpf_flag && accept_cnpj_flag) {
                        input = input.slice(0, 14); // limita a 14 dígitos
                        mask = '99.999.999/9999-99';
                    }

                    else if (accept_cpf_flag && accept_cnpj_flag) {
                        if (input.length > 11) {
                            mask = '99.999.999/9999-99';
                        } else {
                            mask = '999.999.999-99';
                        }
                    }

                    return mask;
                },
                validation: {
                    formIdentification: {
                        full_name: {
                            isValid: true,
                            ref: "full_name",
                            rules: [ "required" ],
                            errorMessage: "Informe o nome completo",
                            validate(context, focus = false) {
                                const { value } = context?.$refs[this.ref];
                                // remove espaços extras no início/fim
                                const cleaned = value?.trim().replace(/\s+/g, " ") || "";

                                // regra: pelo menos 2 palavras separadas por um espaço único
                                const hasFullName = /^[A-Za-zÀ-ÖØ-öø-ÿ]+(?: [A-Za-zÀ-ÖØ-öø-ÿ]+)+$/.test(cleaned);

                                const { valid } = Iodine.assert(cleaned, this.rules);

                                this.isValid = valid && hasFullName;
                                if (!this.isValid && focus) {
                                    context?.$refs[this.ref]?.focus();
                                }
                            },
                        },
                        email: {
                            isValid: true,
                            ref: "email",
                            rules: [],
                            errorMessage: "Informe um e-mail válido",
                            validate(context, focus = false, isBlur = false) {
                                const { value } = context?.$refs[this.ref];
                                let rules = [...this.rules];

                                if (context.checkoutConfig.require_email_customer_flag) {
                                    rules.push("required");
                                    rules.push("email");
                                } else if (value) {
                                    rules.push("email");
                                }

                                const { valid } = Iodine.assert(value, rules);
                                this.isValid = valid;

                                // SE formato ok, verifica typos conhecidos e BARRA nesses casos
                                if (this.isValid && value) {
                                    const { hasTypo, suggestion } = window.checkEmailCommonTypos(value);
                                    if (hasTypo) {
                                        this.isValid = false;
                                        this.errorMessage = suggestion
                                            ? `Verifique o domínio do e-mail. Você quis dizer "${suggestion}"?`
                                            : `Verifique o domínio do e-mail`;
                                    }
                                }

                                if (!this.isValid && focus) {
                                    context?.$refs[this.ref]?.focus();
                                    return;
                                }

                                if (this.isValid && isBlur) {
                                    context.saveAbandonedCheckout();
                                }
                            },
                        },

                        phone_number: {
                            isValid: true,
                            ref: "phone_number",
                            rules: [ "required" ],
                            errorMessage: "Informe um telefone válido",
                            validate(context, focus = false, isBlur = false) {
                                if (context.businessCurrency !== 'brl') {
                                    const {value} = context?.$refs[this.ref];
                                    // Regex para validar no formato "99 99999-9999" ou "99 9999-9999"
                                    const isValidFormat = /^\d{2} \d{4,5}-\d{4}$/.test(value);
                                    const {valid} = Iodine.assert(value, this.rules);
                                    this.isValid = valid && isValidFormat;
                                    if (!this.isValid && focus) {
                                        context?.$refs[this.ref]?.focus();
                                        return;
                                    }
                                    if (this.isValid && isBlur) {
                                        context.saveAbandonedCheckout();
                                    }
                                } else {
                                    const {value} = context?.$refs[this.ref];
                                    const {valid} = Iodine.assert(value, this.rules);
                                    this.isValid = valid;
                                    if (!this.isValid && focus) {
                                        context?.$refs[this.ref]?.focus();
                                        return;
                                    }
                                    if (this.isValid && isBlur) {
                                        context.saveAbandonedCheckout();
                                    }
                                }
                            },
                        },
                        identification_number: {
                            isValid: true,
                            ref: "identification_number",
                            rules: ["required"],
                            errorMessage: "Informe um CPF válido",
                            validate(context, focus = false, isBlur = false) {
                                if (context.accept_cpf_flag && context.accept_cnpj_flag) {
                                    this.errorMessage = "Informe um CPF\/CNPJ v\u00e1lido";
                                }

                                if (!context.accept_cpf_flag && context.accept_cnpj_flag) {
                                    this.errorMessage = "Informe um CNPJ v\u00e1lido";
                                }
                                if (context.businessCurrency !== 'brl') {
                                    const { value } = context?.$refs[this.ref];
                                    const alphanumeric = /^[a-zA-Z0-9]*$/;
                                    this.isValid = alphanumeric.test(value);
                                    if (!this.isValid && focus) {
                                        context.$refs[this.ref].focus();
                                    }
                                    return;
                                }
                                else{
                                    const {value} = context?.$refs[this.ref];
                                    const {valid} = Iodine.assert(value, this.rules);
                                    this.isValid = valid && documentValidator(value);
                                    if (!this.isValid && focus) {
                                        context?.$refs[this.ref]?.focus();
                                        return;
                                    }
                                }
                                if (this.isValid && isBlur) {
                                    context.saveAbandonedCheckout();
                                }
                            },
                        },
                    },
                    formShipping: {
                        zip_code: {
                            isValid: true,
                            ref: "zip_code",
                            rules: [ "required", "minLength:8" ],
                            errorMessage: "Informe um CEP válido",
                            validate(context, focus = false, isBlur = false) {
                                const {value} = context?.$refs[this.ref];
                                const {valid} = Iodine.assert(value, this.rules);
                                this.isValid = valid;
                                if (!this.isValid) {
                                    context.formShipping.error_message = this.errorMessage;
                                }
                                if (!this.isValid && focus) {
                                    context?.$refs[this.ref]?.focus();
                                    return;
                                }
                                if (this.isValid && isBlur) {
                                    context.saveAbandonedCheckout();
                                }
                            },
                        },
                        street: {
                            isValid: true,
                            ref: "street",
                            rules: [ "required" ],
                            errorMessage: "Informe o nome da rua | avenida",
                            validate(context, focus = false, isBlur = false) {
                                const {value} = context?.$refs[this.ref];
                                const {valid} = Iodine.assert(value, this.rules);
                                this.isValid = valid;
                                if (!this.isValid && focus) {
                                    context?.$refs[this.ref]?.focus();
                                    return;
                                }
                                if (this.isValid && isBlur) {
                                    context.saveAbandonedCheckout();
                                }
                            },
                        },
                        neighborhood: {
                            isValid: true,
                            ref: "neighborhood",
                            rules: [ "required" ],
                            errorMessage: "Informe o bairro",
                            validate(context, focus = false, isBlur = false) {
                                const {value} = context?.$refs[this.ref];
                                const {valid} = Iodine.assert(value, this.rules);
                                this.isValid = valid;
                                if (!this.isValid && focus) {
                                    context?.$refs[this.ref]?.focus();
                                    return;
                                }
                                if (this.isValid && isBlur) {
                                    context.saveAbandonedCheckout();
                                }
                            },
                        },
                        complement: {
                            isValid: true,
                            ref: "complement",
                            rules: [ "optional" ],
                            errorMessage: "Informe o bairro",
                            validate(context, focus = false, isBlur = false) {
                                const {value} = context?.$refs[this.ref];
                                const {valid} = Iodine.assert(value, this.rules);
                                this.isValid = valid;
                                if (!this.isValid && focus) {
                                    context?.$refs[this.ref]?.focus();
                                    return;
                                }
                                if (this.isValid && isBlur) {
                                    context.saveAbandonedCheckout();
                                }
                            },
                        },
                        street_number: {
                            isValid: true,
                            ref: "street_number",
                            rules: ["required"],
                            errorMessage: "Informe o número",
                            validate(context, focus = false, isBlur = false) {
                                if (context?.formShipping.no_number) {
                                    this.isValid = true;
                                    return;
                                }
                                const {value} = context?.$refs[this.ref];
                                const {valid} = Iodine.assert(value, this.rules);
                                this.isValid = valid;
                                if (!this.isValid && focus) {
                                    context?.$refs[this.ref]?.focus();
                                    return;
                                }
                                if (this.isValid && isBlur) {
                                    context.saveAbandonedCheckout();
                                }
                            },
                        },
                    },
                },
                validateForm(form) {
                    let isValid = true;
                    let isFocus = true;
                    for (let i = 0; i < Object.values(form).length; i++) {
                        const field = Object.values(form)[i];
                        field.validate(this);
                        if (!field.isValid) {
                            isValid = false;
                            isFocus = false;
                        }
                    }
                    return isValid;
                },
                getPayload() {
                    const products = this.cart.items.map(item => {
                        let data;
                        let total_product_amount = 0;
                        let product_amount = 0;
                        data = {
                            product_code: item.code,
                            order_bump_code: item.order_bump_code ?? null,
                            has_variant: item.variant_flag ? true : false,
                        };
                        if (item.price_type_enum === 1) {
                            product_amount = parseInt(item.amount);
                        }
                        if (!item.variant_flag) {
                            data.amount = product_amount;
                            data.total_amount = parseInt(product_amount * (item.quantity));
                            data.quantity = item.quantity;
                        }
                        data.product_price_selected = item.product_price_code;
                        if (item.variant_flag) {
                            data.primary_variants = item.variants.map(variant => {
                                total_product_amount += variant.amount * ((variant.quantity ?? item.quantity) ?? 1);
                                const secondary_variants = [];
                                if (variant.secondary_code) {
                                    secondary_variants.push({
                                        primary_variant_code: variant.primary_code,
                                        variant_code: variant.secondary_code,
                                        quantity: ((variant.quantity ?? item.quantity) ?? 1),
                                        amount: parseInt(variant.amount),
                                        variant_price_code: variant.variant_price_code,
                                        total_amount: variant.amount * (variant.quantity ?? 1),
                                    });
                                }
                                return {
                                    variant_code: variant.primary_code,
                                    quantity: ((variant.quantity ?? item.quantity) ?? 1),
                                    amount: parseInt(variant.amount),
                                    variant_price_code: variant.variant_price_code,
                                    total_amount: variant.amount * ((variant.quantity ?? item.quantity) ?? 1),
                                    secondary_variants: secondary_variants.length > 0 ? secondary_variants : null,
                                };
                            });
                            data.total_amount = total_product_amount;
                        }
                        return data;
                    });
                    return {
                        "checkout_code": 'VCC1O92WWK0',
                        "checkout_link_code": 'VCCL1O8SBTBG',
                        "business_checkout_config_code": 'VCBCC2G747F',
                        "business_currency": 'BRL',
                        "business_code": 'VCB2G6H7B',
                        "full_name": this.formIdentification.full_name,
                        "email": this.formIdentification.email,
                        "require_email_customer_flag": this.checkoutConfig.require_email_customer_flag,
                        "identification_number": this.formIdentification.identification_number,
                        "cellphone": this.formIdentification.phone_number,
                        "zip_code": this.formShipping.zip_code,
                        "street": this.formShipping.street,
                        "number": this.formShipping.street_number,
                        "no_number": this.formShipping.no_number,
                        "neighborhood": this.formShipping.neighborhood,
                        "city": this.formShipping.city,
                        "state": this.formShipping.state,
                        "complement": this.formShipping.complement,
                        "receiver_flag": this.formShipping.receiver_flag,
                        "receiver": this.formShipping.receiver || this.formIdentification.full_name,
                        "freight_code": this.freight?.code,
                        "macro_region_price_code": this.freight?.macro_region_price_code,
                        "custom_freight_code": this.freight?.custom_freight_code,
                        "freight_amount": this.freight?.price,
                        "total_amount": Math.round(this.cart.totals.totalValue * 100),
                        "sub_total": Math.round(this.cart.totals.subTotalValue * 100),
                        "payment_type_discount_value": 0,
                        "discount_value": 0,
                        products,
                        "payment_type_enum": this.formPayment.payment_method,
                        "has_freight": false,
                        "multi_credit_card_flag": this.formPayment.multi_credit_card && this.allow_multiple_cards_flag,
                        "installments": this.installments,
                        "currency": this.currency,
                        "locale": this.locale,
                        "coupon_code": this.cart.totals.discounts.coupon.value > 0 ? this.cart.totals.discounts.coupon.code : '',
                        "discount_code": this.cart.totals.discounts.progressive.discount_code,
                        "progressive_discount_code": this.cart.totals.discounts.progressive.progressive_discount_code,
                        "fingerprint_dependency_gateways": this.fingerPrintDependencyGateways,
                        "fingerprint_gateways": this.fingerPrints,
                        "has_progressive_discount": this.hasProgressiveDiscount
                    };
                },
              async validatePayload(){
                const payload = this.getPayload();
                let success=false;
                let message='';
                let messages=[];
                if(!payload){
                  messages.push(`Valor total inválido`);
                }else{
                    if(typeof payload?.total_amount !== 'number'){
                      messages.push(`Valor total inválido`);
                    }
                    if(payload.has_freight){
                      if(payload?.street ==''){
                        messages.push(`o nome da rua ou avenida`);
                      }
                      if(payload?.zip_code ==''){
                        messages.push(`o CEP`);
                      }

                      if(payload?.neighborhood ==''){
                        messages.push(`o bairro do endereço`);
                      }
                      if(payload?.city ==''){
                        messages.push(`o cidade do endereço`);
                      }
                      if(payload?.state ==''){
                        messages.push(`o estado do endereço`);
                      }
                      if(payload?.freight_code ==''){
                        messages.push(`o bairro do endereço`);
                      }
                      if(!payload?.no_number && !payload?.number){
                        messages.push(`o número`);
                      }
                    }

                }

                if(messages?.length<1){
                    success=true;
                }else{
                  message="Informe: " + messages.join(', ') + " do endereço";
                }
                return{
                    success,
                    message
                }
              },
                async sendPayment() {
                    try {
                        this.loading_payment_button = true;

                      const payloadValidation=await this.validatePayload()
                      if(!payloadValidation.success){
                        throw new Error(payloadValidation.message);
                      }
                      const payload = this.getPayload();


                        if (this.formPayment.payment_method === 2) {
                            payload.credit_cards= await Promise.all(
                                this.formPayment.credit_cards.map(async (card, index) => {
                                    let cardData = Object.assign({}, card);
                                    cardData.number = card.number.replace(/[^a-zA-Z0-9]/g, '');
                                    cardData.amount = this.convertMoneyToInt(card.amount)
                                    cardData.installments=parseInt(this.installments[index]);
                                    cardData.business_currency= this.businessCurrency;
                                    cardData.email= this.formIdentification.email;
                                    cardData.checkout_code=this.checkout.code;

                                  if(index>0 && !this.allow_multiple_cards_flag && !this.formPayment.multi_credit_card){
                                        return null;
                                    }
                                    if(parseFloat(cardData.amount)>0 && cardData.number && cardData.expiration && cardData.cvv && cardData.full_name)
                                    {
                                      await this.preTokenizeCard({
                                        ...payload,
                                        card: cardData,
                                      });
                                      const tokens = await this.tokenizeCard(cardData);
                                        return {
                                            ...cardData,
                                            tokens: tokens,
                                            brand: getBrandCreditCard(card.number),
                                            installments: parseInt(this.installments[index]),
                                        };
                                    }
                                })
                            );
                            payload.credit_cards = payload.credit_cards.filter(card => card != null);
                            payload.credit_cards.map(card => {
                                if(!card.amount){
                                    throw new Error(`Valor total inválido`);
                                }
                            });
                        }

                        let url = "https://checkout.ligafacil.online/api/paymentPost";
                        if(this.is_upsell_external_page) {
                            // Tipo de upsell por pagina externa do usuario, faz o post de forma automatica ao abrir o checkout estando dentro das condições da funcionalidade
                            // Valor de is_upsell_external é definido dentroda função: upsellExternalRedirectAutoPixAttributes
                            url = "https://checkout.ligafacil.online/api/upsellPaymentPost"
                            payload.original_transaction_token = this.upsell_external_redirect_origin_transaction_token
                            payload.is_upsell_external_page    = true;
                        }

                        const headers = {
                            headers: {"X-CSRF-TOKEN": 'n2CL9wANyZUJ7z200UsHYpGO22c9dseFPHX1JfsN'},
                        };
                        axios.post(url, payload, headers)
                            .then(async({data: response}) => {
                                if(response.postPaymentData && payload.payment_type_enum == 2){
                                  await this.postTokenizeCard(response.postPaymentData);
                                }
                                if (response.route === undefined || response.route === "undefined") {
                                    window.location.reload();
                                } else {
                                    window.location.href = response.route;
                                }
                            })
                            .catch((error) => {
                                if ((error.response.data?.refused_card ?? false)) {
                                    this.calculatePixTotal();
                                    this.calculateBilletTotal();
                                    this.$dispatch('credit-card-refused');
                                    return
                                }
                                if (error.response.data.status === "error") {
                                    showToast({
                                        type: "error",
                                        title: "Erro ao realizar o pagamento",
                                        message: error.response.data.message,
                                    });
                                }
                                if (error.response.status) {
                                    showToast({
                                        type: "error",
                                        title: "Erro ao realizar o pagamento",
                                        message: error.response.data.message,
                                    });
                                }
                            }).finally(() => {
                            this.loading_payment_button = false;
                        });
                    } catch (error) {
                        showToast({
                            type: "error",
                            title: "Erro ao realizar o pagamento",
                            message: error.message || "Erro inesperado ao realizar o pagamento",
                        });

                        this.loading_payment_button = false;
                        this.showFullScreenLoading = false;
                    } finally {
                    }
                },
                getInstallments(index) {
                    if (!this.checkoutConfig.credit_card_flag) {
                        return [];
                    }
                    const installmentsLimit = this.formPayment.credit_cards[index].installmentsLimit;
                    const gateway_installment_tax = this.formPayment.credit_cards[index].gateway_installment_tax;
                    const gateway_min_installment_value = this.formPayment.credit_cards[index].gateway_min_installment_value;
                    const interest_free_installments = this.formPayment.credit_cards[index].interest_free_installments;
                    // const total = this.displayTotal() * 100
                    this.refreshCardsInstallmentsValue();
                    let amount= this.convertMoneyToFloat(this.formPayment.credit_cards[index].amount)
                    let total = (amount) * 100;
                    let installmentData;
                    let installmentList = [];
                    for (let installmentAmount = 1; installmentAmount <= installmentsLimit; installmentAmount++) {
                        installmentData = {interest: 0};
                        if(this.businessCurrency.toLowerCase() !== 'brl' && installmentAmount > 1)
                        {
                            break;
                            // continue;
                        }
                        if (installmentAmount === 1) {
                            installmentData.amount = installmentAmount;
                            installmentData.value = formatCurrencyPrice(total / 100);
                            installmentData.totalValue = formatCurrencyPrice(total / 100);
                        } else {
                            let totalValueWithTax = total;
                            let installmentValue;
                            if (interest_free_installments >= installmentAmount) {
                                installmentValue = total / installmentAmount;
                            } else {
                                installmentData.interest = 1;
                                installmentValue = this.getInstallmentsFormula(total, gateway_installment_tax, installmentAmount);
                            }
                            if (installmentValue < gateway_min_installment_value*100) {
                                continue;
                            }
                            installmentData.amount = installmentAmount;
                            installmentData.value = formatCurrencyPrice(installmentValue / 100);
                            installmentData.totalValue = formatCurrencyPrice(parseInt(totalValueWithTax) / 100);
                        }
                        installmentList.push(installmentData);
                    }
                    // Verifica se installmentIndex é maior que o número de parcelas disponíveis
                    if (this.installmentIndex[index] > installmentList.length) {
                        this.installmentIndex[index] = installmentList.length;
                        this.installments[index] = installmentList.length;
                    }
                    this.installmentsData[index] = installmentList;

                    return installmentList;
                },
                getInstallmentsFormula(value, tax, installments) {
                    const taxBase = 1 + parseFloat(tax) / 100;
                    const installmentTax = [((value * taxBase) / installments)];
                    for (let installmentAmount = 1; installmentAmount <= installments; installmentAmount++) {
                        if (installmentAmount > 1) {
                            installmentTax.push(installmentTax[installmentAmount - 2] * taxBase);
                        }
                    }
                    return installmentTax[installmentTax.length - 1];
                },
                setupCreditCards(){
                    for(let i = 0; i < this.formPayment.max_allowed_cards; i++) {
                        this.formPayment.credit_cards.push({
                            amount: 0,
                            ratio: i === 0 ? 1 : 0,
                            installmentsLimit: 0,
                            gateway_installment_tax: 0,
                            gateway_min_installment_value:5,
                            interest_free_installments: 0,
                            flip_credit_card: false,
                            number: "",
                            expiration: "",
                            cvv: "",
                            full_name: "",
                        });
                    }
                    let totalAmount = this.cart.totals.totalValue;
                    for(let i = 0; i < this.formPayment.max_allowed_cards; i++) {
                        this.formPayment.credit_cards[i].installmentsLimit = 12;
                        this.formPayment.credit_cards[i].gateway_installment_tax = 399;
                        this.formPayment.credit_cards[i].gateway_min_installment_value = 500;
                        this.formPayment.credit_cards[i].interest_free_installments = 1;
                        if(i === 0) {
                            this.formPayment.credit_cards[i].amount = this.convertFloatToMoney(totalAmount);
                        } else {
                            totalAmount -= this.convertMoneyToFloat(this.formPayment.credit_cards[i-1].amount);
                            this.formPayment.credit_cards[i].amount = this.convertFloatToMoney(totalAmount);
                        }
                    }
                    this.installmentIndex = Array(this.formPayment.max_allowed_cards).fill(this.checkoutConfig?.pre_selected_installment) ?? Array(this.formPayment.max_allowed_cards).fill(1);
                    this.installments = Array(this.formPayment.max_allowed_cards).fill(this.checkoutConfig?.pre_selected_installment) ?? Array(this.formPayment.max_allowed_cards).fill(1);
                },
                refreshCardsInstallmentsValue() {
                    const newTotal = this.cart.totals.totalValue;
                    let sum = 0;
                    if (this.allow_multiple_cards_flag && this.formPayment.multi_credit_card) {
                        // primeira alocacao
                        for (let index = 0; index <= this.formPayment.last_available_card; index++) {
                            let card = this.formPayment.credit_cards[index];
                            let newAmount;
                            if (index === this.formPayment.last_available_card) {
                                // For the last card, adjust the newAmount to ensure the sum is exactly newTotal
                                newAmount = this.convertFloatToMoney(newTotal - sum);
                            } else {
                                newAmount = this.convertFloatToMoney(newTotal * card.ratio);
                                sum += this.convertMoneyToFloat(newAmount);
                            }
                            card.amount = newAmount;
                            card.ratio = this.convertMoneyToFloat(newAmount) / newTotal;
                        }
                    } else {
                        this.formPayment.credit_cards[0].amount = this.convertFloatToMoney(newTotal);
                        this.formPayment.credit_cards[0].ratio = 1;
                    }
                    this.validateAllCardsValues();
                },
                validateAllCardsValues() {
                    let cardsLessThanMinimumInstallmentValue = [];
                    let cardsGreaterThanMinimumInstallmentValue = [];
                    for (let index = 0; index <= this.formPayment.last_available_card; index++) {
                        let card = this.formPayment.credit_cards[index];
                        let amount = this.convertMoneyToFloat(card.amount);
                        if (amount < card.gateway_min_installment_value) {
                            cardsLessThanMinimumInstallmentValue.push({
                                index: index,
                                difference: card.gateway_min_installment_value - amount
                            });
                        }
                    }
                    if (cardsLessThanMinimumInstallmentValue.length > 0) {
                        const totalDifference = cardsLessThanMinimumInstallmentValue.reduce((total, card) => total + card.difference, 0);
                        if (totalDifference > 0) {
                            for (let index = 0; index <= this.formPayment.last_available_card; index++) {
                                let card = this.formPayment.credit_cards[index];
                                let amount = this.convertMoneyToFloat(card.amount);
                                if (amount > card.gateway_min_installment_value + totalDifference) {
                                    cardsGreaterThanMinimumInstallmentValue.push({
                                        index: index,
                                        newAmount: (amount - totalDifference).toFixed(2)
                                    });
                                }
                            }
                            if (cardsGreaterThanMinimumInstallmentValue.length > 0) {
                                cardsLessThanMinimumInstallmentValue.forEach(card => {
                                    this.formPayment.credit_cards[card.index].amount = this.convertFloatToMoney(this.formPayment.credit_cards[card.index].gateway_min_installment_value);
                                });
                                cardsGreaterThanMinimumInstallmentValue.forEach(card => {
                                    this.formPayment.credit_cards[card.index].amount = this.convertFloatToMoney(card.newAmount);
                                });
                            }
                        }
                    }
                    // New validation
                    let totalCardAmount = this.formPayment.credit_cards.reduce((total, card) => total + this.convertMoneyToFloat(card.amount), 0);
                    if (totalCardAmount > this.total()) {
                        let difference = totalCardAmount - this.total();
                        for (let index = this.formPayment.last_available_card; index >= 0; index--) {
                            let card = this.formPayment.credit_cards[index];
                            let amount = this.convertMoneyToFloat(card.amount);
                            if (amount > card.gateway_min_installment_value) {
                                let newAmount = amount - difference;
                                if (newAmount < card.gateway_min_installment_value) {
                                    newAmount = card.gateway_min_installment_value;
                                }
                                this.formPayment.credit_cards[index].amount = this.convertFloatToMoney(newAmount);
                                break;
                            }
                        }
                    }
                },
                //sempre que eu modificar algum amount dos cartoes vai cair aqui.
                setCardValue(el) {
                    const total = this.cart.totals.totalValue;
                    const index = parseInt(el.getAttribute('index'));
                    const gateway_min_installment_value = this.formPayment.credit_cards[index].gateway_min_installment_value;
                    const elValue = this.convertMoneyToFloat(el.value);
                    // vai calcular o total dos cartoes com indice maior que o atual|
                    const furtherCardsTotal = this.calculateCardsTotal(index, 'further');
                    // vai calcular o total dos cartoes com indice menor que o atual|
                    const previousCardsTotal = this.calculateCardsTotal(index, 'previous');

                    if (index <= this.formPayment.last_available_card) {
                        if (elValue > total) {
                            el.value = this.convertFloatToMoney(total - previousCardsTotal - gateway_min_installment_value * (this.formPayment.last_available_card - index));
                        } else if (elValue + furtherCardsTotal > total - previousCardsTotal) {
                            //baseado no total dos indices de cartoes menores que o atual e do atual, vai recalcular o restante para dividir de acordo com o percentual que estava alocado nos cartoes futuros mantem o minimo possivel de passar no gateway
                            this.updateFurtherCards(index, elValue,gateway_min_installment_value);
                            otherCardsTotal = this.calculateCardsTotal(index, 'other');
                            el.value = this.convertFloatToMoney(total - otherCardsTotal);
                        } else if(elValue < gateway_min_installment_value) {
                            el.value = this.convertFloatToMoney(gateway_min_installment_value);
                        }
                    }
                    this.updateCardValues(index, el.value, total);
                },
                calculateCardsTotal(index, type) {
                    return this.formPayment.credit_cards.reduce((sum, card, cardIndex) => {
                        if ((type === 'other' && index !== cardIndex) ||
                            (type === 'further' && cardIndex > index) ||
                            (type === 'previous' && cardIndex < index)) {
                            return sum + this.convertMoneyToFloat(card.amount);
                        }
                        return sum;
                    }, 0);
                },
                //baseado no indice do cartao atual, vai atualizar os valores seguintes baseado no valor restante (soma do indice atual + indices menores que ele) e mantera o percentual relativo que estava alocado em cada cartao de indice maior anteriormente, respeitando o minimun amoutn que o gateway pode passar
                updateFurtherCards(index, currentInputValue, gateway_min_installment_value) {
                    const total = this.cart.totals.totalValue;
                    const previousCardsTotal = this.calculateCardsTotal(index, 'previous');
                    let remainingValue = total - previousCardsTotal;

                    for (let i = index; i <= this.formPayment.last_available_card; i++) {
                        const furtherCards = this.formPayment.last_available_card - i;
                        if (i < this.formPayment.last_available_card && remainingValue - currentInputValue >= gateway_min_installment_value * furtherCards) {
                            this.formPayment.credit_cards[i].amount = this.convertFloatToMoney(currentInputValue);
                            remainingValue -= currentInputValue;
                        } else if (remainingValue >= gateway_min_installment_value) {
                            this.formPayment.credit_cards[i].amount = this.convertFloatToMoney(remainingValue);
                            remainingValue -= remainingValue;
                        } else {
                            this.formPayment.credit_cards[i].amount = this.convertFloatToMoney(gateway_min_installment_value);
                            remainingValue = 0;
                        }
                    }

                    if (remainingValue > 0) {
                        const lastCardIndex = this.formPayment.last_available_card;
                        const lastCardAmount = this.convertMoneyToFloat(this.formPayment.credit_cards[lastCardIndex].amount);
                        this.formPayment.credit_cards[lastCardIndex].amount = this.convertFloatToMoney(lastCardAmount + remainingValue);
                    }
                },
                updateCardValues(index, elValue, total) {
                    let remainingTotal = total;
                    for (let i = 0; i <= this.formPayment.last_available_card; i++) {
                        if (index === i) {
                            this.formPayment.credit_cards[i].amount = elValue;
                            this.formPayment.credit_cards[i].ratio = parseFloat((this.convertMoneyToFloat(elValue) / total).toFixed(8));
                            remainingTotal -= this.convertMoneyToFloat(elValue);
                            this.updateRemainingCards(i, remainingTotal);
                            break;
                        } else {
                            remainingTotal -= this.convertMoneyToFloat(this.formPayment.credit_cards[i].amount);
                        }
                    }
                },
                updateRemainingCards(index, remainingTotal) {
                    const total = this.cart.totals.totalValue;
                    const gateway_min_installment_value = this.formPayment.credit_cards[index].gateway_min_installment_value;
                    for (let j = index + 1; j <= this.formPayment.last_available_card; j++) {
                        remainingTotal -= gateway_min_installment_value * (this.formPayment.last_available_card - j);
                        let nextCardAmount = Math.min(Math.max(remainingTotal, gateway_min_installment_value), remainingTotal);
                        if (nextCardAmount < gateway_min_installment_value) {
                            nextCardAmount = gateway_min_installment_value;
                        }
                        this.formPayment.credit_cards[j].amount = this.convertFloatToMoney(nextCardAmount);
                        this.formPayment.credit_cards[j].ratio = parseFloat((nextCardAmount / total).toFixed(8));
                        remainingTotal -= nextCardAmount;
                    }
                },
                convertMoneyToFloat(value){
                    if (value === "") {
                        return NaN;
                    }
                    return parseFloat(parseFloat((value + "").replace(',', '.')).toFixed(2));
                },
                convertMoneyToInt(value) {
                    if (value === "") {
                        return NaN;
                    }
                    value = value + "";
                    value = value.replace(/[^\d,.-]/g, '');
                    value = value.replace(',', '.');
                    return parseInt(parseFloat(value) * 100);
                },
                convertFloatToMoney(value) {
                    value = parseFloat(value);
                    if (isNaN(value)) {
                        return "0,00";
                    }
                    return value.toFixed(2).replace('.', ',');
                },
                resetSingleCard(index){
                    this.formPayment.credit_cards[index] = {
                        amount: 0,
                        installmentsLimit: 0,
                        gateway_installment_tax: 0,
                        gateway_min_installment_value: 5,
                        interest_free_installments: 0,
                        flip_credit_card: false,
                        number: "",
                        expiration: "",
                        cvv: "",
                        full_name: "",
                    }
                },
                resetMultiCard(){
                    for(let i = 0; i < this.formPayment.last_available_card; i++) {
                        if(i===0) {
                            this.formPayment.credit_cards[i].amount = this.convertFloatToMoney(this.cart.totals.totalValue - this.formPayment.credit_cards[i].gateway_min_installment_value*(this.formPayment.last_available_card-1));
                        }else{
                            this.formPayment.credit_cards[i].amount = this.convertFloatToMoney(this.formPayment.credit_cards[i].gateway_min_installment_value);
                        }
                    }
                },
                addCard(index){
                    this.formPayment.last_available_card++;
                    const totalAmount = this.cart.totals.totalValue;
                    if(index < this.formPayment.max_allowed_cards) {
                        let i = index - 1;
                        while(i >= 0 && this.convertMoneyToFloat(this.formPayment.credit_cards[i].amount) <= this.formPayment.credit_cards[index].gateway_min_installment_value) {
                            i--;
                        }
                        if(i >= 0) {
                            let currentAmount = this.convertMoneyToFloat(this.formPayment.credit_cards[i].amount);
                            this.formPayment.credit_cards[i].amount = this.convertFloatToMoney(currentAmount - this.formPayment.credit_cards[index].gateway_min_installment_value);
                            this.formPayment.credit_cards[i].ratio = parseFloat((this.convertMoneyToFloat(this.formPayment.credit_cards[i].amount) / totalAmount).toFixed(8));
                        }
                        this.formPayment.credit_cards[index].amount= this.convertFloatToMoney(this.formPayment.credit_cards[index].gateway_min_installment_value);
                        this.formPayment.credit_cards[index].ratio = parseFloat((this.convertMoneyToFloat(this.formPayment.credit_cards[index].amount) / totalAmount).toFixed(8));
                    }

                    this.refreshCardsInstallmentsValue();
                },
                removeCard(index){
                    let amountToDistribute = this.convertMoneyToFloat(this.formPayment.credit_cards[index].amount);
                    let amountPerCard = Math.floor(amountToDistribute / (this.formPayment.last_available_card - 1));
                    this.formPayment.last_available_card--;
                    this.formPayment.credit_cards[index].amount=0;
                    this.formPayment.credit_cards[index].ratio=0;

                    for(let i = 0; i  <= this.formPayment.last_available_card ; i++) {
                        let currentAmount = this.convertMoneyToFloat(this.formPayment.credit_cards[i].amount);
                        let newAmount = currentAmount + amountPerCard;
                        if(i === this.formPayment.last_available_card - 2) { // If it's the last card, add the remaining amount to it
                            newAmount += amountToDistribute % (this.formPayment.last_available_card - 1);
                        }
                        this.formPayment.credit_cards[i].amount = this.convertFloatToMoney(newAmount);
                    }
                    this.refreshCardsInstallmentsValue();
                },
                getInstallmentLabelMaxValue() {
                    if (!this.checkoutConfig.credit_card_flag) {
                        return null;
                    }

                    const creditCard = this.formPayment.credit_cards[0];

                    const installmentsLimit = creditCard.installmentsLimit;
                    const gatewayTax = creditCard.gateway_installment_tax;
                    const minInstallmentValue = creditCard.gateway_min_installment_value;
                    const interestFree = creditCard.interest_free_installments;

                    // Usa o valor total da compra, não só do cartão 0
                    const total = this.cart.totals.totalValue * 100;

                    let lastInstallment = null;

                    for (let i = 1; i <= installmentsLimit; i++) {
                        if (this.businessCurrency.toLowerCase() !== 'brl' && i > 1) {
                            break;
                        }

                        let installmentValue;
                        let interest = 0;

                        if (i <= interestFree) {
                            installmentValue = total / i;
                        } else {
                            interest = 1;
                            installmentValue = this.getInstallmentsFormula(total, gatewayTax, i);
                        }

                        if (installmentValue < minInstallmentValue * 100) {
                            continue;
                        }

                        lastInstallment = {
                            amount: i,
                            value: formatCurrencyPrice(installmentValue / 100),
                            interest,
                        };
                    }

                    return lastInstallment ?? '';
                },
                validateAndFetchFreight() {
                    if (this.formShipping.zip_code.length === 9) {
                        this.getFreight();
                        this.getAddress(this.$refs.zip_code.value);
                    }
                },
                applyDiscountAmount(discount, amount, discount_type) {
                    let valueFormated;
                    if (discount_type === 1) {
                        return (amount - discount);
                    } else {
                        valueFormated = amount - ((amount / 100) * discount);
                    }

                    return valueFormated
                },
                trySendPaymentOtherCard() {
                    this.formPayment.credit_cards[0].number = '';
                    this.formPayment.credit_cards[0].expiration = '';
                    this.formPayment.credit_cards[0].cvv = '';
                    this.formPayment.credit_cards[0].full_name = '';

                    this.$refs.creditCardNumber.focus();

                    this.$dispatch('credit-card-refused');
                }
            }
        }
    </script>
  <script>
    const paymentData = () => {
      return {
        async preTokenizeCard(data) {
          const expiration = data.card.expiration.split("/");
          for (const gatewayKey in this.creditCardDependencyGateways) {
            switch (gatewayKey) {

              case '276':
              case '166':
              case '215':
              case '152':
              case '262':
              case '210':
              case '209':
              case '299':
              case '168':
              case '217':
              case '161':
              case '173':
              case '204':
              case '186':
              case '273':
              case '286':
              case '298':
              case '179':
              case '193':
              case '303':
              case '228':
              case '225':
              case '244':
              case '206':
              case '267':
              case '254':
              case '216':
              case '221':
              case '160':
              case '183':
              case '189':
              case '241':
              case '188':
              case '226':
              case '316':
              case '259':
              case '283':
              case '330':
              case '332':
              case '333':
              case '336':
              case '337':
              case '339':
                await window["ShieldHelper"].prepareThreeDS({
                  amount: data.total_amount,
                  installments: data.installments[0],
                  currency: data.business_currency
                });
                break
              case '224':
              case '274':
              case '102':
              case '123':
              case '124':
              case '265':
              case '230':
              case '235':
              case '77':
              case '148':
              case '74':
              case '134':
              case '198':
              case '138':
              case '155':
              case '103':
              case '177':
              case '143':
              case '195':
              case '237':
              case '121':
              case '69':
              case '151':
              case '154':
              case '104':
              case '310':
              {
                const is3dsEnabled=FastSoft.isThreeDSEnabled();
                if(is3dsEnabled){
                  await FastSoft.initializeThreeDS({
                    amount: data.total_amount,
                    installments: parseInt(data.installments[0]),
                    currency: data.business_currency,
                    isDigital: !data.has_freight,
                    card: {
                      number: data.card.number,
                      holderName: data.card.full_name,
                      expMonth: String(expiration[0]),
                      expYear: String("20" + expiration[1]),
                    }
                  });
                  const threeDsResult=await FastSoft.authenticateThreeDS({
                    customer: {
                      name: data.card.full_name,
                      email: data.email,
                      phoneNumber: data.cellphone.replace(/[^a-zA-Z0-9]/g, '')
                    },
                    ...(data.has_freight === true && {
                      address: {
                        street: data.street,
                        streetNumber: data.number,
                        complement: data.complement,
                        zipCode: data.zip_code,
                        neighborhood: data.neighborhood,
                        city: data.city,
                        state: data.state,
                        country: data.country ?? "BR"
                      }
                    })
                  });
                  // Processar baseado no tipo de resposta
                  // handleThreeDSResponse(threeDSResult);
                  if(threeDsResult.type == 'success'){
                    await FastSoft.finalizeThreeDS();
                  }else{
                    throw new Error(threeDsResult.ReturnCode + " - " + threeDsResult.ReturnMessage);
                  }

                }
              }
                break
              case '3':
              case '7':
              case '6':
              case '8':
              case '9':
              case '10':
              case '12':
              case '13':
              case '23':
              case '14':
              case '15':
              case '16':
              case '17':
              case '18':
              case '19':
              case '20':
              case '21':
              case '22':
              case '11':
              case '57':
              case '56':
              case '63':
              case '67':
              case '68':
              case '73':
              case '84':
              case '87':
              case '88':
              case '90':
              case '144':
              case '109':
              case '117':
              case '119':
              case '126':
              case '128':
              case '145':
              case '147':
              case '149':
              case '164':
              case '165':
              case '180':
              case '192':
              case '196':
              case '197':
              case '199':
              case '205':
              case '208':
              case '213':
              case '223':
              case '243':
              case '247':
              case '248':
              case '249':
              case '255':
              case '270':
              case '277':
              case '282':
              case '292':
              case '301':
              case '89':
              case '139':
              case '308':
              case '321':
              case '322':
              {
                const is3dsEnabled= await window[HopyPayHelper.getJsVariableName()].is3DSAvailable();

                if(is3dsEnabled){
                  const card= {
                    number: data.card.number,
                    holderName: data.card.full_name,
                    expMonth: String(expiration[0]),
                    expYear: String("20" + expiration[1]),
                    cvv: data.card.cvv
                  };
                  await window[HopyPayHelper.getJsVariableName()].authenticate3DS({
                    amount: data.total_amount,
                    installments: parseInt(data.installments[0]),
                    currency: data.business_currency.toLowerCase(),
                    card
                  });

                }
              }
                break
              case '136':
              case '137':
              case '158':
              case '159':
              case '162':
              case '163':
              case '169':
              case '176':
              case '184':
              case '191':
              case '218':
              case '232':
              case '238':
              case '240':
              case '264':
              case '268':
              case '285':
              case '288':
              case '304':
              case '319':
              case '328':
              case '329':
              case '331':
              case '334':
                await window["CodiguzHelper"].prepareThreeDS({
                  amount: data.total_amount,
                  installments: data.installments[0],
                  currency: data.business_currency
                });
                break;
            }

          }

        },
        async tokenizeCard(card) {
          const expirations = card.expiration.split("/");
          let tokens = {};
          for (const gatewayKey in this.creditCardDependencyGateways) {
            let token;
            switch (gatewayKey) {
              //shield
              case '276':
              case '166':
              case '215':
              case '152':
              case '262':
              case '210':
              case '299':
              case '168':
              case '217':
              case '161':
              case '173':
              case '204':
              case '186':
              case '273':
              case '286':
              case '298':
              case '179':
              case '193':
              case '303':
              case '228':
              case '225':
              case '244':
              case '206':
              case '267':
              case '254':
              case '216':
              case '221':
              case '160':
              case '183':
              case '189':
              case '241':
              case '188':
              case '226':
              case '316':
              case '259':
              case '283':
              case '330':
              case '332':
              case '333':
              case '336':
              case '337':
              case '339':
                token = await window[moduleName].encrypt({
                  number: card.number,
                  holderName: card.full_name,
                  expMonth: expirations[0],
                  expYear: "20" + expirations[1],
                  cvv: card.cvv,
                });
                break;
              case '190':
              case '314':
                const ch = window.ch.createCh().setBackendUrl(chConfig.base_url).setPublicToken(chConfig.public_key);
                resp = await ch.encrypt({
                  number: card.number,
                  expMonth: expirations[0],
                  expYear: "20" + expirations[1],
                  cvv: card.cvv,
                },
                {
                  amount: card.amount,
                  currency: card.business_currency.toUpperCase(),
                  orderId:  card.checkout_code,
                  customer: { email: card.email },
                  returnUrl:"https://vegacheckout.com.br"
                });
                token=resp.token;
                break;

              case '3':
              case '7':
              case '6':
              case '8':
              case '9':
              case '10':
              case '12':
              case '13':
              case '23':
              case '14':
              case '15':
              case '16':
              case '17':
              case '18':
              case '19':
              case '20':
              case '21':
              case '22':
              case '11':
              case '57':
              case '56':
              case '63':
              case '67':
              case '68':
              case '73':
              case '84':
              case '87':
              case '88':
              case '90':
              case '144':
              case '109':
              case '117':
              case '119':
              case '126':
              case '128':
              case '145':
              case '147':
              case '149':
              case '164':
              case '165':
              case '180':
              case '192':
              case '196':
              case '197':
              case '199':
              case '205':
              case '208':
              case '213':
              case '223':
              case '243':
              case '247':
              case '248':
              case '249':
              case '255':
              case '270':
              case '277':
              case '282':
              case '292':
              case '301':
              case '89':
              case '139':
              case '308':
              case '321':
              case '322':
                token = await window[HopyPayHelper.getJsVariableName()].encrypt({
                  number: card.number,
                  holderName: card.full_name,
                  expMonth: expirations[0],
                  expYear: "20" + expirations[1],
                  cvv: card.cvv,
                });
                break;
              case '30':
              case '31':
              case '33':
              case '32':
              case '49':
              case '61':
              case '64':
              case '66':
              case '79':
              case '81':
              case '82':
              case '91':
              case '92':
              case '93':
              case '94':
              case '95':
              case '167':
              case '260':
              case '275':
              case '220':
                token = await HydraPay.encrypt({
                  number: card.number,
                  holderName: card.full_name,
                  expMonth: expirations[0],
                  expYear: "20" + expirations[1],
                  cvv: card.cvv,
                });
                break;
              case '39':
                const expirationDate = card.expiration.split('/');
                const cardExpirationMonth = expirationDate[0];
                const cardExpirationYear = expirationDate[1];
                let identificationNumber = this.formIdentification.identification_number.replace(/\D/g, '').toString();
                token = await mp.createCardToken({
                  cardNumber: card.number.replaceAll(" ", ""),
                  cardExpirationDate: card.expiration,
                  cardExpirationMonth: cardExpirationMonth, // Mês de expiração
                  cardExpirationYear: cardExpirationYear, // Ano de expiração
                  cardholderName: card.full_name,
                  identificationType: identificationNumber.length === 11 ? 'CPF' : 'CNPJ',
                  identificationNumber: identificationNumber,
                  securityCode: card.cvv,
                });
                break;
              case '41':
                const formTryploPay = document.getElementById('tryplopay-form');
                if (!formTryploPay) {
                  throw new Error('Formulário tryplopay não foi criado corretamente.');
                }

                          const inputsTryploPay = [
                              {attr: 'number', value: card.number},
                              {attr: 'verification_value', value: card.cvv},
                              {attr: 'full_name', value: card.full_name},
                              {attr: 'expiration', value: card.expiration},
                          ];

                          // Atualiza os inputs existentes no formulário
                          inputsTryploPay.forEach(({attr, value}) => {
                              const input = formTryploPay.querySelector(`[data-tryplopay="${attr}"]`);
                              if (input) {
                                  input.value = value;
                              }
                          });

                // // Limpa o valor anterior do hash para forçar o TryploPay a gerar novamente
                // const hiddenHashInput = formTryploPay.querySelector('input[name="tryplo_hash"]');
                // if (hiddenHashInput) {
                //     hiddenHashInput.value = '';
                // }

                // Dispara eventos para simular digitação
                setTimeout(() => {
                  const fields = [
                    '[data-tryplopay="number"]',
                    '[data-tryplopay="expiration"]',
                    '[data-tryplopay="verification_value"]',
                    '[data-tryplopay="full_name"]',
                  ];

                              fields.forEach(selector => {
                                  const el = document.querySelector(`#tryplopay-form ${selector}`);
                                  if (el) {
                                      // Simula a digitação do usuário disparando evento 'input'
                                      el.dispatchEvent(new Event('input', {bubbles: true}));
                                  }
                              });
                          }, 500);

                // Faz polling para verificar se o token tryplo_hash foi preenchido pelo script TryploPay
                token = null;
                for (let i = 0; i < 3; i++) {
                  await new Promise(resolve => setTimeout(resolve, 2000));
                  const tokenInput = formTryploPay.querySelector('input[name="tryplo_hash"]');
                  if (tokenInput && tokenInput.value) {
                    token = tokenInput.value;
                    break;
                  }
                }

                if (!token) {
                  throw new Error('Ocorreu um erro ao gerar a cobran\u00e7a, tente em instantes.');
                }
                break;

              case '83':
                token = await EzzyPag.encrypt({
                  number: card.number,
                  holderName: card.full_name,
                  expMonth: expirations[0],
                  expYear: "20" + expirations[1],
                  cvv: card.cvv,
                });
                break;

              case '142':
                const formSuperPay = document.getElementById('superpay-form');
                if (!formSuperPay) {
                  throw new Error('Formulário superpay não foi criado corretamente.');
                }

                          const inputsSuperPay = [
                              {attr: 'number', value: card.number},
                              {attr: 'verification_value', value: card.cvv},
                              {attr: 'full_name', value: card.full_name},
                              {attr: 'expiration', value: card.expiration},
                          ];

                          // Atualiza os inputs existentes no formulário
                          inputsSuperPay.forEach(({attr, value}) => {
                              const input = formSuperPay.querySelector(`[data-twhite="${attr}"]`);
                              if (input) {
                                  input.value = value;
                              }
                          });

                // // Limpa o valor anterior do hash para forçar o SuperPay a gerar novamente
                // const hiddenHashInput = formSuperPay.querySelector('input[name="tryplo_hash"]');
                // if (hiddenHashInput) {
                //     hiddenHashInput.value = '';
                // }

                // Dispara eventos para simular digitação
                setTimeout(() => {
                  const fields = [
                    '[data-twhite="number"]',
                    '[data-twhite="expiration"]',
                    '[data-twhite="verification_value"]',
                    '[data-twhite="full_name"]',
                  ];

                              fields.forEach(selector => {
                                  const el = document.querySelector(`#superpay-form ${selector}`);
                                  if (el) {
                                      // Simula a digitação do usuário disparando evento 'input'
                                      el.dispatchEvent(new Event('input', {bubbles: true}));
                                  }
                              });
                          }, 500);

                // Faz polling para verificar se o token twhite_hash foi preenchido pelo script
                token = null;
                for (let i = 0; i < 3; i++) {
                  await new Promise(resolve => setTimeout(resolve, 2000));
                  const tokenInput = formSuperPay.querySelector('input[name="twhite_hash"]');
                  if (tokenInput && tokenInput.value) {
                    token = tokenInput.value;
                    break;
                  }
                }

                if (!token) {
                  throw new Error('Ocorreu em erro ao gerar a cobran\u00e7a, tente em instantes.');
                }
                break;

              case '202':
                token = await DomPagamentos.encrypt({
                  number: card.number,
                  holderName: card.full_name,
                  expMonth: expirations[0],
                  expYear: "20" + expirations[1],
                  cvv: card.cvv,
                });
                break;

              case '69':
              case '74':
              case '77':
              case '102':
              case '103':
              case '104':
              case '123':
              case '124':
              case '130':
              case '134':
              case '138':
              case '143':
              case '151':
              case '154':
              case '155':
              case '177':
              case '182':
              case '195':
              case '198':
              case '224':
              case '230':
              case '231':
              case '235':
              case '237':
              case '265':
              case '274':
              case '310':
                token = await
                  FastSoft.encrypt({
                    number: card.number,
                    holderName: card.full_name,
                    expMonth: expirations[0],
                    expYear: "20" + expirations[1],
                    cvv: card.cvv,
                  });
                break;

              case '305':
                const sanitizedCardNumber = card.number.replace(/\s+/g, '');

                token = await tokenizeCard({
                  number: sanitizedCardNumber,
                  holderName: card.full_name,
                  expMonth: parseInt(expirations[0]),  // Ex: "05" → 5
                  expYear: parseInt("20" + expirations[1]), // Ex: "26" → 2026
                  cvv: card.cvv,
                }, window.cupulaIntegrationToken);

                token = token?.cardHash;

                break;
              case '269':
              case '52':
              case '55':
              case '54':
              case '256':
              case '234':
              case '53':
              case '172':
                token = await window.AVCardToken({
                  number: card.number,
                  holderName: card.full_name,
                  expMonth: expirations[0],
                  expYear: "20" + expirations[1],
                  cvv: card.cvv,
                });
                break;
              case '136':
              case '137':
              case '158':
              case '159':
              case '162':
              case '163':
              case '169':
              case '176':
              case '184':
              case '191':
              case '218':
              case '232':
              case '238':
              case '240':
              case '264':
              case '268':
              case '285':
              case '288':
              case '304':
              case '319':
              case '328':
              case '329':
              case '331':
              case '334':
              {
                const resp = await window[moduleName].encrypt({
                  number: card.number,
                  holderName: card.full_name,
                  expMonth: expirations[0],
                  expYear: "20" + expirations[1],
                  cvv: card.cvv,
                  amount: card.amount,
                  installments: card.installments,
                });
                token = resp['id'];
              }
                break;
              case '338':
                  if (!window.Payevo || typeof window.Payevo.encrypt !== 'function') {
                      throw new Error('Payevo SDK not loaded');
                  }

                  const cardNumber = (card.number || '').replace(/\s+/g, '');

                  const [mmRaw, yyRaw] = (card.expiration || '').split('/').map(s => (s || '').trim());
                  const expMonth = (mmRaw || '').padStart(2, '0');
                  const expYear  = (yyRaw && yyRaw.length === 2) ? `20${yyRaw}` : (yyRaw || '');

                  token = await Payevo.encrypt({
                      number: cardNumber,
                      holderName: card.full_name,
                      expMonth: expMonth,
                      expYear: expYear,
                      cvv: card.cvv,
                      amount: card.amount,
                  });

                  break;
              case '340': {
                  try {
                      // garante helper disponível
                      if (!window.CieloHelper || typeof window.CieloHelper.prepareThreeDS !== 'function') {
                          token = ''; //Vai proseguir para tentar fazer pagamento normal com Authenticate = false no back
                          break;
                      }

                      const orderNumber = String(
                          this.transaction_token ||
                          this.order_number ||
                          (this.order && this.order.number) ||
                          Date.now()
                      );

                      await window.CieloHelper.prepareThreeDS({
                          amount: card.amount,
                          installments: parseInt(card.installments, 10),
                          currency: this.business_currency || 'BRL',
                          orderNumber
                      });

                      const [mmRaw, yyRaw] = (card.expiration || '').split('/').map(s => (s || '').trim());
                      const expMonth = String(mmRaw || '').padStart(2,'0');
                      const expYear  = (yyRaw && yyRaw.length === 2) ? `20${yyRaw}` : (yyRaw || '');

                      // autentica
                      const threeDsResult = await window.CieloHelper.authenticateThreeDS({
                          number: (card.number || '').replace(/\s+/g, ''),
                          holderName: card.full_name,
                          expMonth,
                          expYear,          // 4 dígitos
                          orderNumber
                      });

                      const dataOnly =
                          (document.querySelector('.bpmpi_auth_notifyonly')?.value === 'true');

                      // Objeto com as chaves do ExternalAuthentication
                      token = {
                          Eci:         threeDsResult?.Eci ?? null,
                          ReferenceId: threeDsResult?.ReferenceId ?? null,
                          Cavv:        threeDsResult?.Cavv ?? null,
                          Xid:         threeDsResult?.Xid ?? null,
                          Version:     threeDsResult?.Version ?? null,
                          DataOnly:    !!dataOnly
                      };
                  } catch (err) {
                      // console.warn('[Cielo3DS] falha no fluxo 3DS, seguindo sem autenticação:', err);
                      // fallback: prossegue sem 3DS para o back decidir (Authenticate=false)
                      token = '';
                  }
              }
                  break;
            }
            tokens[gatewayKey] = token;
          }
          return tokens;
        },
        async postTokenizeCard(data){
          for (const gatewayKey in this.creditCardDependencyGateways) {
            switch (gatewayKey) {
              case '276':
              case '166':
              case '215':
              case '152':
              case '262':
              case '210':
              case '299':
              case '168':
              case '217':
              case '161':
              case '173':
              case '204':
              case '186':
              case '273':
              case '286':
              case '298':
              case '179':
              case '193':
              case '303':
              case '228':
              case '225':
              case '244':
              case '206':
              case '267':
              case '254':
              case '216':
              case '221':
              case '160':
              case '183':
              case '189':
              case '241':
              case '188':
              case '226':
              case '316':
              case '259':
              case '283':
              case '330':
              case '332':
              case '333':
              case '336':
              case '337':
              case '339':
                await window["ShieldHelper"].finishThreeDS(data.transaction, {
                  disableRedirect: data.redirect
                });
                break
            }
          }
        },
      };
    };
  </script>
    <script>
        const cartData = () => {
            return {
                cart: {
                    items: [],
                    totals: {
                        totalValueFormatted: '0,00',
                        totalValue: 0,
                        subTotalValueFormatted: '0,00',
                        subTotalValue: 0,
                        pixTotalFormatted: '0,00',
                        billetTotalFormatted: '0,00',
                        discounts: {
                            automatic: {
                                label: '',
                                totalValue: 0,
                                totalValueFormatted: '0,00',
                            },
                            coupon: {
                                label: '',
                                code: '',
                                name: '',
                                products: [],
                                attachProductTypeEnum: 0,
                                discountValueTypeEnum: 0,
                                value: 0,
                                totalValue: 0,
                                totalValueFormatted: '0,00',
                                trigger_applied_coupon_toast: true,
                            },
                            progressive: {
                                label: '',
                                progressive_discount_code: '',
                                discount_code: '',
                                name: '',
                                products: [],
                                attachProductTypeEnum: 0,
                                discountValueTypeEnum: 0,
                                value: 0,
                                totalValue: 0,
                                totalValueFormatted: '0,00',
                                trigger_applied_coupon_toast: true,
                            },
                        },
                        freight: 0,
                    },
                },
                total() {
                    const subTotal = this.totalItems();
                    this.cart.totals.subTotalValue = subTotal / 100;
                    this.cart.totals.subTotalValueFormatted = formatCurrencyPrice(subTotal / 100);

                    const discountAutomatic = this.totalDiscountAutomatic();
                    let total = discountAutomatic > 0 ? subTotal - discountAutomatic : subTotal;
                    if (this.cart.totals.discounts.coupon.totalValue > 0) {
                        total -= (this.cart.totals.discounts.coupon.totalValue);
                    }
                    if (this.cart.totals.discounts.progressive.totalValue > 0) {
                        total -= (this.cart.totals.discounts.progressive.totalValue);
                    }
                    if (this.cart.totals.freight > 0) {
                        total += this.cart.totals.freight;
                    }
                    this.cart.totals.totalValue = total / 100;
                    this.cart.totals.totalValueFormatted = formatCurrencyPrice(total / 100);

                    this.setTotalValueInLocalStorage(this.cart.totals.totalValue);
                },
                setTotalValueInLocalStorage(value) {
                    localStorage.setItem('checkout-total', value)
                },
                totalDiscountAutomatic() {
                    let discount = 0;
                    let amount = this.cart.totals.discounts.coupon.totalValue
                        ? (this.cart.totals.subTotalValue - (this.cart.totals.discounts.coupon.totalValue) / 100).toFixed(2)
                        : (this.cart.totals.discounts.progressive.totalValue
                            ? (this.cart.totals.subTotalValue - (this.cart.totals.discounts.progressive.totalValue / 100)).toFixed(2)
                            : this.cart.totals.subTotalValue.toFixed(2));

                    switch (this.formPayment.payment_method) {
                        case 2:
                            discount = amount * this.checkoutConfig.credit_card_automatic_discount;
                            break;
                        case 1:
                            discount = amount * this.checkoutConfig.billet_automatic_discount;
                            break;
                        case 3:
                            discount = amount * this.checkoutConfig.pix_automatic_discount;
                            break;
                    }
                    this.cart.totals.discounts.automatic.totalValue = discount / 100;
                    this.cart.totals.discounts.automatic.totalValueFormatted = formatCurrencyPrice(discount / 100);
                    return (discount/100).toFixed(2) * 100;
                },
                totalItems() {
                    let total = 0;
                    this.cart.items.forEach((item) => {
                        if (item.variants.length) {
                            total += this.totalVariants(item);
                        } else {
                            total += item.amount * (item.quantity || 1);
                        }
                    });
                    return total;
                },
                totalVariants(item) {
                    let total = 0;
                    item.variants.forEach((variant) => {
                        total += variant.amount * (variant.quantity || 1);
                    });
                    return total;
                },
                setupCart() {
                    this.products.forEach((product) => {
                        if (product.hasOwnProperty("primaryVariants") && product.primaryVariants.length > 0) {
                            if(this.checkoutTypeEnum !== 4) {
                                let selectedPrimary = product.primaryVariants.find((p) => p.selected_flag);
                                selectedPrimary = selectedPrimary ? selectedPrimary : product.primaryVariants.find(p => true);
                                selectedPrimary.selected_flag = true;
                                selectedPrimary.quantity = selectedPrimary.quantity || product.quantity;
                                selectedPrimary.expanded = true;
                                if (selectedPrimary.hasOwnProperty("secondaryVariants") && selectedPrimary.secondaryVariants.length > 0) {
                                    let selectedSecondary = selectedPrimary.secondaryVariants.find((s) => s.selected_flag);
                                    selectedSecondary = selectedSecondary ? selectedSecondary : selectedPrimary.secondaryVariants.find(s => true);
                                    selectedSecondary.selected_flag = true;
                                    selectedSecondary.quantity = selectedSecondary.quantity || product.quantity;
                                    selectedSecondary.expanded = true;

                                    this.cart.items.push(this.buildCartItem(product, selectedPrimary, selectedSecondary));
                                } else {
                                    this.cart.items.push(this.buildCartItem(product, selectedPrimary, null));
                                }
                            }
                            else {
                                let cartItem = null;
                                product.primaryVariants.forEach((primaryVariant) => {
                                    if(primaryVariant.selected_flag) {
                                        cartItem = this.cart.items.find((item) => item.code === product.code);
                                        let selectedPrimary = primaryVariant;
                                        selectedPrimary.selected_flag = true;
                                        selectedPrimary.quantity = selectedPrimary.quantity || product.quantity;
                                        if (selectedPrimary.hasOwnProperty("secondaryVariants") && selectedPrimary.secondaryVariants.length > 0) {
                                            selectedPrimary.secondaryVariants.forEach((secondaryVariant) => {
                                                if(secondaryVariant.selected_flag) {
                                                    let selectedSecondary = secondaryVariant;
                                                    selectedSecondary.selected_flag = true;
                                                    selectedSecondary.quantity = selectedSecondary.quantity || product.quantity;
                                                    cartItem = this.cart.items.find((item) => item.code === product.code);
                                                    if (cartItem) {
                                                        cartItem.variants.push({
                                                            "primary_code": selectedPrimary.code,
                                                            "secondary_code": selectedSecondary.code || null,
                                                            'primary_tag': selectedPrimary.tag,
                                                            'secondary_tag': selectedSecondary.tag || '',
                                                            "quantity": selectedSecondary.quantity || selectedPrimary.quantity || product.quantity,
                                                            "amount": this.getProductAmount(product, selectedPrimary, selectedSecondary),
                                                            'variant_price_code': selectedSecondary.variant_price_code || selectedPrimary.variant_price_code,
                                                            "selected_flag": true,
                                                            "expanded": true,
                                                        });
                                                    } else {
                                                        this.cart.items.push(this.buildCartItem(product, selectedPrimary, selectedSecondary));
                                                    }
                                                }
                                            });
                                        } else {
                                            if (cartItem) {
                                                cartItem.variants.push({
                                                    "primary_code": selectedPrimary.code,
                                                    "secondary_code": null,
                                                    'primary_tag': selectedPrimary.tag,
                                                    'secondary_tag': '',
                                                    "quantity": selectedPrimary.quantity || product.quantity,
                                                    "amount": this.getProductAmount(product, selectedPrimary, null),
                                                    'variant_price_code': selectedPrimary.variant_price_code,
                                                    "selected_flag": true,
                                                    "expanded": true,
                                                });
                                            } else {
                                                this.cart.items.push(this.buildCartItem(product, selectedPrimary, null));
                                            }
                                        }
                                    }
                                });
                                if (cartItem?.variants?.length) {
                                    cartItem.variants.forEach((variant, index) => {
                                        variant.expanded = cartItem?.variants.length === index+1;
                                    });
                                }
                            }
                        } else {
                            this.cart.items.push({
                                'code': product.code,
                                'price_type_enum': product.price_type_enum,
                                'product_price_code': product.product_price_code,
                                'variant_flag': product.variant_flag,
                                'order_bump_code': product.order_bump_code || null,
                                'amount': product.amount,
                                'amount_with_discount': 0,
                                'quantity': product.quantity,
                                'variants': [],
                            });
                        }
                    });
                    this.$watch("cart", () => {
                        this.total();
                        this.formPayment.credit_cards.forEach((card, i) => {
                            this.getInstallments(i);
                        });
                    }, { deep: true });

                    //Observa alteração nos items como quantidade, adicionar ou remover variante ...
                    this.$watch("cart.items", () => {
                        this.validateAndFetchFreight();
                        this.discountProgressive();
                    }, { deep: true });

                    //Observa alteração nos tipo de pagamento ...
                    this.$watch("formPayment.payment_method", () => {
                        this.discountProgressive();
                    }, { deep: true });

                    this.total();
                    // console.log("cart", this.cart.items);
                },
                buildCartItem(product, primary, secondary, isOrderBump = false) {
                    return {
                        code: product.code,
                        unique_key: product.unique_key,
                        is_order_bump: isOrderBump,
                        price_type_enum: product.price_type_enum,
                        product_price_code: product.product_price_code,
                        variant_flag: product.variant_flag,
                        order_bump_code: product.order_bump_code || null,
                        variants: [
                            {
                                unique_key: primary.unique_key,
                                primary_code: primary.code,
                                secondary_code: secondary?.code || null,
                                variant_price_code: secondary?.variant_price_code || primary.variant_price_code,
                                primary_tag: primary.tag,
                                secondary_tag: secondary?.tag || '',
                                quantity: secondary?.quantity || primary.quantity || product.quantity,
                                amount: isOrderBump ? product.amount : this.getProductAmount(product, primary, secondary),
                                amount_with_discount: 0,
                                selected_flag: true,
                                expanded: true,
                            }
                        ],
                    };
                },
                removeObjectReference(object) {
                    return JSON.parse(JSON.stringify(object));
                },
                showViewMore(element, clampClass) {
                    const clone = element.cloneNode(true);
                    clone.classList.remove(clampClass);
                    clone.style.position = "absolute";
                    clone.style.visibility = "hidden";
                    clone.style.height = "auto";
                    clone.style.width = element.offsetWidth + "px";
                    clone.style.webkitLineClamp = "none";

                    document.body.appendChild(clone);

                    const clampedHeight = element.offsetHeight;
                    const fullHeight = clone.offsetHeight;
                    document.body.removeChild(clone);

                    return fullHeight > clampedHeight;
                },
                shouldShowRemoveItem() {
                    return this.products.length > 1 && this.canRemoveProducts;
                },
                getProductAmount(product, selectedPrimary = null, selectedSecondary = null) {
                    let amount = product.amount;
                    if (product.price_type_enum === 2) {
                        amount = selectedPrimary?.amount || product.amount;
                    } else if (product.price_type_enum === 3) {
                        amount = selectedSecondary?.amount || product.amount;
                    }
                    return amount;
                },
                async validateCouponDiscount() {
                    if(this.cart.totals.discounts.progressive.discount_code !== '') {
                        //Não aplica cupom de desconto caso ja tenha desconto progressivo aplicado
                        showToast({
                            type: "info",
                            title: "Cupom não aplicado",
                            message: 'Não foi possível aplicar cupom, pois você possui desconto automático com base na quantidade de itens do checkout',
                        });

                        this.cart.totals.discounts.coupon.code = '';

                        return;
                    }
                    const total = Math.round(this.cart.totals.totalValue * 100)
                    const coupon_code = this.cart.totals.discounts.coupon.code;
                    const headers = { headers: {"X-CSRF-TOKEN": 'n2CL9wANyZUJ7z200UsHYpGO22c9dseFPHX1JfsN'} };
                    const products = this.products.filter(product => !product.order_bump_code);
                    const business_code = this.business.code;
                    const payload = {
                        coupon_code,
                        total,
                        products,
                        business_code
                    };

                    try {
                        const { data } = await axios.post(
                            "https://checkout.ligafacil.online/api/discountCoupon",
                            payload,
                            headers
                        );

                        if (this.cart.totals.discounts.coupon.value > 0) this.cart.totals.discounts.coupon.trigger_applied_coupon_toast = false;


                        const couponValue= data.value_type_enum !== 2 ? data.value * this.localization.localized_currency_quote ?? 1 : data.value;
                        this.cart.totals.discounts.coupon.label = data.name;
                        this.cart.totals.discounts.coupon.attachProductTypeEnum = data.attach_type_enum;
                        this.cart.totals.discounts.coupon.discountValueTypeEnum = data.value_type_enum;
                        this.cart.totals.discounts.coupon.value = couponValue;
                        this.cart.totals.discounts.coupon.valueInBusinesssCurrency = data.value;
                        this.cart.totals.discounts.coupon.totalValue = couponValue * 100;
                        this.cart.totals.discounts.coupon.totalValueFormatted = formatCurrencyPrice(couponValue);
                        this.cart.totals.discounts.coupon.products = data.products;
                        this.applyCouponDiscount();
                    } catch(e) {
                        //Garante que será removido qual quer resquício do cupom anterior caso tenha
                        this.removeDiscountCoupon();

                        this.cart.totals.discounts.coupon.code = '';

                        showToast({
                            type: "info",
                            title: "Cupom não aplicado",
                            message: e.response.data.message,
                        });
                    }
                },
                applyCouponDiscount() {
                    if (this.cart.totals.discounts.coupon.value > 0) {
                        const coupon = this.cart.totals.discounts.coupon;
                        coupon.value = coupon.value * 100

                        if (coupon.value <= 0) return;

                        const isPercent = coupon.discountValueTypeEnum === 2;
                        const isSpecific = coupon.attachProductTypeEnum === 2;

                        // Desconto percentual global
                        if (isPercent) {
                            const total = ((this.cart.totals.subTotalValue * coupon.value) / 100 / 100).toFixed(2);
                            coupon.totalValue = total * 100;
                            coupon.totalValueFormatted = formatCurrencyPrice(total);
                        }

                        // Desconto por produto
                        if (isSpecific) {
                            this.applySpecificProductDiscount(
                                coupon,
                                coupon.discountValueTypeEnum,
                                coupon.value,
                                coupon.products
                            );
                        }

                        if (coupon.trigger_applied_coupon_toast) {
                            this.showDiscountToast();
                        }
                    }
                },
                removeDiscountCoupon() {
                    this.showDiscountToast(false);
                    this.cart.items.forEach(cartItem => {
                        if (cartItem.hasOwnProperty('order_bump_code')) {
                            return;
                        }

                        if (cartItem.hasOwnProperty('amount_with_discount')) {
                            delete cartItem.amount_with_discount;
                        }

                        if (cartItem.variants.length) {
                            cartItem.variants.forEach(variant => {
                                if (variant.hasOwnProperty('amount_with_discount')) {
                                    delete variant.amount_with_discount;
                                }
                            });
                        }
                    });

                    this.cart.totals.discounts.coupon = {
                        label: '',
                        code: '',
                        name: '',
                        products: [],
                        attachProductTypeEnum: 0,
                        discountValueTypeEnum: 0,
                        value: 0,
                        totalValue: 0,
                        totalValueFormatted: '0,00',
                        trigger_applied_coupon_toast: true,
                    };
                },
                showDiscountToast(isAdding = true) {
                    const actionText = isAdding ? "aplicado" : "removido";
                    const toastType = isAdding ? "success" : "info";
                    const title = `Cupom ${actionText} com sucesso!`;

                    let message = '';
                    if (this.cart.totals.discounts.coupon.attachProductTypeEnum === 1) {
                        message = this.cart.totals.discounts.coupon.discountValueTypeEnum === 1
                            ? `Desconto de ${getCurrencySymbol()} ${formatCurrencyPrice(this.cart.totals.discounts.coupon.totalValue/100)} ${actionText}!`
                            : `Desconto de ${(this.cart.totals.discounts.coupon.value/100)}% ${actionText}!`;
                    } else if (this.cart.totals.discounts.coupon.attachProductTypeEnum === 2) {
                        const productTitles = this.cart.totals.discounts.coupon.products.map(product => product.product_title).join(', ');
                        message = this.cart.totals.discounts.coupon.discountValueTypeEnum === 1
                            ? `Desconto de ${getCurrencySymbol()} ${formatCurrencyPrice(this.cart.totals.discounts.coupon.totalValue/100)} ${actionText} no(s) ${productTitles}`
                            : `Desconto de ${(this.cart.totals.discounts.coupon.value)/100}% ${actionText} no(s) ${productTitles}`;
                    }

                    showToast({
                        type: toastType,
                        title: title,
                        message: message,
                    });
                },
                async discountProgressive() {
                    if(this.cart.totals.discounts.coupon.value > 0 || !this.hasProgressiveDiscount) {
                        //Não aplica desconto progressivo caso ja tenha um cupom de desconto aplicado
                        return;
                    }
                    const payment_type_enum = parseInt(this.formPayment.payment_method);
                    const quantity_items = parseInt(this.cart.items.reduce((total, item) => {
                        let itemQuantity = item.quantity || 0;

                        // Se houver variantes, soma suas quantidades também
                        if (item.variants && item.variants.length > 0) {
                            itemQuantity += item.variants.reduce((variantTotal, variant) => variantTotal + (variant.quantity || 0), 0);
                        }

                        return total + itemQuantity;
                    }, 0));

                    const headers = { headers: {"X-CSRF-TOKEN": 'n2CL9wANyZUJ7z200UsHYpGO22c9dseFPHX1JfsN'} };
                    const products = this.products.filter(product => !product.order_bump_code);
                    const business_code = this.business.code;
                    const discount_type_enum = 2;
                    const payload = {
                        quantity_items,
                        products,
                        business_code,
                        discount_type_enum,
                        payment_type_enum
                    };

                    try {
                        const { data } = await axios.post(
                            "https://checkout.ligafacil.online/api/discountProgressive",
                            payload,
                            headers
                        );

                        if (this.cart.totals.discounts.progressive.value > 0) this.cart.totals.discounts.progressive.trigger_applied_coupon_toast = false;

                        if(data.progressive_discount_code) {
                            this.cart.totals.discounts.progressive.label = 'Desconto automático ('+ data.name + ')';
                            this.cart.totals.discounts.progressive.attachProductTypeEnum = data.attach_type_enum;
                            this.cart.totals.discounts.progressive.discount_code = data.discount_code;
                            this.cart.totals.discounts.progressive.progressive_discount_code = data.progressive_discount_code;
                            this.cart.totals.discounts.progressive.discountValueTypeEnum = data.value_type_enum;
                            this.cart.totals.discounts.progressive.value = data.value;
                            this.cart.totals.discounts.progressive.totalValue = data.value;
                            this.cart.totals.discounts.progressive.totalValueFormatted = formatCurrencyPrice(data.value / 100);
                            this.cart.totals.discounts.progressive.products = data.products;
                            this.applyProgressiveDiscount();
                        } else {
                            this.removeDiscountProgressive();
                        }
                    } catch(e) {
                        console.log(e.response?.data?.message); //log para identificar o porque não pegou
                    }
                },
                applyProgressiveDiscount() {
                    const progressive = this.cart.totals.discounts.progressive;

                    if (progressive.value <= 0) return;

                    const isPercent = progressive.discountValueTypeEnum === 2;
                    const isSpecific = progressive.attachProductTypeEnum === 2;

                    // Desconto percentual global
                    if (isPercent) {
                        const total = ((this.cart.totals.subTotalValue * progressive.value) / 100 / 100).toFixed(2);
                        progressive.totalValue = total * 100;
                        progressive.totalValueFormatted = formatCurrencyPrice(total);
                    }

                    // Desconto por produto
                    if (isSpecific) {
                        this.applySpecificProductDiscount(
                            progressive,
                            progressive.discountValueTypeEnum,
                            progressive.value,
                            progressive.products
                        );
                    }

                    if (progressive.trigger_applied_coupon_toast) {
                        showToast({
                            type: 'success',
                            title: "Desconto automático aplicado",
                            message: "Desconto automático com base na quantidade de itens aplicado com sucesso",
                        });
                    }
                },
                removeDiscountProgressive() {
                    if (this.cart.totals.discounts.progressive.discount_code !== '') {
                        this.cart.totals.discounts.progressive.progressive_discount_code = '';
                        this.cart.totals.discounts.progressive.discount_code = '';
                        this.cart.totals.discounts.progressive.name = '';
                        this.cart.totals.discounts.progressive.products = [];
                        this.cart.totals.discounts.progressive.attachProductTypeEnum = 0;
                        this.cart.totals.discounts.progressive.discountValueTypeEnum = 0;
                        this.cart.totals.discounts.progressive.value = 0;
                        this.cart.totals.discounts.progressive.totalValue = 0;
                        this.cart.totals.discounts.progressive.totalValueFormatted = '0,00';
                        this.cart.totals.discounts.progressive.trigger_applied_coupon_toast = true;

                        showToast({
                            type: 'info',
                            title: "Desconto automático removido",
                            message: "Desconto automático com base na quantidade de itens removido",
                        });
                    }
                },
                applySpecificProductDiscount(discountData, discountTypeEnum, discountValue, productList) {
                    let totalDiscount = 0;

                    this.cart.items.forEach(item => {
                        if (item.is_order_bump) return;

                        const itemTarget = productList.find(p => p.product_code === item.code);
                        if (!itemTarget) return;

                        // Produto sem variantes
                        if (!item.variants.length) {
                            const amount = item.amount * item.quantity;
                            const discount = this.applyDiscountValue(amount, discountTypeEnum, discountValue);
                            this.setDiscountedAmount(item, amount, discount);
                            totalDiscount += discount;
                            return;
                        }

                        // Produto com variantes sem variante específica
                        if (!itemTarget.variant_code) {
                            let productSubtotal = 0;
                            const variantTotals = item.variants.map(variant => {
                                const total = this.calculateVariantTotal(variant, item.amount);
                                productSubtotal += total;
                                return { variant, total };
                            });

                            const productDiscount = this.applyDiscountValue(productSubtotal, discountTypeEnum, discountValue);
                            totalDiscount += productDiscount;

                            let accumulated = 0;
                            variantTotals.forEach(({ variant, total }, index) => {
                                const isLast = index === variantTotals.length - 1;
                                const portion = isLast
                                    ? productDiscount - accumulated
                                    : Math.round((total / productSubtotal) * productDiscount);

                                this.setDiscountedAmount(variant, total, portion);
                                accumulated += portion;
                            });

                            return;
                        }

                        // Produto com variante específica
                        item.variants.forEach(variant => {
                            if (variant.code !== itemTarget.variant_code) return;

                            const subtotal = this.calculateVariantTotal(variant, item.amount);
                            const discount = this.applyDiscountValue(subtotal, discountTypeEnum, discountValue);
                            this.setDiscountedAmount(variant, subtotal, discount);
                            totalDiscount += discount;
                        });
                    });

                    discountData.totalValue = totalDiscount;
                    discountData.totalValueFormatted = formatCurrencyPrice(totalDiscount / 100);
                },
                calculateVariantTotal(variant, fallbackAmount) {
                    const qty = variant.quantity ?? 1;
                    const baseAmount = variant.amount ?? fallbackAmount ?? 0;
                    let total = baseAmount * qty;

                    if (variant.secondaryVariants?.length) {
                        variant.secondaryVariants.forEach(sec => {
                            const secQty = sec.quantity ?? 1;
                            const secAmount = sec.amount ?? baseAmount;
                            total += secAmount * secQty;
                        });
                    }

                    return total;
                },
                setDiscountedAmount(target, original, discount) {
                    const discounted = original - discount;
                    if (target.amount_with_discount !== discounted) {
                        target.amount_with_discount = discounted;
                    }
                },

                applyDiscountValue(amount, type, value) {
                    return type === 1
                        ? value
                        : Math.round((amount * value) / 10000);
                },

                applyDiscountToVariants(item, itemTarget, fallbackAmount, discountType, value) {
                    let productSubtotal = 0;

                    const variantTotals = item.variants.map(variant => {
                        const total = this.calculateVariantTotal(variant, fallbackAmount);
                        productSubtotal += total;
                        return { variant, total };
                    });

                    const productDiscount = this.applyDiscountValue(productSubtotal, discountType, value);
                    let accumulated = 0;

                    variantTotals.forEach(({ variant, total }, index) => {
                        const isLast = index === variantTotals.length - 1;
                        const portion = isLast
                            ? productDiscount - accumulated
                            : Math.round((total / productSubtotal) * productDiscount);

                        this.setDiscountedAmount(variant, total, portion);
                        accumulated += portion;
                    });

                    return productDiscount;
                },
                setQuantityProduct(code, quantity) {
                    const selectedItem = this.cart.items.find(
                        item => item.code === code && item.order_bump_code === null
                    );

                    if (!selectedItem) return;

                    selectedItem.quantity = quantity;
                },
                removeItem(productCode, primaryVariantCode = null, secondaryVariantCode = null) {
                    const selectedProduct = this.products.find(item => item.code === productCode);
                    const cartItem = this.cart.items.find(item => item.code === productCode);

                    if (!selectedProduct || !cartItem) return;

                    // Encontra o índice do variant no carrinho que corresponde às variantes primária e (se houver) secundária
                    const variantIndexInCart = cartItem.variants.findIndex(v =>
                        v.primary_code === primaryVariantCode &&
                        (secondaryVariantCode ? v.secondary_code === secondaryVariantCode : true)
                    );

                    //Remove produto simples sem variante
                    if(variantIndexInCart === -1 && primaryVariantCode === null && productCode !== null) {
                        //Caso so tenha um produto não deixa remover
                        if (this.products.length === 1) return;

                        //Remove produto simples sem variante
                        this.cart.items = this.cart.items.filter(item => item.code !== productCode);
                        this.products = this.products.filter(item => item.code !== productCode);
                        return;
                    }

                    if (variantIndexInCart === -1) return;

                    // Busca a variante primária dentro do produto selecionado
                    const selectedPrimaryVariant  = selectedProduct.primaryVariants.find(v => v.code === primaryVariantCode);

                    // Caso esteja removendo uma variante secundária específica
                    if (secondaryVariantCode) {
                        const selectedSecondaryVariant  = selectedPrimaryVariant .secondaryVariants.find(sec => sec.code === secondaryVariantCode);
                        if (selectedSecondaryVariant ) {
                            selectedSecondaryVariant .selected_flag = false;

                            // Verifica se ainda existe alguma secundária marcada na primária
                            const hasAnySecondarySelected = selectedPrimaryVariant .secondaryVariants.some(sec => sec.selected_flag);
                            if (!hasAnySecondarySelected) {
                                // Se não sobrar nenhuma secundária ativa, desmarca a variante primária também
                                selectedPrimaryVariant .selected_flag = false;
                            }
                        }

                        // Remove a combinação de variantes (primária + secundária) do carrinho
                        cartItem.variants.splice(variantIndexInCart, 1);
                    }
                    // Caso esteja removendo apenas a variante primária (sem secundária)
                    else if (primaryVariantCode) {
                        selectedPrimaryVariant.selected_flag = false;
                        cartItem.variants.splice(variantIndexInCart, 1);
                    }
                    // Caso esteja removendo o produto inteiro (sem passar códigos de variantes)
                    else {
                        this.cart.items = this.cart.items.filter(item => item.code !== productCode);
                        this.products = this.products.filter(item => item.code !== productCode);
                    }

                    // Após remover, verifica se não sobraram variantes no carrinho, caso não, remove produto inteiro
                    if (cartItem.variants.length === 0) {
                        this.cart.items = this.cart.items.filter(item => item.code !== productCode);
                        this.products = this.products.filter(item => item.code !== productCode);
                    }

                    // Se tiver cupom ativo, revalida
                    if (this.cart.totals.discounts.coupon.code !== '') {
                        this.validateCouponDiscount();
                    }
                },
                calculatePixTotal() {
                    const originalPaymentMethod = this.formPayment.payment_method;
                    this.formPayment.payment_method = 3;
                    const subTotal = this.totalItems();
                    const discountAutomatic = this.totalDiscountAutomatic();
                    let total = discountAutomatic > 0 ? subTotal - discountAutomatic : subTotal;
                    if (this.cart.totals.discounts.coupon.totalValue > 0) {
                        total -= (this.cart.totals.discounts.coupon.totalValue);
                    }
                    if (this.cart.totals.discounts.progressive.totalValue > 0) {
                        total -= (this.cart.totals.discounts.progressive.totalValue);
                    }
                    if (this.cart.totals.freight > 0) {
                        total += this.cart.totals.freight;
                    }
                    this.cart.totals.pixTotalFormatted = formatCurrencyPrice(total / 100);
                    this.formPayment.payment_method = originalPaymentMethod;
                },
                sendPaymentPix() {
                    this.formPayment.payment_method = 3;
                    this.sendPayment();
                    this.$dispatch('credit-card-refused');
                },
                calculateBilletTotal() {
                    const originalPaymentMethod = this.formPayment.payment_method;
                    this.formPayment.payment_method = 1;
                    const subTotal = this.totalItems();
                    const discountAutomatic = this.totalDiscountAutomatic();
                    let total = discountAutomatic > 0 ? subTotal - discountAutomatic : subTotal;
                    if (this.cart.totals.discounts.coupon.totalValue > 0) {
                        total -= (this.cart.totals.discounts.coupon.totalValue);
                    }
                    if (this.cart.totals.discounts.progressive.totalValue > 0) {
                        total -= (this.cart.totals.discounts.progressive.totalValue);
                    }
                    if (this.cart.totals.freight > 0) {
                        total += this.cart.totals.freight;
                    }
                    this.cart.totals.billetTotalFormatted = formatCurrencyPrice(total / 100);
                    this.formPayment.payment_method = originalPaymentMethod;
                },
                sendPaymentBillet() {
                    this.formPayment.payment_method = 1;
                    this.sendPayment();
                    this.$dispatch('credit-card-refused');
                },
            };
        };
    </script>
    <script>
        const variantData = () => {
            return {
                getSelectedVariantByProduct(product, indexCartVariant, indexPrimaryVariant) {
                    const cartItemSelected = this.cart.items.find(item => item.code === product.code);

                    if (!cartItemSelected || !cartItemSelected.variants || !cartItemSelected.variants.length) {
                        return [];
                    }

                    if (product.primaryVariants?.length) {
                        const primaryItemsSelected = cartItemSelected.variants
                            .filter((_, i) => i !== indexCartVariant)
                            .map(item => item.primary_code);

                        const productVariant = product.primaryVariants[indexPrimaryVariant];

                        if (productVariant.secondaryVariants?.length) {
                            return productVariant.secondaryVariants.every(item => item.selected_flag) &&
                            productVariant.code !== cartItemSelected.variants[indexCartVariant]?.primary_code
                                ? [productVariant.code]
                                : [];
                        }

                        return primaryItemsSelected;
                    }

                    return [];
                },
                canAddProductNewVariant(product) {
                    if (!product.multiple_selection_flag) {
                        return false;
                    }
                    const allSelected = product.primaryVariants.every(primary => {
                        return primary.selected_flag === true &&
                            (!primary.secondaryVariants || primary.secondaryVariants.every(secondary => secondary.selected_flag === true));
                    });
                    return !allSelected;
                },
                addProductNewVariant(product) {
                    const cartItem = this.cart.items.find((item) => item.code === product.code);
                    const variants = product.primaryVariants.filter(variant => !cartItem.variants.map(item => item.primary_code).includes(variant.code));

                    if (!variants) return;

                    cartItem.variants.forEach((item) => {
                        item.expanded = false;
                    });

                    if (variants.length === 0) {
                        const primaryVariantWithUnselectedSecondary = product.primaryVariants.find(primary => {
                            return primary.secondaryVariants && primary.secondaryVariants.some(secondary => !secondary.selected_flag);
                        });

                        if (primaryVariantWithUnselectedSecondary) {
                            const secondaryVariant = primaryVariantWithUnselectedSecondary.secondaryVariants.find(secondary => !secondary.selected_flag);
                            secondaryVariant.selected_flag = true;
                            cartItem.variants.push({
                                "primary_code": primaryVariantWithUnselectedSecondary.code,
                                "secondary_code": secondaryVariant.code || null,
                                'primary_tag': primaryVariantWithUnselectedSecondary.tag,
                                'secondary_tag': secondaryVariant.tag || '',
                                "quantity": secondaryVariant.quantity || primaryVariantWithUnselectedSecondary.quantity || product.quantity,
                                "amount": this.getProductAmount(product, primaryVariantWithUnselectedSecondary, secondaryVariant),
                                'variant_price_code': secondaryVariant.variant_price_code || primary.variant_price_code,
                                "selected_flag": true,
                                "expanded": true,
                            });
                            this.applyCouponDiscount();
                            return;
                        }
                    }

                    const variantSelected = variants.find(item => true);
                    variantSelected.selected_flag = true;

                    if (variantSelected.hasOwnProperty('secondaryVariants') && variantSelected.secondaryVariants.length > 0) {
                        let secondarySelected = variantSelected.secondaryVariants.find((s) => s.selected_flag);
                        secondarySelected = secondarySelected ? secondarySelected : variantSelected.secondaryVariants.find(s => true);
                        secondarySelected.selected_flag = true;
                        cartItem.variants.push({
                            "primary_code": variantSelected.code,
                            "secondary_code": secondarySelected.code || null,
                            'primary_tag': variantSelected.tag,
                            'secondary_tag': secondarySelected.tag || '',
                            "quantity": secondarySelected.quantity || variantSelected.quantity || product.quantity,
                            "amount": this.getProductAmount(product, variantSelected, secondarySelected),
                            'variant_price_code': secondarySelected.variant_price_code || variantSelected.variant_price_code,
                            "selected_flag": true,
                            "expanded": true,
                        });
                        this.applyCouponDiscount();
                        return;
                    }
                    cartItem.variants.push({
                        "primary_code": variantSelected.code,
                        "secondary_code": null,
                        'primary_tag': variantSelected.tag,
                        'secondary_tag': '',
                        "quantity": variantSelected.quantity || product.quantity,
                        "amount": this.getProductAmount(product, variantSelected, null),
                        'variant_price_code': variantSelected.variant_price_code,
                        "selected_flag": true,
                        "expanded": true,
                    });
                    this.applyCouponDiscount();
                },
                getSelectedSecondaryVariantByProduct(product) {
                    return product.primaryVariants.flatMap(primary => {
                        return primary.secondaryVariants
                            ? primary.secondaryVariants.filter(secondary => secondary.selected_flag).map(secondary => secondary.code)
                            : [];
                    });
                },
                removeSelectedVariant(product, index) {
                    const selectedProduct = this.products.find((item) => item.code === product.code);
                    const cartItem = this.cart.items.find((item) => item.code === product.code);
                    const selectedVariant = selectedProduct.primaryVariants.find((p) => p.code === cartItem.variants[index].primary_code);
                    if (cartItem.variants[index].hasOwnProperty('secondary_code') && cartItem.variants[index].secondary_code) {
                        const selectedSecondary = selectedVariant.secondaryVariants.find((item) => item.code === cartItem.variants[index].secondary_code);
                        if (selectedSecondary) {
                            selectedSecondary.selected_flag = false;
                            const hasSelectedSecondary = selectedVariant.secondaryVariants.some((item) => item.selected_flag);
                            if (!hasSelectedSecondary) {
                                selectedVariant.selected_flag = false;
                            }
                        }
                        cartItem.variants.splice(index, 1);
                        return;
                    }
                    selectedVariant.selected_flag = false;
                    cartItem.variants.splice(index, 1);
                },
                setSingleSelectionPrimaryVariant(product, selectedItemPrimary, index) {
                    const selectedProduct = this.products.find(item => item.code === product.code);
                    const cartItem = this.cart.items.find(item => item.code === product.code);
                    const selectedVariant = selectedProduct.primaryVariants.find(p => p.code === cartItem.variants[index].primary_code);
                    const newSelectedVariant = selectedProduct.primaryVariants.find(p => p.code === selectedItemPrimary.code);
                    newSelectedVariant.selected_flag = true;
                    selectedVariant.selected_flag = false;
                    cartItem.variants[index].primary_code = selectedItemPrimary.code;
                    cartItem.variants[index].primary_tag = selectedItemPrimary.tag;
                    cartItem.variants[index].quantity = selectedItemPrimary.quantity;
                    cartItem.variants[index].amount = this.getProductAmount(product, selectedItemPrimary, null);
                    cartItem.variants[index].variant_price_code = selectedItemPrimary.variant_price_code;

                    if (newSelectedVariant.secondaryVariants?.length) {
                        const oldSelectedSecondary = selectedVariant.secondaryVariants.find(item => item.code === cartItem.variants[index].secondary_code);
                        selectedVariant.selected_flag = selectedVariant.secondaryVariants.some(item => item.code !== oldSelectedSecondary.code && item.selected_flag);
                        oldSelectedSecondary.selected_flag = false;

                        const secondaryItemsSelected = cartItem.variants.filter((_, i) => i !== index).map(item => item.secondary_code);
                        const filteredSecondary = newSelectedVariant.secondaryVariants.find(item => !secondaryItemsSelected.includes(item.code)) || newSelectedVariant.secondaryVariants[0];
                        filteredSecondary.selected_flag = true;
                        cartItem.variants[index].secondary_code = filteredSecondary.code;
                        cartItem.variants[index].primary_tag = selectedItemPrimary.tag;
                        cartItem.variants[index].secondary_tag = filteredSecondary.tag;
                        cartItem.variants[index].quantity = selectedItemPrimary.quantity;
                        cartItem.variants[index].amount = this.getProductAmount(product, selectedItemPrimary, filteredSecondary);
                        cartItem.variants[index].variant_price_code = filteredSecondary.variant_price_code || selectedItemPrimary.variant_price_code;
                    }
                },
                setSingleSelectionSecondaryVariant(product, selectedItemSecondary, index) {
                    const selectedProduct = this.products.find((item) => item.code === product.code);
                    const cartItem = this.cart.items.find((item) => item.code === product.code);
                    const selectedVariant = selectedProduct.primaryVariants.find((p, i) => p.code === cartItem.variants[index].primary_code);
                    const oldSelectedSecondary = selectedVariant.secondaryVariants.find((item) => item.code === cartItem.variants[index].secondary_code);
                    oldSelectedSecondary.selected_flag = false;
                    const newSelectedSecondary = selectedVariant.secondaryVariants.find((item) => item.code === selectedItemSecondary.code);
                    newSelectedSecondary.selected_flag = true;
                    cartItem.variants[index].secondary_code = selectedItemSecondary.code;
                    cartItem.variants[index].secondary_tag = selectedItemSecondary.tag;
                    cartItem.variants[index].quantity = selectedProduct.quantity || 1;
                    cartItem.variants[index].amount = this.getProductAmount(product, selectedVariant, selectedItemSecondary);
                    cartItem.variants[index].variant_price_code = selectedItemSecondary.variant_price_code;
                },
                setQuantityPrimaryVariant(code, quantity, indexSelectedVariant) {
                    const selectedItem = this.cart.items.find((item) => item.code === code);
                    selectedItem.variants[indexSelectedVariant].quantity = quantity;
                },
                getSecondaryVariantLabel(product, indexCartVariant) {
                    const cartItem = this.cart.items.find(item => item.code === product.code);
                    const variant = cartItem.variants[indexCartVariant];
                    if (variant) {
                        const productVariant = product.primaryVariants.find(p => p.code === variant.primary_code);
                        if (productVariant) {
                            const selectedSecondary = productVariant.secondaryVariants.find(variant => variant.code === variant.secondary_code);
                            return selectedSecondary ? selectedSecondary.tag : '';
                        }
                    }
                    return '';
                },
            };
        };
    </script>
    <script>
        const orderBumpData = () => {
            return {
                hasSelectedOffer(code, variantCode = null) {
                    const offer = this.products.find(item => {
                        return item.product_code === code && (variantCode ? item.variant_code === variantCode : true);
                    });
                    return offer ? true : false;
                },
                pickUpOffer(offer, orderbumpCode) {
                    const selectedVariant = offer.primaryVariants?.find(variant => variant.selected_flag);
                    const amount = selectedVariant ? (selectedVariant.amount ?? offer.amount) : offer.amount;
                    const uniqueKey = selectedVariant ? selectedVariant.unique_key : offer.unique_key;

                    const code = selectedVariant ? selectedVariant.code : offer.product_code;
                    const discount_value = offer.discount_value;
                    const discount_type_enum = offer.discount_type_enum;
                    const formattedAmount = this.applyDiscountAmount((discount_value / 100), (amount / 100), discount_type_enum);

                    const newOffer = {
                        ...offer,
                        code: offer.product_code,
                        variant_code: selectedVariant ? selectedVariant.code : null,
                        unique_key: uniqueKey,
                        is_order_bump: true,
                        order_bump_code: orderbumpCode,
                        amount: parseInt((Math.round(formattedAmount * 100))),
                        amount_formatted: formatCurrencyPrice(formattedAmount),
                        amount_with_discount: parseInt(amount),
                        descriptionExpanded: false,
                        quantity: selectedVariant?.quantity || 1,
                    };

                    const alreadyInCart = this.products.some(item => item.unique_key === uniqueKey);

                    if (!alreadyInCart) {
                        this.products.push(newOffer);
                        this.$nextTick(() => {
                            this.products = [...this.products];

                            // Adiciona o item também ao carrinho
                            if (newOffer.hasOwnProperty("primaryVariants") && newOffer.primaryVariants.length > 0) {
                                let selectedPrimary = newOffer.primaryVariants.find((p) => p.selected_flag);
                                selectedPrimary = selectedPrimary ? selectedPrimary : newOffer.primaryVariants.find(p => true);
                                selectedPrimary.selected_flag = true;
                                selectedPrimary.quantity = selectedPrimary.quantity || newOffer.quantity;
                                selectedPrimary.expanded = true;

                                if (selectedPrimary.hasOwnProperty("secondaryVariants") && selectedPrimary.secondaryVariants.length > 0) {
                                    let selectedSecondary = selectedPrimary.secondaryVariants.find((s) => s.selected_flag);
                                    selectedSecondary = selectedSecondary ? selectedSecondary : selectedPrimary.secondaryVariants.find(s => true);
                                    selectedSecondary.selected_flag = true;
                                    selectedSecondary.quantity = selectedSecondary.quantity || newOffer.quantity;
                                    selectedSecondary.expanded = true;

                                    this.cart.items.push(
                                        this.buildCartItem(newOffer, selectedPrimary, selectedSecondary, true)
                                    );
                                } else {
                                    this.cart.items.push(
                                        this.buildCartItem(newOffer, selectedPrimary, null, true)
                                    );
                                }
                            } else {
                                this.cart.items.push({
                                    'code': newOffer.code,
                                    'unique_key': newOffer.unique_key,
                                    'is_order_bump': true,
                                    'price_type_enum': newOffer.price_type_enum,
                                    'product_price_code': newOffer.product_price_code,
                                    'variant_flag': newOffer.variant_flag,
                                    'order_bump_code': newOffer.order_bump_code || null,
                                    'amount': newOffer.amount,
                                    'quantity': newOffer.quantity,
                                    'variants': [],
                                });
                            }

                            this.total();
                        });
                    } else {
                        this.total();
                    }

                    this.total();

                    this.validateAndFetchFreight();
                },
                applyDiscountAmount(discount, amount, discount_type) {
                    let valueFormated;
                    if (discount_type === 1) {
                        return (amount - discount);
                    } else {
                        valueFormated = amount - ((amount / 100) * discount);
                    }

                    return valueFormated
                },
                removePickUpOffer(code, variantCode = null) {
                    const offer = this.products.find(item => {
                        return item.code === code && item.is_order_bump === true && (variantCode ? item.variant_code === variantCode : true);
                    });

                    if (offer) {
                        const uniqueKey = offer.unique_key;

                        // Remove da lista de produtos
                        this.products = this.products.filter(item => item.unique_key !== uniqueKey);

                        // Remove do carrinho também
                        this.cart.items = this.cart.items.filter(item => item.unique_key !== uniqueKey);
                    }

                    this.$nextTick(() => {
                        this.total();
                        this.validateAndFetchFreight();
                    });
                },
            };
        };
    </script>
    <script>
        function toast() {
            return {
                show: false,
                type: "success",
                timer: 5000,
                title: "",
                message: "",
                config(params) {
                    this.show = true;
                    this.type = params?.detail?.type ?? this.type;
                    this.title = params?.detail?.title ?? "";
                    this.message = params?.detail?.message ?? "";
                    this.timer = params?.detail?.timer ?? this.timer;
                    setTimeout(() => {
                        this.show = false;
                    }, this.timer);
                },
            };
        }
    </script>
    <script>
        const checkoutAllData = () => {
            return {
                ...checkoutData(),
                ...paymentData(),
                ...cartData(),
                ...variantData(),
                ...orderBumpData(),
            }
        }
    </script>

<script data-navigate-once="true">window.livewireScriptConfig = {"csrf":"n2CL9wANyZUJ7z200UsHYpGO22c9dseFPHX1JfsN","uri":"\/livewire\/update","progressBar":"","nonce":""};</script>
<script defer src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015" integrity="sha512-ZpsOmlRQV6y907TI0dKBHq9Md29nnaEIPlkf84rnaERnq6zvWvPUqr2ft8M1aS28oN72PdrCzSjY4U6VaAw1EQ==" data-cf-beacon='{"version":"2024.11.0","token":"979abdeba14b4493a3eb2826a3ac2e99","r":1,"server_timing":{"name":{"cfCacheStatus":true,"cfEdge":true,"cfExtPri":true,"cfL4":true,"cfOrigin":true,"cfSpeedBrain":true},"location_startswith":null}}' crossorigin="anonymous"></script>
</body>
</html>
